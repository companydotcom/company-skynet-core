!function(t){var e={};function r(o){if(e[o])return e[o].exports;var s=e[o]={i:o,l:!1,exports:{}};return t[o].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=e,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(o,s,function(e){return t[e]}.bind(null,s));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=2)}([function(t,e,r){"use strict";r.r(e),r.d(e,"parseJson",(function(){return o})),r.d(e,"deepParseJson",(function(){return s})),r.d(e,"formatHttpResponse",(function(){return a})),r.d(e,"getErrorString",(function(){return n})),r.d(e,"neverThrowError",(function(){return i})),r.d(e,"sleep",(function(){return c})),r.d(e,"itemExists",(function(){return l})),r.d(e,"evaluateSharedMicroApplicationData",(function(){return u}));const o=t=>{try{return JSON.parse(t)}catch(e){return t}},s=t=>{if("string"!=typeof t)return Array.isArray(t)?t.map(t=>s(t)):"object"==typeof t&&null!==t?Object.keys(t).reduce((e,r)=>(e[r]=s(t[r]),e),{}):t;if(!isNaN(Number(t)))return t;try{return s(JSON.parse(t))}catch(e){return t}},a=(t,e,r)=>{const o=(t=>{switch(t){case 200:return"OK";case 201:return"Created";case 400:return"Bad Request";case 500:return"Internal Server Error";default:return}})(t),s=`HTTP Resp: ${t}${o?" - "+o:""}`;let a={};return r instanceof Error?a.error=r.toString():"object"==typeof r?a=r:a.message=r,{statusCode:t,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":!0},body:JSON.stringify({resp:s,input:e,resultObj:a})}},n=t=>t instanceof Error?t.toString():"object"==typeof t?JSON.stringify(t,null,4):t,i=async(t,e)=>{const r={status:"pass",params:t};try{r.workerResp=await e(t)}catch(t){r.status="fail",r.error=n(t)}return r},c=async t=>new Promise(e=>setTimeout(()=>{e()},t)),l=(t,e)=>"object"==typeof t&&null!==t&&Object.prototype.hasOwnProperty.call(t,e),u=(t,e)=>{const r={};for(const[o,s]of Object.entries(t))s.microApplicationsToShareWith&&(s.servicesToShareWith.includes(e)||s.servicesToShareWith.includes("*"))&&(r[o]=s);return r}},,function(t,e,r){"use strict";var o;r.r(e),r.d(e,"fetchHandler",(function(){return j})),r.d(e,"bulkFetchHandler",(function(){return S})),r.d(e,"directTransitionHandler",(function(){return A})),r.d(e,"bulkTransitionHandler",(function(){return N})),r.d(e,"webhookHandler",(function(){return F})),r.d(e,"setupDatabase",(function(){return k})),r.d(e,"httpReqHandler",(function(){return I}));var s=new Uint8Array(16);function a(){if(!o&&!(o="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(s)}var n=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var i=function(t){return"string"==typeof t&&n.test(t)},c=[],l=0;l<256;++l)c.push((l+256).toString(16).substr(1));var u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(c[t[e+0]]+c[t[e+1]]+c[t[e+2]]+c[t[e+3]]+"-"+c[t[e+4]]+c[t[e+5]]+"-"+c[t[e+6]]+c[t[e+7]]+"-"+c[t[e+8]]+c[t[e+9]]+"-"+c[t[e+10]]+c[t[e+11]]+c[t[e+12]]+c[t[e+13]]+c[t[e+14]]+c[t[e+15]]).toLowerCase();if(!i(r))throw TypeError("Stringified UUID is invalid");return r};var d=function(t,e,r){var o=(t=t||{}).random||(t.rng||a)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e){r=r||0;for(var s=0;s<16;++s)e[r+s]=o[s];return e}return u(o)},p=r(0);const m=async(t,e,r=!1)=>{const o=new t.DynamoDB({apiVersion:"2012-08-10"});Object(p.itemExists)(e,"Limit")||(e.Limit=1e3);try{const s=await o.query(e).promise();return!0===r?!Object(p.itemExists)(s,"Items")||s.Items.length<1?{items:[],ExclusiveStartKey:void 0}:{items:s.Items.map(e=>t.DynamoDB.Converter.unmarshall(e)),ExclusiveStartKey:Object(p.itemExists)(s,"LastEvaluatedKey")?s.LastEvaluatedKey:void 0}:!Object(p.itemExists)(s,"Items")||s.Items.length<1?[]:s.Items.map(e=>t.DynamoDB.Converter.unmarshall(e))}catch(t){throw t}},y=async(t,e,r,o,s)=>{const a={TableName:e,Key:r,UpdateExpression:`ADD ${o} :val`,ExpressionAttributeValues:{":val":s}};return(new t.DynamoDB.DocumentClient).update(a).promise()},h=async(t,e,r,o=1e3)=>{const s=new t.DynamoDB({apiVersion:"2012-08-10"}),a=e.map(e=>({PutRequest:{Item:t.DynamoDB.Converter.marshall(e)}})),n=[];for(;a.length>0;)n.push(s.batchWriteItem({RequestItems:{[r]:a.splice(0,25)}}).promise());console.log(`DYNAMODB SERVICE: batchPutIntoDynamoDb: totalBulkRequestsSent: ${n.length} with each request having 25 records except the last one having ${e.length-25*(n.length-1)} records`);try{const e=(await Promise.all(n)).map(e=>Object(p.itemExists)(e,"UnprocessedItems")&&Object(p.itemExists)(e.UnprocessedItems,r)&&e.UnprocessedItems[r].length>0?e.UnprocessedItems[r].map(e=>t.DynamoDB.Converter.unmarshall(e.PutRequest.Item)):[]).reduce((t,e)=>t.concat(e));return!(e.length>0)||(await Object(p.sleep)(o),h(t,e,r,o+1e3))}catch(t){throw t}},g=t=>{if((t=>"string"==typeof t)(t))return"String";if((t=>"number"==typeof t)(t))return"Number";if((t=>Array.isArray(t))(t))return"String.Array";throw new Error(`Invalid MessageAttribute type: ${typeof t} for value ${t}. Valid types: String, Number, Array.`)},f=t=>Object.keys(t).reduce((e,r)=>{const o=t[r];if(void 0===o)return e;const s=g(o);return{...e,[r]:{DataType:s,StringValue:"String.Array"===s?JSON.stringify(o):o.toString()}}},{});var b=async(t,e,r,o={},s={})=>{const a=new t.SNS({apiVersion:"2010-03-31"});let n;try{const t={Message:JSON.stringify(r),TopicArn:e,MessageAttributes:f(o),...s};return n=await a.publish(t).promise(),console.log("SNS Publish - Success: ",JSON.stringify(t)),n}catch(t){return console.log("SNS Publish - Failure: ",t.toString()),t}};const{deepParseJson:w}=r(0),O=t=>{let e=t.Body?t.Body:t.body,r={};try{e=t.Body?w(t.Body):w(t.body)}catch(t){throw console.log("Error: withSqsConsumer - parseMsg: Did not get a JSON parsable message in body"),t}var o;return void 0!==e.MessageAttributes&&(o=e.MessageAttributes,r=Object.keys(o).reduce((t,e)=>{const{Type:r,Value:s}=o[e];return"String"!==r&&"Number"!==r?{...t,[e]:JSON.parse(s)}:{...t,[e]:s}},{})),{msgBody:e.Message,msgAttribs:r,rcptHandle:t.ReceiptHandle}},v=async(t,e,r,o)=>{console.log("Fetching messages from SQS URL: "+o);const s=new t.SQS({region:e});let a=[];const n=[];let i=r<500?r:500;for(;i>0;){const t=i<10?i:10;i-=t,n.push(s.receiveMessage({QueueUrl:o,MaxNumberOfMessages:t,VisibilityTimeout:900}).promise())}return(await Promise.all(n)).forEach(t=>{void 0!==t.Messages&&t.Messages.length>0&&(a=[...a,...t.Messages])}),a},E=async(t,e)=>(await m(t,{TableName:"Account",ExpressionAttributeNames:{"#pk":"accountId"},KeyConditionExpression:"#pk = :accId",ExpressionAttributeValues:{":accId":{S:e}}}))[0],x=async(t,e)=>(await m(t,{TableName:"User",ExpressionAttributeNames:{"#pk":"userId"},KeyConditionExpression:"#pk = :uId",ExpressionAttributeValues:{":uId":{S:e}}}))[0],R=async(t,e,r,o,{msgBody:s,msgAttribs:a,rcptHandle:n},i)=>{const c=await m(t,{TableName:"vendorConfig",ExpressionAttributeNames:{"#pk":"service"},KeyConditionExpression:"#pk = :serv",ExpressionAttributeValues:{":serv":{S:""+r}}});let l={};if(Object(p.itemExists)(s,"context")&&Object(p.itemExists)(s.context,"user")&&Object(p.itemExists)(s.context.user,"accountId")){const e=await E(t,s.context.user.accountId);Object(p.itemExists)(e,"vendorData")&&Object(p.itemExists)(e.vendorData,""+r)&&(l=e.vendorData[""+r]),Object(p.itemExists)(s.context,o)||(s.context.account=e)}let u={};if(Object(p.itemExists)(s,"context")&&Object(p.itemExists)(s.context,"user")&&Object(p.itemExists)(s.context.user,"accountId")){const e=await E(t,s.context.user.accountId);Object(p.itemExists)(e,"sharedMicroApplicationAccountData")&&(u=Object(p.evaluateSharedMicroApplicationData)(e.sharedMicroApplicationAccountData,r)),Object(p.itemExists)(s.context,o)||(s.context.account=e)}let y={};if(Object(p.itemExists)(s,"context")&&Object(p.itemExists)(s.context,"user")&&Object(p.itemExists)(s.context.user,"userId")){const e=await x(t,s.context.user.userId);Object(p.itemExists)(e,"vendorData")&&Object(p.itemExists)(e.vendorData,""+r)&&(y=e.vendorData[""+r])}let g={};if(Object(p.itemExists)(s,"context")&&Object(p.itemExists)(s.context,"user")&&Object(p.itemExists)(s.context.user,"userId")){const e=await x(t,s.context.user.userId);Object(p.itemExists)(e,"sharedVendorData")&&(g=Object(p.evaluateSharedMicroApplicationData)(e.sharedMicroApplicationUserData,r))}const f=await Object(p.neverThrowError)({message:s,serviceConfigData:void 0!==c&&Array.isArray(c)&&c.length>0&&void 0!==c[0].configdata?c[0].configdata:[],serviceAccountData:l,sharedMicroApplicationAccountData:u,serviceUserData:y,sharedMicroApplicationUserData:g,attributes:a},i);if(console.log("processMessage: INFO: Result from worker is "+JSON.stringify(f,null,4)),Object(p.itemExists)(f.workerResp,"serviceAccountData")){if("object"!=typeof f.workerResp.serviceAccountData)throw new Error("Service specific user account data should be an object");if(Object(p.itemExists)(s,"context")&&Object(p.itemExists)(s.context,"user")&&Object(p.itemExists)(s.context.user,"accountId")){const e=await E(t,s.context.user.accountId);Object(p.itemExists)(e,"vendorData")||(e.vendorData={}),Object(p.itemExists)(e.vendorData,""+r)||(e.vendorData[""+r]={}),e.vendorData[""+r]={...e.vendorData[""+r],...f.workerResp.serviceAccountData},await h(t,[e],"Account")}}if(Object(p.itemExists)(f.workerResp,"sharedMicroApplicationAccountData")){if("object"!=typeof f.workerResp.sharedMicroApplicationAccountData)throw new Error("Shared service account data should be an object");if(Object(p.itemExists)(s,"context")&&Object(p.itemExists)(s.context,"user")&&Object(p.itemExists)(s.context.user,"accountId")){const e=await E(t,s.context.user.accountId);Object(p.itemExists)(e,"sharedVendorData")||(e.sharedVendorData={}),Object(p.itemExists)(e.sharedVendorData,""+r)||(e.sharedVendorData[""+r]={}),e.sharedVendorData[""+r]={...e.sharedVendorData[""+r],...f.workerResp.sharedMicroApplicationAccountData},await h(t,[e],"Account")}}if(Object(p.itemExists)(f.workerResp,"serviceUserData")){if("object"!=typeof f.workerResp.serviceUserData)throw new Error("Service specific user data should be an object");if(Object(p.itemExists)(s,"context")&&Object(p.itemExists)(s.context,"user")&&Object(p.itemExists)(s.context.user,"userId")){const e=await x(t,s.context.user.userId);Object(p.itemExists)(e,"vendorData")||(e.vendorData={}),Object(p.itemExists)(e.vendorData,""+r)||(e.vendorData[""+r]={}),e.vendorData[""+r]={...e.vendorData[""+r],...f.workerResp.serviceUserData},await h(t,[e],"User")}}if(Object(p.itemExists)(f.workerResp,"sharedMicroApplicationUserData")){if("object"!=typeof f.workerResp.sharedMicroApplicationUserData)throw new Error("Shared service user data should be an object");if(Object(p.itemExists)(s,"context")&&Object(p.itemExists)(s.context,"user")&&Object(p.itemExists)(s.context.user,"userId")){const e=await x(t,s.context.user.userId);Object(p.itemExists)(e,"sharedMicroApplicationUserData")||(e.sharedMicroApplicationUserData={}),Object(p.itemExists)(e.sharedMicroApplicationUserData,""+r)||(e.sharedMicroApplicationUserData[""+r]={}),e.sharedMicroApplicationUserData[""+r]={...e.sharedMicroApplicationUserData[""+r],...f.workerResp.sharedMicroApplicationUserData},await h(t,[e],"User")}}if(Object(p.itemExists)(f.workerResp,"crmData")){if("object"!=typeof f.workerResp.crmData)throw new Error("Data going to a CRM should be an object");Object.keys(f.workerResp.crmData).length>0&&await b(t,`arn:aws:sns:${e}:${o}:event-bus`,{...s,payload:f.workerResp.crmData,metadata:{eventType:"sendFields",dateCreated:Date.now(),operationType:"update",invocationSource:r}},{...a,status:"trigger",eventType:"crm",eventId:d(),emitter:r})}let w;w=Object.prototype.hasOwnProperty.call(f,"workerResp")?Object.prototype.hasOwnProperty.call(f.workerResp,"res")?f.workerResp.res:f.workerResp:void 0;return await b(t,`arn:aws:sns:${e}:${o}:event-bus`,{...s,inputPayload:s.payload,payload:w},{...a,status:(t=>{let e=t.status;return Object.prototype.hasOwnProperty.call(t,"workerResp")&&Object.prototype.hasOwnProperty.call(t.workerResp,"extraStatus")&&(e=`${e}-${t.workerResp.extraStatus}`),e})(f),eventId:d(),emitter:r}),void 0!==n&&await(async(t,e,r,o)=>{new t.SQS({region:e}).deleteMessage({QueueUrl:r,ReceiptHandle:o}).promise()})(t,e,"transition"===a.eventType?`https://sqs.${e}.amazonaws.com/${o}/${r}-bulktq`:`https://sqs.${e}.amazonaws.com/${o}/${r}-bulkfq`,n),"fail"===f.status&&(async(t,e,r,o)=>{new t.SQS({region:e}).sendMessage({QueueUrl:r,MessageBody:o}).promise()})(t,e,`https://sqs.${e}.amazonaws.com/${o}/${r}-ldlq`,JSON.stringify({failedIn:r,body:{Message:s,MessageAttributes:a,Error:f.error}})),!0},D=async(t,{throttleLmts:e,safeThrottleLimit:r,reserveCapForDirect:o,retryCntForCapacity:s},a,n=!0,i=0)=>{if(i>s)return 0;i>0&&await Object(p.sleep)(1e3);const c=JSON.parse(e);if(void 0===c.day&&void 0===c.hour&&void 0===c.minute&&void 0===c.second)return 1e6;const l=!0===n?(1-o)*r:1*r,u=await(async(t,e)=>{const r=Date.now(),o=Math.floor(r/1e3)+1,s=o-o%60+60,a=s-s%3600+3600,n=a-a%86400+86400,i={TableName:"apiCallCount",ExpressionAttributeNames:{"#pk":"serviceAndDuration","#et":"expiryTime"},KeyConditionExpression:"#pk = :sd AND #et = :et"},c=[m(t,{...i,ExpressionAttributeValues:{":sd":{S:e+"-second"},":et":{N:o.toString()}}}),m(t,{...i,ExpressionAttributeValues:{":sd":{S:e+"-minute"},":et":{N:s.toString()}}}),m(t,{...i,ExpressionAttributeValues:{":sd":{S:e+"-hour"},":et":{N:a.toString()}}}),m(t,{...i,ExpressionAttributeValues:{":sd":{S:e+"-day"},":et":{N:n.toString()}}})],l=await Promise.all(c);return{second:l[0].callCount?l[0].callCount:0,minute:l[1].callCount?l[1].callCount:0,hour:l[2].callCount?l[2].callCount:0,day:l[3].callCount?l[3].callCount:0}})(t,a);let d="x";return void 0!==c.day&&(Math.floor(c.day*l-u.day)<d||"x"===d)&&(d=Math.floor((c.day-u.day)*l)),void 0!==c.hour&&(Math.floor(c.hour*l-u.hour)<d||"x"===d)&&(d=Math.floor((c.hour-u.hour)*l)),void 0!==c.minute&&(Math.floor(c.minute*l-u.minute)<d||"x"===d)&&(d=Math.floor((c.minute-u.minute)*l)),void 0!==c.second&&(Math.floor(c.second*l-u.second)<d||"x"===d)&&(d=Math.floor((c.second-u.second)*l)),d>0?d:D(t,{throttleLmts:e,safeThrottleLimit:r,reserveCapForDirect:o,retryCntForCapacity:s},a,n,i+1)},C=async(t,e,r=1)=>{const o=Date.now(),s=Math.floor(o/1e3)+1,a=s-s%60+60,n=a-a%3600+3600,i=n-n%86400+86400,c=[y(t,"apiCallCount",{serviceAndDuration:e+"-second",expiryTime:s},"callCount",r),y(t,"apiCallCount",{serviceAndDuration:e+"-minute",expiryTime:a},"callCount",r),y(t,"apiCallCount",{serviceAndDuration:e+"-hour",expiryTime:n},"callCount",r),y(t,"apiCallCount",{serviceAndDuration:e+"-day",expiryTime:i},"callCount",r)];return await Promise.all(c),!0},j=async(t,{throttleLmts:e,safeThrottleLimit:r,reserveCapForDirect:o,retryCntForCapacity:s},a,n,i,c,l,u)=>(async(t,{throttleLmts:e,safeThrottleLimit:r,reserveCapForDirect:o,retryCntForCapacity:s},a,n,i,c,l,u)=>{try{if(console.log("directFetch: INFO: Input is: "+("object"==typeof c?JSON.stringify(c,null,4):c)),void 0===c.Records||1!==c.Records.length)throw new Error(`directFetch: ERROR: Lambda was wrongly triggered with ${void 0===c.Records?0:c.Records.length} records`);const d=await D(t,{throttleLmts:e,safeThrottleLimit:r,reserveCapForDirect:o,retryCntForCapacity:s},n,!1);console.log("directFetch: INFO: Processing event "+JSON.stringify(c.Records.length,null,4));let p=[O(c.Records[0])];if(u&&(p=await u("fetch",!1,p)),!p.length)throw new Error("directFetch: ERROR: Processing complete.  Pre-worker hook rejected message.");if(d<1)throw new Error("directFetch: ERROR: No capacity to make a call");await C(t,n);const{msgBody:m,msgAttribs:y}=p[0];return await R(t,a,n,i,{msgBody:m,msgAttribs:y},l),"directFetch: INFO: Processing complete"}catch(t){throw console.log("directFetch: ERROR: "+Object(p.getErrorString)(t)),t}})(t,{throttleLmts:e,safeThrottleLimit:r,reserveCapForDirect:o,retryCntForCapacity:s},a,n,i,c,l,u),S=async(t,{throttleLmts:e,safeThrottleLimit:r,reserveCapForDirect:o,retryCntForCapacity:s},a,n,i,c,l,u)=>(async(t,{throttleLmts:e,safeThrottleLimit:r,reserveCapForDirect:o,retryCntForCapacity:s},a,n,i,c,l,u)=>{try{console.log("bulkFetch: INFO: Scheduled call started. Event is "+("object"==typeof c?JSON.stringify(c,null,4):c));const d=await D(t,{throttleLmts:e,safeThrottleLimit:r,reserveCapForDirect:o,retryCntForCapacity:s},n,!0);if(d<1)throw new Error("bulkFetch: ERROR: No capacity to make a call");const p=await v(t,a,d,`https://sqs.${a}.amazonaws.com/${i}/${n}-bulkfq`);console.log("bulkFetch: INFO: Processing event "+JSON.stringify(p.length,null,4));let m=p.map(t=>O(t));if(u&&(m=await u("fetch",!0,m)),m.length<1)return"bulkFetch: INFO: Processing complete";await C(t,n,p.length);const y=[];return m.forEach(e=>{y.push(R(t,a,n,i,e,l))}),await Promise.all(y),"bulkFetch: INFO: Processing complete"}catch(t){throw console.log("bulkFetch: ERROR: "+Object(p.getErrorString)(t)),t}})(t,{throttleLmts:e,safeThrottleLimit:r,reserveCapForDirect:o,retryCntForCapacity:s},a,n,i,c,l,u),A=async(t,{throttleLmts:e,safeThrottleLimit:r,reserveCapForDirect:o,retryCntForCapacity:s},a,n,i,c,l,u)=>(async(t,{throttleLmts:e,safeThrottleLimit:r,reserveCapForDirect:o,retryCntForCapacity:s},a,n,i,c,l,u)=>{try{if(console.log("directTransition: INFO: Input is: "+("object"==typeof c?JSON.stringify(c,null,4):c)),void 0===c.Records||1!==c.Records.length)throw new Error(`directTransition: ERROR: Lambda was wrongly triggered with ${void 0===c.Records?0:c.Records.length} records`);const d=await D(t,{throttleLmts:e,safeThrottleLimit:r,reserveCapForDirect:o,retryCntForCapacity:s},n,!1);console.log("directTransition: INFO: Processing event "+JSON.stringify(c.Records.length,null,4));let p=[O(c.Records[0])];if(u&&(p=await u("fetch",!1,p)),!p.length)throw new Error("directFetch: ERROR: Processing complete.  Pre-worker hook rejected message.");if(d<1)throw new Error("directTransition: ERROR: No capacity to make a call");await C(t,n);const{msgBody:m,msgAttribs:y}=p[0];return await R(t,a,n,i,{msgBody:m,msgAttribs:y},l),"directTransition: INFO: Processing complete"}catch(t){throw console.log("directTransition: ERROR: "+Object(p.getErrorString)(t)),t}})(t,{throttleLmts:e,safeThrottleLimit:r,reserveCapForDirect:o,retryCntForCapacity:s},a,n,i,c,l,u),N=async(t,{throttleLmts:e,safeThrottleLimit:r,reserveCapForDirect:o,retryCntForCapacity:s},a,n,i,c,l,u)=>(async(t,{throttleLmts:e,safeThrottleLimit:r,reserveCapForDirect:o,retryCntForCapacity:s},a,n,i,c,l,u)=>{try{console.log("bulkTransition: INFO: Scheduled call started. Event is "+("object"==typeof c?JSON.stringify(c,null,4):c));const d=await D(t,{throttleLmts:e,safeThrottleLimit:r,reserveCapForDirect:o,retryCntForCapacity:s},n,!0);if(d<1)throw new Error("bulkTransition: ERROR: No capacity to make a call");const p=await v(t,a,d,`https://sqs.${a}.amazonaws.com/${i}/${n}-bulktq`);console.log("bulkTransition: INFO: Processing event "+JSON.stringify(p.length,null,4));let m=p.map(t=>O(t));if(u&&(m=await u("transition",!0,m)),m.length<1)return"bulkTransition: INFO: Processing complete";await C(t,n,m.length);const y=[];return m.forEach(e=>{y.push(R(t,a,n,i,e,l))}),await Promise.all(y),"bulkTransition: INFO: Processing complete"}catch(t){throw console.log("bulkTransition: ERROR: "+Object(p.getErrorString)(t)),t}})(t,{throttleLmts:e,safeThrottleLimit:r,reserveCapForDirect:o,retryCntForCapacity:s},a,n,i,c,l,u),F=async(t,e,r,o,s,a,n)=>(async(t,e,r,o,s,a,n)=>{try{if(console.log("directTransition: INFO: Input is: "+("object"==typeof s?JSON.stringify(s,null,4):s)),void 0===s.Records||1!==s.Records.length)throw new Error(`directTransition: ERROR: Lambda was wrongly triggered with ${void 0===s.Records?0:s.Records.length} records`);console.log("webhook: INFO: Processing event "+JSON.stringify(s.Records.length,null,4));let i=[O(s.Records[0])];if(n&&(i=await n("webhook",!1,i)),!i.length)throw new Error("directFetch: ERROR: Processing complete.  Pre-worker hook rejected message.");const{msgBody:c,msgAttribs:l}=i[0];return await R(t,e,r,o,{msgBody:c,msgAttribs:l},a),"directTransition: INFO: Processing complete"}catch(t){throw console.log("directTransition: ERROR: "+Object(p.getErrorString)(t)),t}})(t,e,r,o,s,a,n),k=async(t,e,r)=>{let o="";if("object"==typeof e)o=e;else try{o=JSON.parse(e)}catch(t){return void console.log("Unable to parse the database file. Please check if it is a valid JSON document.")}return(async(t,e,r)=>{try{const o={service:r,configdata:e};return console.log("Data being sent "+JSON.stringify([o],null,4)),await h(t,[o],"vendorConfig"),console.log("Database has been setup successfully"),"Database has been setup successfully"}catch(t){throw console.log("bulkTransition: ERROR: "+Object(p.getErrorString)(t)),t}})(t,o,r)},I=async(t,e,r,o,s,a)=>(async(t,e,r,o,s,a)=>{try{console.log("getpostHttp: INFO: Input is: "+("object"==typeof a?JSON.stringify(a,null,4):a));const n="object"==typeof a?a:JSON.parse(a),i=n.body,c=n.pathParameters,l="undefined"!==n.queryStringParameters?n.queryStringParameters:{};return await b(t,`arn:aws:sns:${e}:${o}:event-bus`,{payload:{...c,...i,...l},context:null,metadata:{eventType:c.eventType}},{status:"trigger",operation:"fetch"===c.operation?"R":"C",entity:"product",entityId:s,eventId:d(),emitter:r,eventType:c.operation}),{statusCode:200,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":!0},body:JSON.stringify({status:"getpostHttp: INFO: Request accepted and queued",input:a})}}catch(t){return console.log("getpostHttp: ERROR: "+Object(p.getErrorString)(t)),{statusCode:500,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":!0},body:JSON.stringify({status:`getpostHttp: ERROR: We encountered an error. Please quote TS${Date.now()} as reference id for further assistance`,input:a})}}})(t,e,r,o,s,a)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYnJhcnkvdXRpbC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3JuZy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3JlZ2V4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvc3RyaW5naWZ5LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvdmFsaWRhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci92NC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGlicmFyeS9keW5hbW8uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYnJhcnkvZXZlbnRTdHJlYW0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYnJhcnkvcXVldWUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYnJhcnkvcHJvY2Vzcy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGlicmFyeS90aHJvdHRsZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2hhbmRsZXJzL2ZldGNoLmpzIiwid2VicGFjazovLy8uL3NyYy9oYW5kbGVycy9idWxrRmV0Y2guanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2hhbmRsZXJzL2RpcmVjdFRyYW5zaXRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2hhbmRsZXJzL2J1bGtUcmFuc2l0aW9uLmpzIiwid2VicGFjazovLy8uL3NyYy9oYW5kbGVycy93ZWJob29rLmpzIiwid2VicGFjazovLy8uL3NyYy9oYW5kbGVycy9zZXR1cERhdGFiYXNlLmpzIiwid2VicGFjazovLy8uL3NyYy9oYW5kbGVycy9nZXRQb3N0SHR0cC5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsInBhcnNlSnNvbiIsInYiLCJKU09OIiwicGFyc2UiLCJlcnIiLCJkZWVwUGFyc2VKc29uIiwianNvblN0cmluZyIsIkFycmF5IiwiaXNBcnJheSIsIm1hcCIsInZhbCIsImtleXMiLCJyZWR1Y2UiLCJvYmoiLCJpc05hTiIsIk51bWJlciIsImZvcm1hdEh0dHBSZXNwb25zZSIsImNvZGUiLCJpbnB1dCIsInJlc3VsdCIsInN0YXR1cyIsImdldENvZGVTdGF0dXMiLCJyZXNwIiwicmVzdWx0T2JqIiwiRXJyb3IiLCJlcnJvciIsInRvU3RyaW5nIiwibWVzc2FnZSIsInN0YXR1c0NvZGUiLCJoZWFkZXJzIiwiYm9keSIsInN0cmluZ2lmeSIsImdldEVycm9yU3RyaW5nIiwiZSIsIm5ldmVyVGhyb3dFcnJvciIsImFzeW5jIiwicGFyYW1zIiwibWVzc2FnZUhhbmRsZXIiLCJ3b3JrZXJSZXNwIiwic2xlZXAiLCJQcm9taXNlIiwic2V0VGltZW91dCIsIml0ZW1FeGlzdHMiLCJwYXJhbSIsImV2YWx1YXRlU2hhcmVkTWljcm9BcHBsaWNhdGlvbkRhdGEiLCJzaGFyZWRNaWNyb0FwcGxpY2F0aW9uRGF0YSIsInNlcnZpY2UiLCJyZWFkYWJsZVNoYXJlZE1pY3JvQXBwbGljYXRpb25EYXRhIiwiZW50cmllcyIsIm1pY3JvQXBwbGljYXRpb25zVG9TaGFyZVdpdGgiLCJzZXJ2aWNlc1RvU2hhcmVXaXRoIiwiaW5jbHVkZXMiLCJnZXRSYW5kb21WYWx1ZXMiLCJybmRzOCIsIlVpbnQ4QXJyYXkiLCJybmciLCJjcnlwdG8iLCJtc0NyeXB0byIsInV1aWQiLCJ0ZXN0IiwiYnl0ZVRvSGV4IiwicHVzaCIsInN1YnN0ciIsImFyciIsIm9mZnNldCIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsInRvTG93ZXJDYXNlIiwiVHlwZUVycm9yIiwib3B0aW9ucyIsImJ1ZiIsInJuZHMiLCJyYW5kb20iLCJmZXRjaFJlY29yZHNCeVF1ZXJ5IiwiQVdTIiwicXVlcnlPYmplY3QiLCJwYWdpbmF0ZSIsImR5bmFtb2RiIiwiRHluYW1vREIiLCJhcGlWZXJzaW9uIiwiTGltaXQiLCJxUmVzdWx0IiwicXVlcnkiLCJwcm9taXNlIiwiSXRlbXMiLCJpdGVtcyIsIkV4Y2x1c2l2ZVN0YXJ0S2V5IiwiaXQiLCJDb252ZXJ0ZXIiLCJ1bm1hcnNoYWxsIiwiTGFzdEV2YWx1YXRlZEtleSIsIml0ZW0iLCJpbmNyZW1lbnRDb2x1bW4iLCJ0TmFtZSIsInNyY2hQYXJhbXMiLCJjb2xOYW1lIiwiaW5jVmFsIiwiVGFibGVOYW1lIiwiS2V5IiwiVXBkYXRlRXhwcmVzc2lvbiIsIkV4cHJlc3Npb25BdHRyaWJ1dGVWYWx1ZXMiLCJEb2N1bWVudENsaWVudCIsInVwZGF0ZSIsImJhdGNoUHV0SW50b0R5bmFtb0RiIiwicmVjcyIsImJhY2tvZmYiLCJwcmVwYXJlZFJlY29yZHMiLCJyZWNvcmQiLCJQdXRSZXF1ZXN0IiwiSXRlbSIsIm1hcnNoYWxsIiwiYnVsa1JlcXVlc3RzIiwiYmF0Y2hXcml0ZUl0ZW0iLCJSZXF1ZXN0SXRlbXMiLCJzcGxpY2UiLCJjb25zb2xlIiwibG9nIiwidW5wcm9jZXNzZWRSZWNvcmRzIiwiYWxsIiwicmVzdWx0RGF0dW0iLCJVbnByb2Nlc3NlZEl0ZW1zIiwidW5wcm9jZXNzZWRSZWMiLCJvdXRwdXQiLCJjdXJyZW50QXJyYXkiLCJjb25jYXQiLCJnZXRBdHRyVHlwZSIsImlzU3RyaW5nIiwiaXNOdW1iZXIiLCJwYXJzZUF0dHJpYnV0ZXMiLCJhdHRyaWJ1dGVzIiwicmVzIiwidHlwZSIsIkRhdGFUeXBlIiwiU3RyaW5nVmFsdWUiLCJ0b3BpY0FybiIsInNucyIsIlNOUyIsIk1lc3NhZ2UiLCJUb3BpY0FybiIsIk1lc3NhZ2VBdHRyaWJ1dGVzIiwicHVibGlzaCIsInBhcnNlTXNnIiwibXNnQiIsIkJvZHkiLCJtc2dBdHRyaWJzIiwiZTEiLCJhdHRyaWJzIiwiVHlwZSIsIlZhbHVlIiwibXNnQm9keSIsInJjcHRIYW5kbGUiLCJSZWNlaXB0SGFuZGxlIiwiZ2V0TXNnc0Zyb21RdWV1ZSIsInJlZ2lvbiIsIm1zZ0NvdW50VG9GZXRjaCIsIlF1ZXVlVXJsIiwic3FzIiwiU1FTIiwibWVzc2FnZXMiLCJwcm9tcyIsIm1zZ3NUb0ZldGNoIiwibXNnc1RvRmV0Y2hUaGlzSXRlciIsInJlY2VpdmVNZXNzYWdlIiwiTWF4TnVtYmVyT2ZNZXNzYWdlcyIsIlZpc2liaWxpdHlUaW1lb3V0IiwiZm9yRWFjaCIsIk1lc3NhZ2VzIiwiZ2V0Q3VycmVudEFjY291bnREYXRhIiwiYWNjb3VudElkIiwiRXhwcmVzc2lvbkF0dHJpYnV0ZU5hbWVzIiwiS2V5Q29uZGl0aW9uRXhwcmVzc2lvbiIsIlMiLCJnZXRDdXJyZW50VXNlckRhdGEiLCJ1c2VySWQiLCJwcm9jZXNzTWVzc2FnZSIsImFjY291bnQiLCJtc2dIYW5kbGVyIiwiZGJDb25maWciLCJzZXJ2aWNlQWNjb3VudERhdGEiLCJjb250ZXh0IiwidXNlciIsImFjY0RhdGEiLCJ2ZW5kb3JEYXRhIiwic2hhcmVkTWljcm9BcHBsaWNhdGlvbkFjY291bnREYXRhIiwic2VydmljZVVzZXJEYXRhIiwidXNlckRhdGEiLCJzaGFyZWRNaWNyb0FwcGxpY2F0aW9uVXNlckRhdGEiLCJwcm9jUmVzIiwic2VydmljZUNvbmZpZ0RhdGEiLCJjb25maWdkYXRhIiwiY3VyckFjY0RhdGEiLCJzaGFyZWRWZW5kb3JEYXRhIiwiY3VyclVzZXJEYXRhIiwiY3JtRGF0YSIsInBheWxvYWQiLCJtZXRhZGF0YSIsImV2ZW50VHlwZSIsImRhdGVDcmVhdGVkIiwiRGF0ZSIsIm5vdyIsIm9wZXJhdGlvblR5cGUiLCJpbnZvY2F0aW9uU291cmNlIiwiZXZlbnRJZCIsImVtaXR0ZXIiLCJpbnB1dFBheWxvYWQiLCJwcm9jUmVzdWx0IiwiZXh0cmFTdGF0dXMiLCJnZXRDb21wbGV0ZVN0YXR1cyIsImRlbGV0ZU1lc3NhZ2UiLCJkZWxldGVNc2ciLCJxVXJsIiwibXNnIiwic2VuZE1lc3NhZ2UiLCJNZXNzYWdlQm9keSIsImZhaWxlZEluIiwiZ2V0QXZhaWxhYmxlQ2FsbHNUaGlzU2VjIiwidGhyb3R0bGVMbXRzIiwic2FmZVRocm90dGxlTGltaXQiLCJyZXNlcnZlQ2FwRm9yRGlyZWN0IiwicmV0cnlDbnRGb3JDYXBhY2l0eSIsInNlcnZpY2VOYW1lIiwiYnVsayIsIml0ZXIiLCJ0aHJvdExtdHMiLCJkYXkiLCJob3VyIiwibWludXRlIiwic2Vjb25kIiwicmVzRmFjdCIsImNhbGxzTWFkZSIsImN1cnJNcyIsImN1cnJTZWMiLCJNYXRoIiwiZmxvb3IiLCJjdXJyTWluIiwiY3VyckhyIiwiY3VyckRheSIsInF1ZXJ5T2JqIiwiTiIsInByb21SZXMiLCJjYWxsQ291bnQiLCJnZXRDYWxsc01hZGUiLCJhdmFpbExtdCIsImluY3JlbWVudFVzZWRDb3VudCIsInNlcnZpY2VBbmREdXJhdGlvbiIsImV4cGlyeVRpbWUiLCJmZXRjaEhhbmRsZXIiLCJhIiwiYiIsImgiLCJldmVudCIsIm1IbmRsciIsInByZVdvcmtlckhvb2siLCJSZWNvcmRzIiwiYXZhaWxDYXAiLCJhcHByb3ZlZE1lc3NhZ2VzIiwiYnVsa0ZldGNoSGFuZGxlciIsIm1lc3NhZ2VzVG9Qcm9jZXNzIiwiZGlyZWN0VHJhbnNpdGlvbkhhbmRsZXIiLCJidWxrVHJhbnNpdGlvbkhhbmRsZXIiLCJ3ZWJob29rSGFuZGxlciIsInNldHVwRGF0YWJhc2UiLCJkYXRhIiwiaHR0cFJlcUhhbmRsZXIiLCJlbnRpdHlJZCIsImV2ZW50TXNnIiwiZXZlbnRCb2R5IiwiZXZlbnRQYXRoUGFyYW1zIiwicGF0aFBhcmFtZXRlcnMiLCJldmVudFF1ZXJ5U3RyaW5nUGFyYW1zIiwicXVlcnlTdHJpbmdQYXJhbWV0ZXJzIiwib3BlcmF0aW9uIiwiZW50aXR5Il0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sS0FRdkRyQixFQUFvQnNCLEVBQUksU0FBU0QsRUFBT0UsR0FFdkMsR0FEVSxFQUFQQSxJQUFVRixFQUFRckIsRUFBb0JxQixJQUMvQixFQUFQRSxFQUFVLE9BQU9GLEVBQ3BCLEdBQVcsRUFBUEUsR0FBOEIsaUJBQVZGLEdBQXNCQSxHQUFTQSxFQUFNRyxXQUFZLE9BQU9ILEVBQ2hGLElBQUlJLEVBQUtYLE9BQU9ZLE9BQU8sTUFHdkIs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LFFBQVMsSUFDSnlFLEtBQ0FELEtBQ0FHLEdBRUwxRixRQUFTLEtBQ1RnQixTQUFVLENBQ1JDLFVBQVd1RSxFQUFnQnZFLFlBRy9CLENBQ0VqTCxPQUFRLFVBQ1I0UCxVQUF5QyxVQUE5QkosRUFBZ0JJLFVBQXdCLElBQU0sSUFDekRDLE9BQVEsVUFDUlIsV0FDQTlELFFBQVMsSUFDVEMsUUFBUzlKLEVBQ1R1SixVQUFXdUUsRUFBZ0JJLFlBSXhCLENBQ0xwUCxXQUFZLElBQ1pDLFFBQVMsQ0FDUCw4QkFBK0IsSUFDL0Isb0NBQW9DLEdBRXRDQyxLQUFNNUIsS0FBSzZCLFVBQVUsQ0FDbkJYLE9BQVEsaURBQ1JGLE1BQU95TyxLQUdYLE1BQU8xTixHQUVQLE9BREFtRixRQUFRQyxJQUFJLHVCQUF1Qix5QkFBZXBGLElBQzNDLENBQ0xMLFdBQVksSUFDWkMsUUFBUyxDQUNQLDhCQUErQixJQUMvQixvQ0FBb0MsR0FFdENDLEtBQU01QixLQUFLNkIsVUFBVSxDQUNuQlgsT0FBUSwrREFBK0RtTCxLQUFLQywrQ0FDNUV0TCxNQUFPeU8sT1AySjZDLENBQUloTCxFQUFLN0YsRUFBR2lCLEVBQUd5UCxFQUFHQyxFQUFHcFIiLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMik7XG4iLCIvKipcbiAqIEBkZXNjcmlwdGlvbiBBdHRlbXB0IHRvIEpTT04ucGFyc2UgaW5wdXQgdmFsdWUuIElmIHBhcnNlIGZhaWxzLCByZXR1cm4gb3JpZ2luYWwgdmFsdWUuXG4gKiBAcGFyYW0ge2FueX0gdlxuICogQHJldHVybnMge2FueX1cbiAqL1xuZXhwb3J0IGNvbnN0IHBhcnNlSnNvbiA9ICh2KSA9PiB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2Uodik7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJldHVybiB2O1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgZGVlcFBhcnNlSnNvbiA9IChqc29uU3RyaW5nKSA9PiB7XG4gIGlmICh0eXBlb2YganNvblN0cmluZyA9PT0gJ3N0cmluZycpIHtcbiAgICBpZiAoIWlzTmFOKE51bWJlcihqc29uU3RyaW5nKSkpIHtcbiAgICAgIHJldHVybiBqc29uU3RyaW5nO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGRlZXBQYXJzZUpzb24oSlNPTi5wYXJzZShqc29uU3RyaW5nKSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICByZXR1cm4ganNvblN0cmluZztcbiAgICB9XG4gIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShqc29uU3RyaW5nKSkge1xuICAgIHJldHVybiBqc29uU3RyaW5nLm1hcCgodmFsKSA9PiBkZWVwUGFyc2VKc29uKHZhbCkpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBqc29uU3RyaW5nID09PSAnb2JqZWN0JyAmJiBqc29uU3RyaW5nICE9PSBudWxsKSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKGpzb25TdHJpbmcpLnJlZHVjZSgob2JqLCBrZXkpID0+IHtcbiAgICAgIG9ialtrZXldID0gZGVlcFBhcnNlSnNvbihqc29uU3RyaW5nW2tleV0pO1xuICAgICAgcmV0dXJuIG9iajtcbiAgICB9LCB7fSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGpzb25TdHJpbmc7XG4gIH1cbn07XG5cbi8qKlxuICogUmV0dXJucyB0aGUgc3RyaW5nIGVxdWl2YWxlbnQgbWVhbmluZyBmb3IgZ2l2ZW4gSFRUUCBzdGF0dXMgY29kZVxuICogQHBhcmFtIHtOdW1iZXJ9IGNvZGVcbiAqL1xuY29uc3QgZ2V0Q29kZVN0YXR1cyA9IChjb2RlKSA9PiB7XG4gIHN3aXRjaCAoY29kZSkge1xuICAgIGNhc2UgMjAwOlxuICAgICAgcmV0dXJuICdPSyc7XG4gICAgY2FzZSAyMDE6XG4gICAgICByZXR1cm4gJ0NyZWF0ZWQnO1xuICAgIGNhc2UgNDAwOlxuICAgICAgcmV0dXJuICdCYWQgUmVxdWVzdCc7XG4gICAgY2FzZSA1MDA6XG4gICAgICByZXR1cm4gJ0ludGVybmFsIFNlcnZlciBFcnJvcic7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbn07XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gTGFtYmRhUHJveHlJbnRlZ3JhdGlvblJlc3BvbnNlXG4gKiBAcHJvcGVydHkge251bWJlcn0gc3RhdHVzQ29kZVxuICogQHByb3BlcnR5IHtzdHJpbmd9IGJvZHlcbiAqL1xuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiBGb3JtYXQgSFRUUCBsYW1iZGEncyBpbnB1dCwgcmVzdWx0LCBhbmQgcmVzcG9uc2UgY29kZSB0byBiZSBjb21saWFudCB3aXRoIExhbWJkYSBwcm94eSBpbnRlZ3JhdGlvblxuICogQHBhcmFtIHtudW1iZXJ9IGNvZGVcbiAqIEBwYXJhbSB7Kn0gaW5wdXRcbiAqIEBwYXJhbSB7Kn0gcmVzdWx0XG4gKiBAcmV0dXJucyB7TGFtYmRhUHJveHlJbnRlZ3JhdGlvblJlc3BvbnNlfVxuICovXG5leHBvcnQgY29uc3QgZm9ybWF0SHR0cFJlc3BvbnNlID0gKGNvZGUsIGlucHV0LCByZXN1bHQpID0+IHtcbiAgY29uc3Qgc3RhdHVzID0gZ2V0Q29kZVN0YXR1cyhjb2RlKTtcbiAgY29uc3QgcmVzcCA9IGBIVFRQIFJlc3A6ICR7Y29kZX0ke3N0YXR1cyA/IGAgLSAke3N0YXR1c31gIDogJyd9YDtcbiAgbGV0IHJlc3VsdE9iaiA9IHt9O1xuICBpZiAocmVzdWx0IGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICByZXN1bHRPYmouZXJyb3IgPSByZXN1bHQudG9TdHJpbmcoKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgcmVzdWx0ID09PSAnb2JqZWN0Jykge1xuICAgIHJlc3VsdE9iaiA9IHJlc3VsdDtcbiAgfSBlbHNlIHtcbiAgICByZXN1bHRPYmoubWVzc2FnZSA9IHJlc3VsdDtcbiAgfVxuICByZXR1cm4ge1xuICAgIHN0YXR1c0NvZGU6IGNvZGUsXG4gICAgaGVhZGVyczoge1xuICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbic6ICcqJyxcbiAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1DcmVkZW50aWFscyc6IHRydWUsXG4gICAgfSxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICByZXNwLFxuICAgICAgaW5wdXQsXG4gICAgICByZXN1bHRPYmosXG4gICAgfSksXG4gIH07XG59O1xuXG4vKipcbiAqIFJldHVybnMgdGhlIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBhIGdpdmVuIG9iamVjdCwgZXJyb3Igb3Igc3RyaW5nXG4gKiBAcGFyYW0ge09iamVjdC8gU3RyaW5nLyBFcnJvcn0gZVxuICogQHJldHVybnMge1N0cmluZ31cbiAqL1xuZXhwb3J0IGNvbnN0IGdldEVycm9yU3RyaW5nID0gKGUpID0+IHtcbiAgaWYgKGUgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgIHJldHVybiBlLnRvU3RyaW5nKCk7XG4gIH1cbiAgaWYgKHR5cGVvZiBlID09PSAnb2JqZWN0Jykge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShlLCBudWxsLCA0KTtcbiAgfVxuICByZXR1cm4gZTtcbn07XG5cbi8qKlxuICogVGhpcyBpcyBhIGhpZ2hlciBvcmRlciBmdW5jdGlvbiB0byBleGVjdXRlIHRoZSBnaXZlbiBtZXNzYWdlSGFuZGxlciwgY2F0Y2hcbiAqIGVycm9ycyBhbmQgcmV0dXJuIGEgcHJvcGVyIHJlc3BvbnNlXG4gKiBAcGFyYW0ge2FueX0gcGFyYW1zXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBtZXNzYWdlSGFuZGxlclxuICogQHJldHVybnMge09iamVjdH1cbiAqL1xuZXhwb3J0IGNvbnN0IG5ldmVyVGhyb3dFcnJvciA9IGFzeW5jIChwYXJhbXMsIG1lc3NhZ2VIYW5kbGVyKSA9PiB7XG4gIGNvbnN0IHJlc3VsdCA9IHtcbiAgICBzdGF0dXM6ICdwYXNzJyxcbiAgICBwYXJhbXMsXG4gIH07XG4gIHRyeSB7XG4gICAgcmVzdWx0LndvcmtlclJlc3AgPSBhd2FpdCBtZXNzYWdlSGFuZGxlcihwYXJhbXMpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmVzdWx0LnN0YXR1cyA9ICdmYWlsJztcbiAgICByZXN1bHQuZXJyb3IgPSBnZXRFcnJvclN0cmluZyhlKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufTtcblxuLyoqXG4gKiBDbGFzc2lzIHNsZWVwIGZ1bmN0aW9uIHVzaW5nIGFzeW5jLWF3YWl0XG4gKiBAcGFyYW0ge051bWJlcn0gcyBpcyB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byBzbGVlcFxuICovXG5leHBvcnQgY29uc3Qgc2xlZXAgPSBhc3luYyAocykgPT5cbiAgbmV3IFByb21pc2UoKHIpID0+XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICByKCk7XG4gICAgfSwgcyksXG4gICk7XG5cbi8qKlxuICogQ2hlY2tzIGlmIHRoZSBnaXZlbiBwYXJhbSBleGlzdHMgaW4gdGhlIGdpdmVuIG9iamVjdFxuICogQHBhcmFtIHtvYmplY3R9IG9iaiBpcyB0aGUgb2JqZWN0IHRvIGNoZWNrIGlmIHRoZSBnaXZlbiBwYXJhbSBleGlzdHMgaW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXJhbSBpcyB0aGUgcGFyYW0gdG8gY2hlY2sgaWYgaXQgZXhpc3RzIGluIHRoZSBnaXZlbiBvYmpcbiAqIEByZXR1cm5zIHtCb29sZWFufVxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbWF4LWxlblxuZXhwb3J0IGNvbnN0IGl0ZW1FeGlzdHMgPSAob2JqLCBwYXJhbSkgPT5cbiAgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiYgb2JqICE9PSBudWxsID8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcGFyYW0pIDogZmFsc2U7XG5cbi8qKlxuICogQ2hlY2tzIHRvIHNlZSBpZiB0aGVyZSBpcyBhIHNoYXJlZE1pY3JvQXBwbGljYXRpb24gZGF0YSBzdG9yZSBhdmFpbGFibGUgZm9yIHRoZSBBY2NvdW50IG9yIFVzZXIgb2JqZWN0c1xuICogQHBhcmFtIHsqfSBzaGFyZWRNaWNyb0FwcGxpY2F0aW9uRGF0YSB0aGUgb2JqZWN0IGFzIGlzLCBmcm9tIHRoZSBBY2NvdW50IG9yIFVzZXIgZW50aXRpZXNcbiAqIC0tIHZhbHVlIGVhY2ggaW5kaXZpZHVhbCBtaWNyb0FwcGxpY2F0aW9uIGRhdGEgc3RvcmVcbiAqIEBwYXJhbSB7Kn0gc2VydmljZSB0aGUgc2VydmljZSBuYW1lIChzZXJ2ZXJsZXNzIG5hbWUpIG9mIHRoZSBjdXJyZW50IHByb2Nlc3Npbmcgc2VydmljZVxuICogQHJldHVybnMgdGhlIGRlc3RydWN0dXJlZCBzaGFyZWRNaWNyb0FwcGxpY2F0aW9uRGF0YVxuICogQGFic3RyYWN0IHRoZSBcIm1pY3JvQXBwbGljYXRpb25zVG9TaGFyZVdpdGhcIiBhcnJheSBpcyBhIHJlcXVpcmVkIGluIG9yZGVyIHRvIHNoYXJlIHRoaXMgZGF0YSBzZXQgd2l0aCBvdGhlciBNaWNybyBBcHBsaWNhdGlvbnMuXG4gKiBJZiB0aGlzIGZpZWxkIGlzIG9taXR0ZWQgdGhpcyBmdW5jdGlvbiBhc3N1bWVzIHRoZSB2YWx1ZSBpcyBtZWFudCB0byBiZSBwcml2YXRlLlxuICogSWYgdGhlIGFycmF5IGRvZXMgZXhpc3QgYW5kIHRoZXJlIGlzIGEgXCIqXCIgaW4gdGhlIGFycmF5LCB0aGVuIHRoZSB2YWx1ZSBzaG91bGQgYmUgc2hhcmVkIHdpdGggYWxsIG90aGVyIG1pY3JvIGFwcGxpY2F0aW9uc1xuICovXG5leHBvcnQgY29uc3QgZXZhbHVhdGVTaGFyZWRNaWNyb0FwcGxpY2F0aW9uRGF0YSA9IChzaGFyZWRNaWNyb0FwcGxpY2F0aW9uRGF0YSwgc2VydmljZSkgPT4ge1xuICBjb25zdCByZWFkYWJsZVNoYXJlZE1pY3JvQXBwbGljYXRpb25EYXRhID0ge307XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHNoYXJlZE1pY3JvQXBwbGljYXRpb25EYXRhKSkge1xuICAgIGlmIChcbiAgICAgIHZhbHVlLm1pY3JvQXBwbGljYXRpb25zVG9TaGFyZVdpdGggJiZcbiAgICAgICh2YWx1ZS5zZXJ2aWNlc1RvU2hhcmVXaXRoLmluY2x1ZGVzKHNlcnZpY2UpIHx8IHZhbHVlLnNlcnZpY2VzVG9TaGFyZVdpdGguaW5jbHVkZXMoJyonKSlcbiAgICApIHtcbiAgICAgIHJlYWRhYmxlU2hhcmVkTWljcm9BcHBsaWNhdGlvbkRhdGFba2V5XSA9IHZhbHVlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZWFkYWJsZVNoYXJlZE1pY3JvQXBwbGljYXRpb25EYXRhO1xufTtcbiIsIi8vIFVuaXF1ZSBJRCBjcmVhdGlvbiByZXF1aXJlcyBhIGhpZ2ggcXVhbGl0eSByYW5kb20gIyBnZW5lcmF0b3IuIEluIHRoZSBicm93c2VyIHdlIHRoZXJlZm9yZVxuLy8gcmVxdWlyZSB0aGUgY3J5cHRvIEFQSSBhbmQgZG8gbm90IHN1cHBvcnQgYnVpbHQtaW4gZmFsbGJhY2sgdG8gbG93ZXIgcXVhbGl0eSByYW5kb20gbnVtYmVyXG4vLyBnZW5lcmF0b3JzIChsaWtlIE1hdGgucmFuZG9tKCkpLlxudmFyIGdldFJhbmRvbVZhbHVlcztcbnZhciBybmRzOCA9IG5ldyBVaW50OEFycmF5KDE2KTtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJuZygpIHtcbiAgLy8gbGF6eSBsb2FkIHNvIHRoYXQgZW52aXJvbm1lbnRzIHRoYXQgbmVlZCB0byBwb2x5ZmlsbCBoYXZlIGEgY2hhbmNlIHRvIGRvIHNvXG4gIGlmICghZ2V0UmFuZG9tVmFsdWVzKSB7XG4gICAgLy8gZ2V0UmFuZG9tVmFsdWVzIG5lZWRzIHRvIGJlIGludm9rZWQgaW4gYSBjb250ZXh0IHdoZXJlIFwidGhpc1wiIGlzIGEgQ3J5cHRvIGltcGxlbWVudGF0aW9uLiBBbHNvLFxuICAgIC8vIGZpbmQgdGhlIGNvbXBsZXRlIGltcGxlbWVudGF0aW9uIG9mIGNyeXB0byAobXNDcnlwdG8pIG9uIElFMTEuXG4gICAgZ2V0UmFuZG9tVmFsdWVzID0gdHlwZW9mIGNyeXB0byAhPT0gJ3VuZGVmaW5lZCcgJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcyAmJiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQoY3J5cHRvKSB8fCB0eXBlb2YgbXNDcnlwdG8gIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBtc0NyeXB0by5nZXRSYW5kb21WYWx1ZXMgPT09ICdmdW5jdGlvbicgJiYgbXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQobXNDcnlwdG8pO1xuXG4gICAgaWYgKCFnZXRSYW5kb21WYWx1ZXMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignY3J5cHRvLmdldFJhbmRvbVZhbHVlcygpIG5vdCBzdXBwb3J0ZWQuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdXVpZGpzL3V1aWQjZ2V0cmFuZG9tdmFsdWVzLW5vdC1zdXBwb3J0ZWQnKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZ2V0UmFuZG9tVmFsdWVzKHJuZHM4KTtcbn0iLCJleHBvcnQgZGVmYXVsdCAvXig/OlswLTlhLWZdezh9LVswLTlhLWZdezR9LVsxLTVdWzAtOWEtZl17M30tWzg5YWJdWzAtOWEtZl17M30tWzAtOWEtZl17MTJ9fDAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCkkL2k7IiwiaW1wb3J0IHZhbGlkYXRlIGZyb20gJy4vdmFsaWRhdGUuanMnO1xuLyoqXG4gKiBDb252ZXJ0IGFycmF5IG9mIDE2IGJ5dGUgdmFsdWVzIHRvIFVVSUQgc3RyaW5nIGZvcm1hdCBvZiB0aGUgZm9ybTpcbiAqIFhYWFhYWFhYLVhYWFgtWFhYWC1YWFhYLVhYWFhYWFhYWFhYWFxuICovXG5cbnZhciBieXRlVG9IZXggPSBbXTtcblxuZm9yICh2YXIgaSA9IDA7IGkgPCAyNTY7ICsraSkge1xuICBieXRlVG9IZXgucHVzaCgoaSArIDB4MTAwKS50b1N0cmluZygxNikuc3Vic3RyKDEpKTtcbn1cblxuZnVuY3Rpb24gc3RyaW5naWZ5KGFycikge1xuICB2YXIgb2Zmc2V0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAwO1xuICAvLyBOb3RlOiBCZSBjYXJlZnVsIGVkaXRpbmcgdGhpcyBjb2RlISAgSXQncyBiZWVuIHR1bmVkIGZvciBwZXJmb3JtYW5jZVxuICAvLyBhbmQgd29ya3MgaW4gd2F5cyB5b3UgbWF5IG5vdCBleHBlY3QuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdXVpZGpzL3V1aWQvcHVsbC80MzRcbiAgdmFyIHV1aWQgPSAoYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAwXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDFdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMl1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAzXV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDRdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgNV1dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA2XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDddXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgOF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA5XV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEwXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDExXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEyXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEzXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDE0XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDE1XV0pLnRvTG93ZXJDYXNlKCk7IC8vIENvbnNpc3RlbmN5IGNoZWNrIGZvciB2YWxpZCBVVUlELiAgSWYgdGhpcyB0aHJvd3MsIGl0J3MgbGlrZWx5IGR1ZSB0byBvbmVcbiAgLy8gb2YgdGhlIGZvbGxvd2luZzpcbiAgLy8gLSBPbmUgb3IgbW9yZSBpbnB1dCBhcnJheSB2YWx1ZXMgZG9uJ3QgbWFwIHRvIGEgaGV4IG9jdGV0IChsZWFkaW5nIHRvXG4gIC8vIFwidW5kZWZpbmVkXCIgaW4gdGhlIHV1aWQpXG4gIC8vIC0gSW52YWxpZCBpbnB1dCB2YWx1ZXMgZm9yIHRoZSBSRkMgYHZlcnNpb25gIG9yIGB2YXJpYW50YCBmaWVsZHNcblxuICBpZiAoIXZhbGlkYXRlKHV1aWQpKSB7XG4gICAgdGhyb3cgVHlwZUVycm9yKCdTdHJpbmdpZmllZCBVVUlEIGlzIGludmFsaWQnKTtcbiAgfVxuXG4gIHJldHVybiB1dWlkO1xufVxuXG5leHBvcnQgZGVmYXVsdCBzdHJpbmdpZnk7IiwiaW1wb3J0IFJFR0VYIGZyb20gJy4vcmVnZXguanMnO1xuXG5mdW5jdGlvbiB2YWxpZGF0ZSh1dWlkKSB7XG4gIHJldHVybiB0eXBlb2YgdXVpZCA9PT0gJ3N0cmluZycgJiYgUkVHRVgudGVzdCh1dWlkKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgdmFsaWRhdGU7IiwiaW1wb3J0IHJuZyBmcm9tICcuL3JuZy5qcyc7XG5pbXBvcnQgc3RyaW5naWZ5IGZyb20gJy4vc3RyaW5naWZ5LmpzJztcblxuZnVuY3Rpb24gdjQob3B0aW9ucywgYnVmLCBvZmZzZXQpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHZhciBybmRzID0gb3B0aW9ucy5yYW5kb20gfHwgKG9wdGlvbnMucm5nIHx8IHJuZykoKTsgLy8gUGVyIDQuNCwgc2V0IGJpdHMgZm9yIHZlcnNpb24gYW5kIGBjbG9ja19zZXFfaGlfYW5kX3Jlc2VydmVkYFxuXG4gIHJuZHNbNl0gPSBybmRzWzZdICYgMHgwZiB8IDB4NDA7XG4gIHJuZHNbOF0gPSBybmRzWzhdICYgMHgzZiB8IDB4ODA7IC8vIENvcHkgYnl0ZXMgdG8gYnVmZmVyLCBpZiBwcm92aWRlZFxuXG4gIGlmIChidWYpIHtcbiAgICBvZmZzZXQgPSBvZmZzZXQgfHwgMDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTY7ICsraSkge1xuICAgICAgYnVmW29mZnNldCArIGldID0gcm5kc1tpXTtcbiAgICB9XG5cbiAgICByZXR1cm4gYnVmO1xuICB9XG5cbiAgcmV0dXJuIHN0cmluZ2lmeShybmRzKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgdjQ7IiwiaW1wb3J0IHsgc2xlZXAsIGl0ZW1FeGlzdHMgfSBmcm9tICcuL3V0aWwnO1xuXG4vLyBTYWZldHkgbGltaXQgZm9yIGJ1bGsgaW5zZXJ0aW9ucyBpbnRvIER5bmFtb0RiXG5jb25zdCBiYXRjaFdyaXRlUmVjb3Jkc0xpbWl0ID0gMjU7XG5cbi8vIEZhbGxiYWNrIHNhZmV0eSBsaW1pdCBmb3IgYnVsayBxdWVyaWVzIGZyb20gRHluYW1vRGJcbmNvbnN0IGR5bmFtb0RiUXVlcnlTYWZlQmF0Y2hMaW1pdCA9IDEwMDA7XG5cbi8qKlxuICogR2V0cyByZWNvcmRzIGZvciBnaXZlbiBxdWVyeSBvYmplY3QuXG4gKiBJZiB0aGVyZSBpcyBubyBsaW1pdCBzZXQgb24gdGhlIG51bWJlciBvZiByZWNvcmRzLCBpdCB1c2VzIHRoZSBidWlsdC1pbiBzYWZldHkgbGltaXQuXG4gKiBBbGwgcmVjb3JkcyByZXR1cm5lZCBhcmUgc2ltcGxlIEphdmFzY3JpcHQgT2JqZWN0cyB3aXRoIEtleS1WYWx1ZSBwYWlycyAoZG9pbmcgYXdheSB3aXRoXG4gKiBEeW5hbW9EYiBzdHlsZSBvZiBkZWZpbmluZyB2YWx1ZXMgZm9yIHByb3BlcnRpZXMgYWxvbmcgd2l0aCBkYXRhIHR5cGUgLSB1bm1hcnNoYWxsaW5nKVxuICogQHBhcmFtIHtvYmplY3R9IEFXUyBpcyB0aGUgQVdTIHNkayBpbnN0YW5jZSB0aGF0IG5lZWRzIHRvIGJlIHBhc3NlZCBmcm9tIHRoZSBoYW5kbGVyXG4gKiBAcGFyYW0ge09iamVjdH0gcXVlcnlPYmplY3RcbiAqIEByZXR1cm5zIHtbe1N0cmluZzogKn1dfVxuICovXG5leHBvcnQgY29uc3QgZmV0Y2hSZWNvcmRzQnlRdWVyeSA9IGFzeW5jIChBV1MsIHF1ZXJ5T2JqZWN0LCBwYWdpbmF0ZSA9IGZhbHNlKSA9PiB7XG4gIGNvbnN0IGR5bmFtb2RiID0gbmV3IEFXUy5EeW5hbW9EQih7IGFwaVZlcnNpb246ICcyMDEyLTA4LTEwJyB9KTtcbiAgLy8gQWRkIHNhZmUgZmV0Y2ggbGltaXQgaWYgb25lIGlzIG5vdCBzZXRcbiAgaWYgKCFpdGVtRXhpc3RzKHF1ZXJ5T2JqZWN0LCAnTGltaXQnKSkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgIHF1ZXJ5T2JqZWN0LkxpbWl0ID0gZHluYW1vRGJRdWVyeVNhZmVCYXRjaExpbWl0O1xuICB9XG4gIHRyeSB7XG4gICAgY29uc3QgcVJlc3VsdCA9IGF3YWl0IGR5bmFtb2RiLnF1ZXJ5KHF1ZXJ5T2JqZWN0KS5wcm9taXNlKCk7XG4gICAgaWYgKHBhZ2luYXRlID09PSB0cnVlKSB7XG4gICAgICBpZiAoIWl0ZW1FeGlzdHMocVJlc3VsdCwgJ0l0ZW1zJykgfHwgcVJlc3VsdC5JdGVtcy5sZW5ndGggPCAxKSB7XG4gICAgICAgIHJldHVybiB7IGl0ZW1zOiBbXSwgRXhjbHVzaXZlU3RhcnRLZXk6IHVuZGVmaW5lZCB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaXRlbXM6IHFSZXN1bHQuSXRlbXMubWFwKChpdCkgPT4gQVdTLkR5bmFtb0RCLkNvbnZlcnRlci51bm1hcnNoYWxsKGl0KSksXG4gICAgICAgIEV4Y2x1c2l2ZVN0YXJ0S2V5OiBpdGVtRXhpc3RzKHFSZXN1bHQsICdMYXN0RXZhbHVhdGVkS2V5JykgPyBxUmVzdWx0Lkxhc3RFdmFsdWF0ZWRLZXkgOiB1bmRlZmluZWQsXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAoIWl0ZW1FeGlzdHMocVJlc3VsdCwgJ0l0ZW1zJykgfHwgcVJlc3VsdC5JdGVtcy5sZW5ndGggPCAxKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIC8vIENvbnZlcnQgRHluYW1vRGIgc3RseWUgb2JqZWN0cyB0byBzaW1wbGUgSmF2YXNjcmlwdCBvYmplY3RzXG4gICAgcmV0dXJuIHFSZXN1bHQuSXRlbXMubWFwKChpdGVtKSA9PiBBV1MuRHluYW1vREIuQ29udmVydGVyLnVubWFyc2hhbGwoaXRlbSkpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICB0aHJvdyBlcnI7XG4gIH1cbn07XG5cbi8qKlxuICogSW5jcmVtZW50IHRoZSB2YWx1ZSBpbiB0aGUgZ2l2ZW4gY29sdW1uIGJ5IHRoZSBnaXZlbiB2YWx1ZVxuICogQHBhcmFtIHtvYmplY3R9IEFXUyBpcyB0aGUgQVdTIHNkayBpbnN0YW5jZSB0aGF0IG5lZWRzIHRvIGJlIHBhc3NlZCBmcm9tIHRoZSBoYW5kbGVyXG4gKiBAcGFyYW0ge1N0cmluZ30gdE5hbWUgaXMgdGhlIHRhYmxlIG5hbWVcbiAqIEBwYXJhbSB7T2JqZWN0fSBzcmNoUGFyYW1zIGFyZSB0aGUgc2VhcmNoIHBhcmFtcyBmb3IgdGhlIHJlY29yZFxuICogQHBhcmFtIHtTdHJpbmd9IGNvbE5hbWUgY29sdW1uIG5hbWUgdG8gaW5jcmVtZW50XG4gKiBAcGFyYW0ge051bWJlcn0gaW5jVmFsIHZhbHVlIHRvIGluY3JlbWVudCBieVxuICogQHJldHVybnMge0Jvb2xlYW59XG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBhcnJvdy1ib2R5LXN0eWxlXG5leHBvcnQgY29uc3QgaW5jcmVtZW50Q29sdW1uID0gYXN5bmMgKEFXUywgdE5hbWUsIHNyY2hQYXJhbXMsIGNvbE5hbWUsIGluY1ZhbCkgPT4ge1xuICBjb25zdCBkb2NDbGllbnQgPSBuZXcgQVdTLkR5bmFtb0RCLkRvY3VtZW50Q2xpZW50KCk7XG4gIGNvbnN0IG9iaiA9IHtcbiAgICBUYWJsZU5hbWU6IHROYW1lLFxuICAgIEtleTogc3JjaFBhcmFtcyxcbiAgICBVcGRhdGVFeHByZXNzaW9uOiBgQUREICR7Y29sTmFtZX0gOnZhbGAsXG4gICAgRXhwcmVzc2lvbkF0dHJpYnV0ZVZhbHVlczoge1xuICAgICAgJzp2YWwnOiBpbmNWYWwsXG4gICAgfSxcbiAgfTtcbiAgcmV0dXJuIGRvY0NsaWVudC51cGRhdGUob2JqKS5wcm9taXNlKCk7XG59O1xuXG4vKipcbiAqIEluc2VydHMvIFVwc2VydHMgZGF0YSBpbnRvIER5bmFtb0RiIHdpdGggZ2l2ZW4gcmVjb3JkcyB0byB0aGUgZ2l2ZW4gdGFibGVcbiAqIEBwYXJhbSB7b2JqZWN0fSBBV1MgaXMgdGhlIEFXUyBzZGsgaW5zdGFuY2UgdGhhdCBuZWVkcyB0byBiZSBwYXNzZWQgZnJvbSB0aGUgaGFuZGxlclxuICogQHBhcmFtIHtBcnJheX0gcmVjb3Jkc1xuICogQHBhcmFtIHtTdHJpbmd9IHROYW1lXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAqL1xuZXhwb3J0IGNvbnN0IGJhdGNoUHV0SW50b0R5bmFtb0RiID0gYXN5bmMgKEFXUywgcmVjcywgdE5hbWUsIGJhY2tvZmYgPSAxMDAwKSA9PiB7XG4gIGNvbnN0IGR5bmFtb2RiID0gbmV3IEFXUy5EeW5hbW9EQih7IGFwaVZlcnNpb246ICcyMDEyLTA4LTEwJyB9KTtcbiAgLy8gQ29udmVydCBhbGwgcmVjb3JkcyB0byBEeW5hbW9EYiBvYmplY3Qgc3RydWN0dXJlIGFuZCBhcHBlbmQgdGhlIHRvcCBsZXZlbFxuICAvLyBvYmplY3Qgc3RydWN0dXJlIGZvciBlYWNoIHJlY29yZCBpbnNlcnRpb25cbiAgY29uc3QgcHJlcGFyZWRSZWNvcmRzID0gcmVjcy5tYXAoKHJlY29yZCkgPT4gKHtcbiAgICBQdXRSZXF1ZXN0OiB7IEl0ZW06IEFXUy5EeW5hbW9EQi5Db252ZXJ0ZXIubWFyc2hhbGwocmVjb3JkKSB9LFxuICB9KSk7XG5cbiAgY29uc3QgYnVsa1JlcXVlc3RzID0gW107XG5cbiAgLy8gU3BsaXQgdGhlIHJlY29yZHMgaW50byBiYXRjaGVzIG9mIHRoZSBzYWZlIGJhdGNoIHJlcXVlc3QgbGVuZ3RoLCBpbnNlcnRcbiAgLy8gdGhlIHRvcCBsZXZlbCBvYmplY3QgZm9yIGluc2VydGlvbiBhbmQgc2VuZCB0aGUgc3BsaXQgYmF0Y2hlcyBmb3IgYmF0Y2hcbiAgLy8gd3JpdGUgaW50byBkYXRhYmFzZSBhbGwgYXQgdGhlIHNhbWUgdGltZSB1c2luZyBQcm9taXNlLmFsbFxuICB3aGlsZSAocHJlcGFyZWRSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICBidWxrUmVxdWVzdHMucHVzaChcbiAgICAgIGR5bmFtb2RiXG4gICAgICAgIC5iYXRjaFdyaXRlSXRlbSh7XG4gICAgICAgICAgUmVxdWVzdEl0ZW1zOiB7XG4gICAgICAgICAgICBbdE5hbWVdOiBwcmVwYXJlZFJlY29yZHMuc3BsaWNlKDAsIGJhdGNoV3JpdGVSZWNvcmRzTGltaXQpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pXG4gICAgICAgIC5wcm9taXNlKCksXG4gICAgKTtcbiAgfVxuXG4gIGNvbnNvbGUubG9nKFxuICAgIGBEWU5BTU9EQiBTRVJWSUNFOiBiYXRjaFB1dEludG9EeW5hbW9EYjogdG90YWxCdWxrUmVxdWVzdHNTZW50OiAke1xuICAgICAgYnVsa1JlcXVlc3RzLmxlbmd0aFxuICAgIH0gd2l0aCBlYWNoIHJlcXVlc3QgaGF2aW5nICR7YmF0Y2hXcml0ZVJlY29yZHNMaW1pdH0gcmVjb3JkcyBleGNlcHQgdGhlIGxhc3Qgb25lIGhhdmluZyAke1xuICAgICAgcmVjcy5sZW5ndGggLSBiYXRjaFdyaXRlUmVjb3Jkc0xpbWl0ICogKGJ1bGtSZXF1ZXN0cy5sZW5ndGggLSAxKVxuICAgIH0gcmVjb3Jkc2AsXG4gICk7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBQcm9taXNlLmFsbChidWxrUmVxdWVzdHMpO1xuICAgIGNvbnN0IHVucHJvY2Vzc2VkUmVjb3JkcyA9IHJlc3VsdFxuICAgICAgLm1hcCgocmVzdWx0RGF0dW0pID0+IHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGl0ZW1FeGlzdHMocmVzdWx0RGF0dW0sICdVbnByb2Nlc3NlZEl0ZW1zJykgJiZcbiAgICAgICAgICBpdGVtRXhpc3RzKHJlc3VsdERhdHVtLlVucHJvY2Vzc2VkSXRlbXMsIHROYW1lKSAmJlxuICAgICAgICAgIHJlc3VsdERhdHVtLlVucHJvY2Vzc2VkSXRlbXNbdE5hbWVdLmxlbmd0aCA+IDBcbiAgICAgICAgKSB7XG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1sZW5cbiAgICAgICAgICByZXR1cm4gcmVzdWx0RGF0dW0uVW5wcm9jZXNzZWRJdGVtc1t0TmFtZV0ubWFwKCh1bnByb2Nlc3NlZFJlYykgPT5cbiAgICAgICAgICAgIEFXUy5EeW5hbW9EQi5Db252ZXJ0ZXIudW5tYXJzaGFsbCh1bnByb2Nlc3NlZFJlYy5QdXRSZXF1ZXN0Lkl0ZW0pLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfSlcbiAgICAgIC5yZWR1Y2UoKG91dHB1dCwgY3VycmVudEFycmF5KSA9PiBvdXRwdXQuY29uY2F0KGN1cnJlbnRBcnJheSkpO1xuICAgIGlmICh1bnByb2Nlc3NlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgYXdhaXQgc2xlZXAoYmFja29mZik7XG4gICAgICByZXR1cm4gYmF0Y2hQdXRJbnRvRHluYW1vRGIoQVdTLCB1bnByb2Nlc3NlZFJlY29yZHMsIHROYW1lLCBiYWNrb2ZmICsgMTAwMCk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICB0aHJvdyBlcnI7XG4gIH1cbn07XG4iLCJpbXBvcnQgeyBwYXJzZUpzb24gfSBmcm9tICcuL3V0aWwnO1xuXG4vKipcbiAqIEB0eXBlZGVmIE1lc3NhZ2VBdHRyaWJ1dGVcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBEYXRhVHlwZVxuICogQHByb3BlcnR5IHtzdHJpbmd9IFN0cmluZ1ZhbHVlXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiBDb21wYW55RXZlbnRBdHRyaWJ1dGVzXG4gKiBAcHJvcGVydHkge01lc3NhZ2VBdHRyaWJ1dGU8c3RyaW5nPn0gZW1pdHRlclxuICogQHByb3BlcnR5IHtNZXNzYWdlQXR0cmlidXRlPHN0cmluZz59IGV2ZW50SWRcbiAqIEBwcm9wZXJ0eSB7TWVzc2FnZUF0dHJpYnV0ZTxzdHJpbmc+fSB0cmlnZ2VyRXZlbnRJZFxuICogQHByb3BlcnR5IHtNZXNzYWdlQXR0cmlidXRlPHN0cmluZz59IGVudGl0eVxuICogQHByb3BlcnR5IHtNZXNzYWdlQXR0cmlidXRlPHN0cmluZz59IGVudGl0eUlkXG4gKiBAcHJvcGVydHkge01lc3NhZ2VBdHRyaWJ1dGU8J0MnIHwgJ1InIHwgJ1UnIHwgJ0QnPn0gb3BlcmF0aW9uXG4gKiBAcHJvcGVydHkge01lc3NhZ2VBdHRyaWJ1dGU8J3RyaWdnZXInIHwgJ3Bhc3MnIHwgJ2ZhaWwnPn0gc3RhdHVzXG4gKi9cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgdGhlIGdpdmVuIHZhbHVlIGlzIGEgc3RyaW5nXG4gKiBAcGFyYW0geyp9IHZhbFxuICogQHJldHVybnMge0Jvb2xlYW59XG4gKi9cbmNvbnN0IGlzU3RyaW5nID0gKHZhbCkgPT4gdHlwZW9mIHZhbCA9PT0gJ3N0cmluZyc7XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIHRoZSBnaXZlbiB2YWx1ZSBpcyBhIG51bWJlclxuICogQHBhcmFtIHsqfSB2YWxcbiAqIEByZXR1cm5zIHtCb29sZWFufVxuICovXG5jb25zdCBpc051bWJlciA9ICh2YWwpID0+IHR5cGVvZiB2YWwgPT09ICdudW1iZXInO1xuXG4vKipcbiAqIERldGVybWluZSBpZiB0aGUgZ2l2ZW4gdmFsdWUgaXMgYW4gYXJyYXlcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAqL1xuY29uc3QgaXNBcnJheSA9ICh2YWwpID0+IEFycmF5LmlzQXJyYXkodmFsKTtcblxuLyoqXG4gKiBHZXQgdGhlIHR5cGUgb2YgdGhlIGdpdmVuIHZhbHVlXG4gKiBAcGFyYW0geyp9IHZhbFxuICogQHJldHVybnMge0Jvb2xlYW59XG4gKiBAdGhyb3dzIHtFcnJvcn1cbiAqL1xuY29uc3QgZ2V0QXR0clR5cGUgPSAodmFsKSA9PiB7XG4gIGlmIChpc1N0cmluZyh2YWwpKSByZXR1cm4gJ1N0cmluZyc7XG4gIGlmIChpc051bWJlcih2YWwpKSByZXR1cm4gJ051bWJlcic7XG4gIGlmIChpc0FycmF5KHZhbCkpIHJldHVybiAnU3RyaW5nLkFycmF5JztcbiAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIE1lc3NhZ2VBdHRyaWJ1dGUgdHlwZTogJHt0eXBlb2YgdmFsfSBmb3IgdmFsdWUgJHt2YWx9LiBWYWxpZCB0eXBlczogU3RyaW5nLCBOdW1iZXIsIEFycmF5LmApO1xufTtcblxuLyoqXG4gKiBQYXJzZSB0aGUgZ2l2ZW4gSlNPTiBvYmplY3Qgb2YgYXR0cmlidXRlcyB0byBTTlMgbWVzc2FnZSBhdHRyaWJ1dGVzXG4gKiBAcGFyYW0ge09iamVjdH0gYXR0cmlidXRlcyBKU09OIG9iamVjdFxuICogQHJldHVybnMge1t7U3RyaW5nOiB7RGF0YVR5cGU6IFN0cmluZywgU3RyaW5nVmFsdWU6IFN0cmluZ319XX1cbiAqL1xuY29uc3QgcGFyc2VBdHRyaWJ1dGVzID0gKGF0dHJpYnV0ZXMpID0+XG4gIE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLnJlZHVjZSgocmVzLCBrZXkpID0+IHtcbiAgICBjb25zdCB2YWwgPSBhdHRyaWJ1dGVzW2tleV07XG4gICAgaWYgKHR5cGVvZiB2YWwgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICBjb25zdCB0eXBlID0gZ2V0QXR0clR5cGUodmFsKTtcbiAgICByZXR1cm4ge1xuICAgICAgLi4ucmVzLFxuICAgICAgW2tleV06IHtcbiAgICAgICAgRGF0YVR5cGU6IHR5cGUsXG4gICAgICAgIFN0cmluZ1ZhbHVlOiB0eXBlID09PSAnU3RyaW5nLkFycmF5JyA/IEpTT04uc3RyaW5naWZ5KHZhbCkgOiB2YWwudG9TdHJpbmcoKSxcbiAgICAgIH0sXG4gICAgfTtcbiAgfSwge30pO1xuXG4vKipcbiAqICogRGV0ZXJtaW5lIGlmIHRoZSBnaXZlbiB2YWx1ZSAodHlwZSkgaXMgYSBzdHJpbmdcbiAqIEBwYXJhbSB7YW55fSB0eXBlXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuY29uc3QgaXNTbnNTdHJpbmcgPSAodHlwZSkgPT4gdHlwZSA9PT0gJ1N0cmluZyc7XG5cbi8qKlxuICogUGFyc2VzIG9iamVjdCBpZiBpdCBpcyBub3QgYSBzdHJpbmdcbiAqIEBwYXJhbSB7YW55fSB2YWxcbiAqIEBwYXJhbSB7YW55fSB0eXBlXG4gKi9cbmNvbnN0IHBhcnNlU25zVHlwZSA9ICh2YWwsIHR5cGUpID0+IChpc1Nuc1N0cmluZyh0eXBlKSA/IHZhbCA6IEpTT04ucGFyc2UodmFsKSk7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbiBQdWJsaXNoIG1lc3NhZ2UgdG8gU05TIGV2ZW50IHN0cmVhbS5cbiAgICogQHBhcmFtIHtvYmplY3R9IEFXUyBpcyB0aGUgQVdTIHNkayBpbnN0YW5jZSB0aGF0IG5lZWRzIHRvIGJlIHBhc3NlZCBmcm9tIHRoZSBoYW5kbGVyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BpY0FyblxuICAgKiBAcGFyYW0ge3sgW2tleTogc3RyaW5nXTogYW55IH19IG1lc3NhZ2VcbiAgICogQHBhcmFtIHtDb21wYW55RXZlbnRBdHRyaWJ1dGVzfSBhdHRyaWJ1dGVzXG4gICAqIEByZXR1cm5zIHsqfVxuICAgKi9cbiAgcHVibGlzaDogYXN5bmMgKEFXUywgdG9waWNBcm4sIG1lc3NhZ2UsIGF0dHJpYnV0ZXMgPSB7fSwgb3B0aW9ucyA9IHt9KSA9PiB7XG4gICAgY29uc3Qgc25zID0gbmV3IEFXUy5TTlMoeyBhcGlWZXJzaW9uOiAnMjAxMC0wMy0zMScgfSk7XG4gICAgbGV0IHJlcztcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgICBNZXNzYWdlOiBKU09OLnN0cmluZ2lmeShtZXNzYWdlKSxcbiAgICAgICAgVG9waWNBcm46IHRvcGljQXJuLFxuICAgICAgICBNZXNzYWdlQXR0cmlidXRlczogcGFyc2VBdHRyaWJ1dGVzKGF0dHJpYnV0ZXMpLFxuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgfTtcbiAgICAgIHJlcyA9IGF3YWl0IHNucy5wdWJsaXNoKHBhcmFtcykucHJvbWlzZSgpO1xuICAgICAgY29uc29sZS5sb2coJ1NOUyBQdWJsaXNoIC0gU3VjY2VzczogJywgSlNPTi5zdHJpbmdpZnkocGFyYW1zKSk7XG4gICAgICByZXR1cm4gcmVzO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5sb2coJ1NOUyBQdWJsaXNoIC0gRmFpbHVyZTogJywgZXJyLnRvU3RyaW5nKCkpO1xuICAgICAgcmV0dXJuIGVycjtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbiBQYXJzZXMgYSBDb21wYW55RXZlbnQsIHJldHVybmluZyBhbiBvYmplY3QgdGhhdCByZXRhaW5zIG9ubHkgdGhlIG9yaWdpbmFsIGV2ZW50J3MgXCJNZXNzYWdlXCIgYW5kIFwiTWVzc2FnZUF0dHJpYnV0ZXNcIiB2YWx1ZXMuXG4gICAqIEB0ZW1wbGF0ZSBNXG4gICAqIEBwYXJhbSB7eyBSZWNvcmRzOiBbeyBTbnM6IHsgTWVzc2FnZTogTSwgTWVzc2FnZUF0dHJpYnV0ZXM6IHsgW2tleTogc3RyaW5nXTogTWVzc2FnZUF0dHJpYnV0ZSB9IH0gfV0gfX0gZXZlbnRcbiAgICogQHJldHVybnMge3sgbWVzc2FnZTogTSwgYXR0cmlidXRlczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfCBudW1iZXIgfCBhcnJheSB9IH19XG4gICAqL1xuICBwYXJzZTogKGV2ZW50KSA9PiB7XG4gICAgY29uc3QgbWVzc2FnZSA9IHBhcnNlSnNvbihldmVudC5SZWNvcmRzWzBdLlNucy5NZXNzYWdlKTtcbiAgICBjb25zdCBhdHRyaWJ1dGVzID0gT2JqZWN0LmtleXMoZXZlbnQuUmVjb3Jkc1swXS5TbnMuTWVzc2FnZUF0dHJpYnV0ZXMpLnJlZHVjZSgocmVzLCBrZXkpID0+IHtcbiAgICAgIGNvbnN0IHsgVHlwZTogdHlwZSwgVmFsdWU6IHZhbHVlIH0gPSBldmVudC5SZWNvcmRzWzBdLlNucy5NZXNzYWdlQXR0cmlidXRlc1trZXldO1xuXG4gICAgICBjb25zdCB2YWwgPSBwYXJzZVNuc1R5cGUodmFsdWUsIHR5cGUpO1xuICAgICAgcmV0dXJuIHsgLi4ucmVzLCBba2V5XTogdmFsIH07XG4gICAgfSwge30pO1xuICAgIHJldHVybiB7IG1lc3NhZ2UsIGF0dHJpYnV0ZXMgfTtcbiAgfSxcbn07XG4iLCJjb25zdCB7IGRlZXBQYXJzZUpzb24gfSA9IHJlcXVpcmUoJy4vdXRpbCcpO1xuXG5jb25zdCBzYWZlTXNnRmV0Y2hMaW1pdFBlckluc3RhbmNlID0gNTAwO1xuLyoqXG4gKiBDb252ZXJ0IHRoZSBnaXZlbiBTTlMgdHlwZSBhdHRyaWJ1dGVzIHRvIHNpbXBsZSBKU09OIGtleS12YWx1ZSBwYWlyIG9mXG4gKiBhdHRyaWJ1dGVzXG4gKiBAcGFyYW0ge09iamVjdH0gYXR0cmlicyBhcmUgdGhlIG1lc3NhZ2UgYXR0cmlidXRlc1xuICogQHJldHVybnMge1t7U3RyaW5nOiAqfV19XG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBhcnJvdy1ib2R5LXN0eWxlXG5jb25zdCB1bm1hcnNoYWxsTXNnQXR0cmlicyA9IChhdHRyaWJzKSA9PiB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhhdHRyaWJzKS5yZWR1Y2UoKHJlcywga2V5KSA9PiB7XG4gICAgY29uc3QgeyBUeXBlOiB0eXBlLCBWYWx1ZTogdmFsdWUgfSA9IGF0dHJpYnNba2V5XTtcblxuICAgIGlmICh0eXBlICE9PSAnU3RyaW5nJyAmJiB0eXBlICE9PSAnTnVtYmVyJykge1xuICAgICAgcmV0dXJuIHsgLi4ucmVzLCBba2V5XTogSlNPTi5wYXJzZSh2YWx1ZSkgfTtcbiAgICB9XG4gICAgcmV0dXJuIHsgLi4ucmVzLCBba2V5XTogdmFsdWUgfTtcbiAgfSwge30pO1xufTtcblxuLyoqXG4gKiBQYXJzZSB0aGUgZ2l2ZW4gU1FTIG1lc3NhZ2UgdGhhdCBjb250YWlucyBhIFNOUyBtZXNzYWdlIHRvIGl0cyBib2R5LFxuICogYXR0cmlidXRlcyBhbmQgU1FTIG1lc3NhZ2UgcmVjZWlwdCBoYW5kbGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBtZXNzYWdlXG4gKiBAcmV0dXJucyB7IG1zZ0JvZHk6IE9iamVjdCwgbXNnQXR0cmliczogT2JqZWN0LCByY3B0SGFuZGxlOiBTdHJpbmd9XG4gKi9cbmV4cG9ydCBjb25zdCBwYXJzZU1zZyA9IChtZXNzYWdlKSA9PiB7XG4gIGxldCBtc2dCID0gbWVzc2FnZS5Cb2R5ID8gbWVzc2FnZS5Cb2R5IDogbWVzc2FnZS5ib2R5O1xuICBsZXQgbXNnQXR0cmlicyA9IHt9O1xuICB0cnkge1xuICAgIG1zZ0IgPSBtZXNzYWdlLkJvZHkgPyBkZWVwUGFyc2VKc29uKG1lc3NhZ2UuQm9keSkgOiBkZWVwUGFyc2VKc29uKG1lc3NhZ2UuYm9keSk7XG4gIH0gY2F0Y2ggKGUxKSB7XG4gICAgY29uc29sZS5sb2coJ0Vycm9yOiB3aXRoU3FzQ29uc3VtZXIgLSBwYXJzZU1zZzogRGlkIG5vdCBnZXQgYSBKU09OIHBhcnNhYmxlIG1lc3NhZ2UgaW4gYm9keScpO1xuICAgIHRocm93IGUxO1xuICB9XG4gIGlmICh0eXBlb2YgbXNnQi5NZXNzYWdlQXR0cmlidXRlcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBtc2dBdHRyaWJzID0gdW5tYXJzaGFsbE1zZ0F0dHJpYnMobXNnQi5NZXNzYWdlQXR0cmlidXRlcyk7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBtc2dCb2R5OiBtc2dCLk1lc3NhZ2UsXG4gICAgbXNnQXR0cmlicyxcbiAgICByY3B0SGFuZGxlOiBtZXNzYWdlLlJlY2VpcHRIYW5kbGUsXG4gIH07XG59O1xuXG4vKipcbiAqIFNlbmQgdGhlIGdpdmVuIG1lc3NhZ2UgdG8gdGhlIGdpdmVuIFNRUyBxdWV1ZVxuICogQHBhcmFtIHtvYmplY3R9IEFXUyBpcyB0aGUgQVdTIHNkayBpbnN0YW5jZSB0aGF0IG5lZWRzIHRvIGJlIHBhc3NlZCBmcm9tIHRoZSBoYW5kbGVyXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVnaW9uIGlzIHRoZSByZWdpb24gb2YgQVdTIHRoYXQgdGhpcyBzZXJ2aWNlIGlzIHJ1bm5pbmcgaW5cbiAqIEBwYXJhbSB7U3RyaW5nfSBxVXJsIGlzIHRoZSB1cmwgb2YgdGhlIHF1ZXVlIHRvIHNlbmQgdGhlIG1lc3NhZ2UgdG9cbiAqIEBwYXJhbSB7U3RyaW5nfSBtc2cgaXMgdGhlIG1lc3NhZ2UgdGhhdCBuZWVkcyB0byBiZSBzZW50XG4gKiBAcmV0dXJucyB7Kn1cbiAqL1xuZXhwb3J0IGNvbnN0IHNlbmRNc2cgPSBhc3luYyAoQVdTLCByZWdpb24sIHFVcmwsIG1zZykgPT4ge1xuICBjb25zdCBzcXMgPSBuZXcgQVdTLlNRUyh7IHJlZ2lvbiB9KTtcbiAgcmV0dXJuIHNxc1xuICAgIC5zZW5kTWVzc2FnZSh7XG4gICAgICBRdWV1ZVVybDogcVVybCxcbiAgICAgIE1lc3NhZ2VCb2R5OiBtc2csXG4gICAgfSlcbiAgICAucHJvbWlzZSgpO1xufTtcblxuLyoqXG4gKiBHZXRzIG1lc3NhZ2VzIGZyb20gdGhlIGdpdmVuIHF1ZXVlXG4gKiBAcGFyYW0ge29iamVjdH0gQVdTIGlzIHRoZSBBV1Mgc2RrIGluc3RhbmNlIHRoYXQgbmVlZHMgdG8gYmUgcGFzc2VkIGZyb20gdGhlIGhhbmRsZXJcbiAqIEBwYXJhbSB7c3RyaW5nfSByZWdpb24gaXMgdGhlIHJlZ2lvbiBvZiBBV1MgdGhhdCB0aGlzIHNlcnZpY2UgaXMgcnVubmluZyBpblxuICogQHBhcmFtIHtOdW1iZXJ9IG1zZ0NvdW50VG9GZXRjaCBpcyB0aGUgcXVhbnRpdHkgb2YgbWVzc2FnZXMgdG8gZmV0Y2ggZnJvbSB0aGUgcXVldWUuIFJldHVybmVkIG1lc3NhZ2UgcXVhbnRpdHkgY2FuIGJlIGxlc3MgdGhhbiB0aGlzIGlmIHRoZSBtZXNzYWdlcyBpbiB0aGUgcXVldWUgYXJlIGV4aGF1c3RlZFxuICogQHBhcmFtIHtTdHJpbmd9IFF1ZXVlVXJsIGlzIHRoZSB1cmwgb2YgdGhlIHF1ZXVlIGZyb20gd2hpY2ggdG8gZmV0Y2ggdGhlIG1lc3NhZ2VzXG4gKiBAcmV0dXJucyB7W1NRU01lc3NhZ2VdfVxuICovXG5leHBvcnQgY29uc3QgZ2V0TXNnc0Zyb21RdWV1ZSA9IGFzeW5jIChBV1MsIHJlZ2lvbiwgbXNnQ291bnRUb0ZldGNoLCBRdWV1ZVVybCkgPT4ge1xuICBjb25zb2xlLmxvZyhgRmV0Y2hpbmcgbWVzc2FnZXMgZnJvbSBTUVMgVVJMOiAke1F1ZXVlVXJsfWApO1xuICBjb25zdCBzcXMgPSBuZXcgQVdTLlNRUyh7IHJlZ2lvbiB9KTtcbiAgbGV0IG1lc3NhZ2VzID0gW107XG4gIGNvbnN0IHByb21zID0gW107XG4gIGxldCBtc2dzVG9GZXRjaCA9IG1zZ0NvdW50VG9GZXRjaCA8IHNhZmVNc2dGZXRjaExpbWl0UGVySW5zdGFuY2UgPyBtc2dDb3VudFRvRmV0Y2ggOiBzYWZlTXNnRmV0Y2hMaW1pdFBlckluc3RhbmNlO1xuICB3aGlsZSAobXNnc1RvRmV0Y2ggPiAwKSB7XG4gICAgY29uc3QgbXNnc1RvRmV0Y2hUaGlzSXRlciA9IG1zZ3NUb0ZldGNoIDwgMTAgPyBtc2dzVG9GZXRjaCA6IDEwO1xuICAgIG1zZ3NUb0ZldGNoIC09IG1zZ3NUb0ZldGNoVGhpc0l0ZXI7XG4gICAgcHJvbXMucHVzaChcbiAgICAgIHNxc1xuICAgICAgICAucmVjZWl2ZU1lc3NhZ2Uoe1xuICAgICAgICAgIFF1ZXVlVXJsLFxuICAgICAgICAgIE1heE51bWJlck9mTWVzc2FnZXM6IG1zZ3NUb0ZldGNoVGhpc0l0ZXIsXG4gICAgICAgICAgVmlzaWJpbGl0eVRpbWVvdXQ6IDkwMCxcbiAgICAgICAgfSlcbiAgICAgICAgLnByb21pc2UoKSxcbiAgICApO1xuICB9XG4gIGNvbnN0IHJlc3BzID0gYXdhaXQgUHJvbWlzZS5hbGwocHJvbXMpO1xuICByZXNwcy5mb3JFYWNoKChyZXNwKSA9PiB7XG4gICAgaWYgKHR5cGVvZiByZXNwLk1lc3NhZ2VzICE9PSAndW5kZWZpbmVkJyAmJiByZXNwLk1lc3NhZ2VzLmxlbmd0aCA+IDApIHtcbiAgICAgIG1lc3NhZ2VzID0gWy4uLm1lc3NhZ2VzLCAuLi5yZXNwLk1lc3NhZ2VzXTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gbWVzc2FnZXM7XG59O1xuXG4vKipcbiAqIERlbGV0ZSBtZXNzYWdlIGZyb20gdGhlIGdpdmVuIHF1ZXVlIHVybCB1c2luZyB0aGUgZ2l2ZW4gcmVjZWlwdCBoYW5kbGVcbiAqIEBwYXJhbSB7b2JqZWN0fSBBV1MgaXMgdGhlIEFXUyBzZGsgaW5zdGFuY2UgdGhhdCBuZWVkcyB0byBiZSBwYXNzZWQgZnJvbSB0aGUgaGFuZGxlclxuICogQHBhcmFtIHtzdHJpbmd9IHJlZ2lvbiBpcyB0aGUgcmVnaW9uIG9mIEFXUyB0aGF0IHRoaXMgc2VydmljZSBpcyBydW5uaW5nIGluXG4gKiBAcGFyYW0ge1N0cmluZ30gUXVldWVVcmwgaXMgdGhlIHVybCBvZiB0aGUgcXVldWUgZnJvbSB3aGljaCB0byBkZWxldGUgdGhlIG1lc3NhZ2VcbiAqIEBwYXJhbSB7U3RyaW5nfSBSZWNlaXB0SGFuZGxlIGlzIHRoZSByZWNlaXB0IGhhbmRsZSBvZiB0aGUgbWVzc2FnZSB0byBiZSBkZWxldGVkXG4gKiBAcmV0dXJucyB7Kn1cbiAqL1xuZXhwb3J0IGNvbnN0IGRlbGV0ZU1zZyA9IGFzeW5jIChBV1MsIHJlZ2lvbiwgUXVldWVVcmwsIFJlY2VpcHRIYW5kbGUpID0+IHtcbiAgY29uc3Qgc3FzID0gbmV3IEFXUy5TUVMoeyByZWdpb24gfSk7XG4gIHNxc1xuICAgIC5kZWxldGVNZXNzYWdlKHtcbiAgICAgIFF1ZXVlVXJsLFxuICAgICAgUmVjZWlwdEhhbmRsZSxcbiAgICB9KVxuICAgIC5wcm9taXNlKCk7XG59O1xuIiwiaW1wb3J0IHsgdjQgYXMgdXVpZCB9IGZyb20gJ3V1aWQnO1xuXG5pbXBvcnQgeyBuZXZlclRocm93RXJyb3IsIGl0ZW1FeGlzdHMsIGV2YWx1YXRlU2hhcmVkTWljcm9BcHBsaWNhdGlvbkRhdGEgfSBmcm9tICcuL3V0aWwnO1xuaW1wb3J0IHsgZmV0Y2hSZWNvcmRzQnlRdWVyeSwgYmF0Y2hQdXRJbnRvRHluYW1vRGIgfSBmcm9tICcuL2R5bmFtbyc7XG5pbXBvcnQgZXMgZnJvbSAnLi9ldmVudFN0cmVhbSc7XG5pbXBvcnQgeyBkZWxldGVNc2cgYXMgZGVsZXRlTXNnRnJvbVF1ZXVlLCBzZW5kTXNnIGFzIHNlbmRTcXNNc2cgfSBmcm9tICcuL3F1ZXVlJztcblxuLyoqXG4gKiBHZXQgdGhlIGN1cnJlbnQgYWNjb3VudCBkYXRhIGZyb20gdGhlIGRhdGFiYXNlIGZvciB0aGUgZ2l2ZW4gYWNjb3VudElkXG4gKiBAcGFyYW0ge29iamVjdH0gQVdTIGlzIHRoZSBBV1Mgc2RrIGluc3RhbmNlIHRoYXQgbmVlZHMgdG8gYmUgcGFzc2VkIGZyb20gdGhlIGhhbmRsZXJcbiAqIEBwYXJhbSB7c3RyaW5nfSBhY2NvdW50SWQgaXMgdGhlIGFjY291bnRJZCBmb3Igd2hpY2ggdGhlIGRhdGEgbmVlZHMgdG8gYmUgZmV0Y2hlZFxuICovXG5jb25zdCBnZXRDdXJyZW50QWNjb3VudERhdGEgPSBhc3luYyAoQVdTLCBhY2NvdW50SWQpID0+IHtcbiAgY29uc3QgZmV0Y2hSZXNwb25zZSA9IGF3YWl0IGZldGNoUmVjb3Jkc0J5UXVlcnkoQVdTLCB7XG4gICAgVGFibGVOYW1lOiAnQWNjb3VudCcsXG4gICAgRXhwcmVzc2lvbkF0dHJpYnV0ZU5hbWVzOiB7ICcjcGsnOiAnYWNjb3VudElkJyB9LFxuICAgIEtleUNvbmRpdGlvbkV4cHJlc3Npb246ICcjcGsgPSA6YWNjSWQnLFxuICAgIEV4cHJlc3Npb25BdHRyaWJ1dGVWYWx1ZXM6IHtcbiAgICAgICc6YWNjSWQnOiB7IFM6IGFjY291bnRJZCB9LFxuICAgIH0sXG4gIH0pO1xuICByZXR1cm4gZmV0Y2hSZXNwb25zZVswXTtcbn07XG5cbi8qKlxuICogR2V0IHRoZSBjdXJyZW50IHVzZXIgZGF0YSBmcm9tIHRoZSBkYXRhYmFzZSBmb3IgdGhlIGdpdmVuIGFjY291bnRJZFxuICogQHBhcmFtIHtvYmplY3R9IEFXUyBpcyB0aGUgQVdTIHNkayBpbnN0YW5jZSB0aGF0IG5lZWRzIHRvIGJlIHBhc3NlZCBmcm9tIHRoZSBoYW5kbGVyXG4gKiBAcGFyYW0ge3N0cmluZ30gdXNlcklkIGlzIHRoZSB1c2VySWQgZm9yIHdoaWNoIHRoZSBkYXRhIG5lZWRzIHRvIGJlIGZldGNoZWRcbiAqL1xuY29uc3QgZ2V0Q3VycmVudFVzZXJEYXRhID0gYXN5bmMgKEFXUywgdXNlcklkKSA9PiB7XG4gIGNvbnN0IGZldGNoUmVzcG9uc2UgPSBhd2FpdCBmZXRjaFJlY29yZHNCeVF1ZXJ5KEFXUywge1xuICAgIFRhYmxlTmFtZTogJ1VzZXInLFxuICAgIEV4cHJlc3Npb25BdHRyaWJ1dGVOYW1lczogeyAnI3BrJzogJ3VzZXJJZCcgfSxcbiAgICBLZXlDb25kaXRpb25FeHByZXNzaW9uOiAnI3BrID0gOnVJZCcsXG4gICAgRXhwcmVzc2lvbkF0dHJpYnV0ZVZhbHVlczoge1xuICAgICAgJzp1SWQnOiB7IFM6IHVzZXJJZCB9LFxuICAgIH0sXG4gIH0pO1xuICByZXR1cm4gZmV0Y2hSZXNwb25zZVswXTtcbn07XG5cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBwcm9jZXNzZXMgdGhlIG1lc3NhZ2UgdGhhdCBpcyBzZW50IHRvIGl0IGJ5IGludm9raW5nIHRoZSBtZXNzYWdlIGhhbmRsZXIgZnVuY3Rpb24gdGhhdCBpcyBwYXNzZWQgdG8gaXQgYXMgYSBwYXJhbVxuICogQHBhcmFtIHtvYmplY3R9IEFXUyBpcyB0aGUgQVdTIHNkayBpbnN0YW5jZSB0aGF0IG5lZWRzIHRvIGJlIHBhc3NlZCBmcm9tIHRoZSBoYW5kbGVyXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVnaW9uIGlzIHRoZSByZWdpb24gb2YgQVdTIHRoYXQgdGhpcyBzZXJ2aWNlIGlzIHJ1bm5pbmcgaW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzZXJ2aWNlIGlzIHRoZSBuYW1lIG9mIHRoZSBzZXJ2aWNlXG4gKiBAcGFyYW0geyBzdHJpbmcgfSBhY2NvdW50IGlzIEFXUyB0aGUgYWNjb3VudCBudW1iZXJcbiAqIEBwYXJhbSB7IG1zZ0JvZHk6IG9iamVjdCwgbXNnQXR0cmliczogb2JqZWN0LCByY3B0SGFuZGxlOiBzdHJpbmcgfSBpcyB0aGUgbWVzc2FnZSBvYmplY3QgY29udGFpbmluZyBwcm9wZXJ0aWVzIG1zZ0JvZHkgKEJvZHkgb2YgdGhlIFNOUyBtZXNzYWdlKSwgbXNnQXR0cmlicyAoTWVzc2FnZSBhdHRyaWJ1dGVzIG9mIHRoZSBTTlMgbWVzc2FnZSkgYW5kIHJjcHRIYW5kbGUgKE1lc3NhZ2UgcmVjZWlwdCBoYW5kbGUgZm9yIHRoZSBtZXNzYWdlIGZyb20gU1FTKVxuICogQHBhcmFtIHtGdW5jdGlvbn0gbXNnSGFuZGxlciBpcyB0aGUgaGFuZGxlciBmdW5jdGlvbiB0aGF0IHdpbGwgcHJvY2VzcyB0aGUgbWVzc2FnZVxuICogQHJldHVybnMge0Jvb2xlYW59XG4gKiBAdGhyb3dzIHtFcnJvcn1cbiAqL1xuZXhwb3J0IGNvbnN0IHByb2Nlc3NNZXNzYWdlID0gYXN5bmMgKFxuICBBV1MsXG4gIHJlZ2lvbixcbiAgc2VydmljZSxcbiAgYWNjb3VudCxcbiAgeyBtc2dCb2R5LCBtc2dBdHRyaWJzLCByY3B0SGFuZGxlIH0sXG4gIG1zZ0hhbmRsZXIsXG4pID0+IHtcbiAgLy8gVXNlIHRoZSBuZXZlclRocm93RXJyb3IgZnVuY3Rpb24gZnJvbSB1dGlscyB0byBwcm9jZXNzIHRoZSBtZXNzYWdlIG1ha2luZ1xuICAvLyBzdXJlIHRoYXQgbm8gZXJyb3IgaXMgdGhyb3duIGJhY2tcblxuICBjb25zdCBkYkNvbmZpZyA9IGF3YWl0IGZldGNoUmVjb3Jkc0J5UXVlcnkoQVdTLCB7XG4gICAgVGFibGVOYW1lOiAndmVuZG9yQ29uZmlnJyxcbiAgICBFeHByZXNzaW9uQXR0cmlidXRlTmFtZXM6IHsgJyNwayc6ICdzZXJ2aWNlJyB9LFxuICAgIEtleUNvbmRpdGlvbkV4cHJlc3Npb246ICcjcGsgPSA6c2VydicsXG4gICAgRXhwcmVzc2lvbkF0dHJpYnV0ZVZhbHVlczoge1xuICAgICAgJzpzZXJ2JzogeyBTOiBgJHtzZXJ2aWNlfWAgfSxcbiAgICB9LFxuICB9KTtcblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWYtaW5pdFxuICBsZXQgc2VydmljZUFjY291bnREYXRhID0ge307XG4gIGlmIChcbiAgICBpdGVtRXhpc3RzKG1zZ0JvZHksICdjb250ZXh0JykgJiZcbiAgICBpdGVtRXhpc3RzKG1zZ0JvZHkuY29udGV4dCwgJ3VzZXInKSAmJlxuICAgIGl0ZW1FeGlzdHMobXNnQm9keS5jb250ZXh0LnVzZXIsICdhY2NvdW50SWQnKVxuICApIHtcbiAgICBjb25zdCBhY2NEYXRhID0gYXdhaXQgZ2V0Q3VycmVudEFjY291bnREYXRhKEFXUywgbXNnQm9keS5jb250ZXh0LnVzZXIuYWNjb3VudElkKTtcbiAgICBpZiAoaXRlbUV4aXN0cyhhY2NEYXRhLCAndmVuZG9yRGF0YScpICYmIGl0ZW1FeGlzdHMoYWNjRGF0YS52ZW5kb3JEYXRhLCBgJHtzZXJ2aWNlfWApKSB7XG4gICAgICBzZXJ2aWNlQWNjb3VudERhdGEgPSBhY2NEYXRhLnZlbmRvckRhdGFbYCR7c2VydmljZX1gXTtcbiAgICB9XG4gICAgaWYgKCFpdGVtRXhpc3RzKG1zZ0JvZHkuY29udGV4dCwgYWNjb3VudCkpIHtcbiAgICAgIG1zZ0JvZHkuY29udGV4dC5hY2NvdW50ID0gYWNjRGF0YTtcbiAgICB9XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgbGV0IHNoYXJlZE1pY3JvQXBwbGljYXRpb25BY2NvdW50RGF0YSA9IHt9O1xuICBpZiAoXG4gICAgaXRlbUV4aXN0cyhtc2dCb2R5LCAnY29udGV4dCcpICYmXG4gICAgaXRlbUV4aXN0cyhtc2dCb2R5LmNvbnRleHQsICd1c2VyJykgJiZcbiAgICBpdGVtRXhpc3RzKG1zZ0JvZHkuY29udGV4dC51c2VyLCAnYWNjb3VudElkJylcbiAgKSB7XG4gICAgY29uc3QgYWNjRGF0YSA9IGF3YWl0IGdldEN1cnJlbnRBY2NvdW50RGF0YShBV1MsIG1zZ0JvZHkuY29udGV4dC51c2VyLmFjY291bnRJZCk7XG4gICAgaWYgKGl0ZW1FeGlzdHMoYWNjRGF0YSwgJ3NoYXJlZE1pY3JvQXBwbGljYXRpb25BY2NvdW50RGF0YScpKSB7XG4gICAgICBzaGFyZWRNaWNyb0FwcGxpY2F0aW9uQWNjb3VudERhdGEgPSBldmFsdWF0ZVNoYXJlZE1pY3JvQXBwbGljYXRpb25EYXRhKFxuICAgICAgICBhY2NEYXRhLnNoYXJlZE1pY3JvQXBwbGljYXRpb25BY2NvdW50RGF0YSxcbiAgICAgICAgc2VydmljZSxcbiAgICAgICk7XG4gICAgfVxuICAgIGlmICghaXRlbUV4aXN0cyhtc2dCb2R5LmNvbnRleHQsIGFjY291bnQpKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgIG1zZ0JvZHkuY29udGV4dC5hY2NvdW50ID0gYWNjRGF0YTtcbiAgICB9XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWYtaW5pdFxuICBsZXQgc2VydmljZVVzZXJEYXRhID0ge307XG4gIGlmIChcbiAgICBpdGVtRXhpc3RzKG1zZ0JvZHksICdjb250ZXh0JykgJiZcbiAgICBpdGVtRXhpc3RzKG1zZ0JvZHkuY29udGV4dCwgJ3VzZXInKSAmJlxuICAgIGl0ZW1FeGlzdHMobXNnQm9keS5jb250ZXh0LnVzZXIsICd1c2VySWQnKVxuICApIHtcbiAgICBjb25zdCB1c2VyRGF0YSA9IGF3YWl0IGdldEN1cnJlbnRVc2VyRGF0YShBV1MsIG1zZ0JvZHkuY29udGV4dC51c2VyLnVzZXJJZCk7XG4gICAgaWYgKGl0ZW1FeGlzdHModXNlckRhdGEsICd2ZW5kb3JEYXRhJykgJiYgaXRlbUV4aXN0cyh1c2VyRGF0YS52ZW5kb3JEYXRhLCBgJHtzZXJ2aWNlfWApKSB7XG4gICAgICBzZXJ2aWNlVXNlckRhdGEgPSB1c2VyRGF0YS52ZW5kb3JEYXRhW2Ake3NlcnZpY2V9YF07XG4gICAgfVxuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gIGxldCBzaGFyZWRNaWNyb0FwcGxpY2F0aW9uVXNlckRhdGEgPSB7fTtcbiAgaWYgKFxuICAgIGl0ZW1FeGlzdHMobXNnQm9keSwgJ2NvbnRleHQnKSAmJlxuICAgIGl0ZW1FeGlzdHMobXNnQm9keS5jb250ZXh0LCAndXNlcicpICYmXG4gICAgaXRlbUV4aXN0cyhtc2dCb2R5LmNvbnRleHQudXNlciwgJ3VzZXJJZCcpXG4gICkge1xuICAgIGNvbnN0IHVzZXJEYXRhID0gYXdhaXQgZ2V0Q3VycmVudFVzZXJEYXRhKEFXUywgbXNnQm9keS5jb250ZXh0LnVzZXIudXNlcklkKTtcbiAgICBpZiAoaXRlbUV4aXN0cyh1c2VyRGF0YSwgJ3NoYXJlZFZlbmRvckRhdGEnKSkge1xuICAgICAgc2hhcmVkTWljcm9BcHBsaWNhdGlvblVzZXJEYXRhID0gZXZhbHVhdGVTaGFyZWRNaWNyb0FwcGxpY2F0aW9uRGF0YShcbiAgICAgICAgdXNlckRhdGEuc2hhcmVkTWljcm9BcHBsaWNhdGlvblVzZXJEYXRhLFxuICAgICAgICBzZXJ2aWNlLFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBwcm9jUmVzID0gYXdhaXQgbmV2ZXJUaHJvd0Vycm9yKFxuICAgIHtcbiAgICAgIG1lc3NhZ2U6IG1zZ0JvZHksXG4gICAgICBzZXJ2aWNlQ29uZmlnRGF0YTpcbiAgICAgICAgdHlwZW9mIGRiQ29uZmlnICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICBBcnJheS5pc0FycmF5KGRiQ29uZmlnKSAmJlxuICAgICAgICBkYkNvbmZpZy5sZW5ndGggPiAwICYmXG4gICAgICAgIHR5cGVvZiBkYkNvbmZpZ1swXS5jb25maWdkYXRhICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICAgID8gZGJDb25maWdbMF0uY29uZmlnZGF0YVxuICAgICAgICAgIDogW10sXG4gICAgICBzZXJ2aWNlQWNjb3VudERhdGEsXG4gICAgICBzaGFyZWRNaWNyb0FwcGxpY2F0aW9uQWNjb3VudERhdGEsXG4gICAgICBzZXJ2aWNlVXNlckRhdGEsXG4gICAgICBzaGFyZWRNaWNyb0FwcGxpY2F0aW9uVXNlckRhdGEsXG4gICAgICBhdHRyaWJ1dGVzOiBtc2dBdHRyaWJzLFxuICAgIH0sXG4gICAgbXNnSGFuZGxlcixcbiAgKTtcbiAgY29uc29sZS5sb2coYHByb2Nlc3NNZXNzYWdlOiBJTkZPOiBSZXN1bHQgZnJvbSB3b3JrZXIgaXMgJHtKU09OLnN0cmluZ2lmeShwcm9jUmVzLCBudWxsLCA0KX1gKTtcblxuICBpZiAoaXRlbUV4aXN0cyhwcm9jUmVzLndvcmtlclJlc3AsICdzZXJ2aWNlQWNjb3VudERhdGEnKSkge1xuICAgIGlmICh0eXBlb2YgcHJvY1Jlcy53b3JrZXJSZXNwLnNlcnZpY2VBY2NvdW50RGF0YSAhPT0gJ29iamVjdCcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignU2VydmljZSBzcGVjaWZpYyB1c2VyIGFjY291bnQgZGF0YSBzaG91bGQgYmUgYW4gb2JqZWN0Jyk7XG4gICAgfVxuICAgIGlmIChcbiAgICAgIGl0ZW1FeGlzdHMobXNnQm9keSwgJ2NvbnRleHQnKSAmJlxuICAgICAgaXRlbUV4aXN0cyhtc2dCb2R5LmNvbnRleHQsICd1c2VyJykgJiZcbiAgICAgIGl0ZW1FeGlzdHMobXNnQm9keS5jb250ZXh0LnVzZXIsICdhY2NvdW50SWQnKVxuICAgICkge1xuICAgICAgY29uc3QgY3VyckFjY0RhdGEgPSBhd2FpdCBnZXRDdXJyZW50QWNjb3VudERhdGEoQVdTLCBtc2dCb2R5LmNvbnRleHQudXNlci5hY2NvdW50SWQpO1xuICAgICAgaWYgKCFpdGVtRXhpc3RzKGN1cnJBY2NEYXRhLCAndmVuZG9yRGF0YScpKSB7XG4gICAgICAgIGN1cnJBY2NEYXRhLnZlbmRvckRhdGEgPSB7fTtcbiAgICAgIH1cbiAgICAgIGlmICghaXRlbUV4aXN0cyhjdXJyQWNjRGF0YS52ZW5kb3JEYXRhLCBgJHtzZXJ2aWNlfWApKSB7XG4gICAgICAgIGN1cnJBY2NEYXRhLnZlbmRvckRhdGFbYCR7c2VydmljZX1gXSA9IHt9O1xuICAgICAgfVxuICAgICAgY3VyckFjY0RhdGEudmVuZG9yRGF0YVtgJHtzZXJ2aWNlfWBdID0ge1xuICAgICAgICAuLi5jdXJyQWNjRGF0YS52ZW5kb3JEYXRhW2Ake3NlcnZpY2V9YF0sXG4gICAgICAgIC4uLnByb2NSZXMud29ya2VyUmVzcC5zZXJ2aWNlQWNjb3VudERhdGEsXG4gICAgICB9O1xuICAgICAgYXdhaXQgYmF0Y2hQdXRJbnRvRHluYW1vRGIoQVdTLCBbY3VyckFjY0RhdGFdLCAnQWNjb3VudCcpO1xuICAgIH1cbiAgfVxuXG4gIGlmIChpdGVtRXhpc3RzKHByb2NSZXMud29ya2VyUmVzcCwgJ3NoYXJlZE1pY3JvQXBwbGljYXRpb25BY2NvdW50RGF0YScpKSB7XG4gICAgaWYgKHR5cGVvZiBwcm9jUmVzLndvcmtlclJlc3Auc2hhcmVkTWljcm9BcHBsaWNhdGlvbkFjY291bnREYXRhICE9PSAnb2JqZWN0Jykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdTaGFyZWQgc2VydmljZSBhY2NvdW50IGRhdGEgc2hvdWxkIGJlIGFuIG9iamVjdCcpO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICBpdGVtRXhpc3RzKG1zZ0JvZHksICdjb250ZXh0JykgJiZcbiAgICAgIGl0ZW1FeGlzdHMobXNnQm9keS5jb250ZXh0LCAndXNlcicpICYmXG4gICAgICBpdGVtRXhpc3RzKG1zZ0JvZHkuY29udGV4dC51c2VyLCAnYWNjb3VudElkJylcbiAgICApIHtcbiAgICAgIGNvbnN0IGN1cnJBY2NEYXRhID0gYXdhaXQgZ2V0Q3VycmVudEFjY291bnREYXRhKEFXUywgbXNnQm9keS5jb250ZXh0LnVzZXIuYWNjb3VudElkKTtcbiAgICAgIGlmICghaXRlbUV4aXN0cyhjdXJyQWNjRGF0YSwgJ3NoYXJlZFZlbmRvckRhdGEnKSkge1xuICAgICAgICBjdXJyQWNjRGF0YS5zaGFyZWRWZW5kb3JEYXRhID0ge307XG4gICAgICB9XG4gICAgICBpZiAoIWl0ZW1FeGlzdHMoY3VyckFjY0RhdGEuc2hhcmVkVmVuZG9yRGF0YSwgYCR7c2VydmljZX1gKSkge1xuICAgICAgICBjdXJyQWNjRGF0YS5zaGFyZWRWZW5kb3JEYXRhW2Ake3NlcnZpY2V9YF0gPSB7fTtcbiAgICAgIH1cbiAgICAgIGN1cnJBY2NEYXRhLnNoYXJlZFZlbmRvckRhdGFbYCR7c2VydmljZX1gXSA9IHtcbiAgICAgICAgLi4uY3VyckFjY0RhdGEuc2hhcmVkVmVuZG9yRGF0YVtgJHtzZXJ2aWNlfWBdLFxuICAgICAgICAuLi5wcm9jUmVzLndvcmtlclJlc3Auc2hhcmVkTWljcm9BcHBsaWNhdGlvbkFjY291bnREYXRhLFxuICAgICAgfTtcbiAgICAgIGF3YWl0IGJhdGNoUHV0SW50b0R5bmFtb0RiKEFXUywgW2N1cnJBY2NEYXRhXSwgJ0FjY291bnQnKTtcbiAgICB9XG4gIH1cblxuICBpZiAoaXRlbUV4aXN0cyhwcm9jUmVzLndvcmtlclJlc3AsICdzZXJ2aWNlVXNlckRhdGEnKSkge1xuICAgIGlmICh0eXBlb2YgcHJvY1Jlcy53b3JrZXJSZXNwLnNlcnZpY2VVc2VyRGF0YSAhPT0gJ29iamVjdCcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignU2VydmljZSBzcGVjaWZpYyB1c2VyIGRhdGEgc2hvdWxkIGJlIGFuIG9iamVjdCcpO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICBpdGVtRXhpc3RzKG1zZ0JvZHksICdjb250ZXh0JykgJiZcbiAgICAgIGl0ZW1FeGlzdHMobXNnQm9keS5jb250ZXh0LCAndXNlcicpICYmXG4gICAgICBpdGVtRXhpc3RzKG1zZ0JvZHkuY29udGV4dC51c2VyLCAndXNlcklkJylcbiAgICApIHtcbiAgICAgIGNvbnN0IGN1cnJVc2VyRGF0YSA9IGF3YWl0IGdldEN1cnJlbnRVc2VyRGF0YShBV1MsIG1zZ0JvZHkuY29udGV4dC51c2VyLnVzZXJJZCk7XG4gICAgICBpZiAoIWl0ZW1FeGlzdHMoY3VyclVzZXJEYXRhLCAndmVuZG9yRGF0YScpKSB7XG4gICAgICAgIGN1cnJVc2VyRGF0YS52ZW5kb3JEYXRhID0ge307XG4gICAgICB9XG4gICAgICBpZiAoIWl0ZW1FeGlzdHMoY3VyclVzZXJEYXRhLnZlbmRvckRhdGEsIGAke3NlcnZpY2V9YCkpIHtcbiAgICAgICAgY3VyclVzZXJEYXRhLnZlbmRvckRhdGFbYCR7c2VydmljZX1gXSA9IHt9O1xuICAgICAgfVxuICAgICAgY3VyclVzZXJEYXRhLnZlbmRvckRhdGFbYCR7c2VydmljZX1gXSA9IHtcbiAgICAgICAgLi4uY3VyclVzZXJEYXRhLnZlbmRvckRhdGFbYCR7c2VydmljZX1gXSxcbiAgICAgICAgLi4ucHJvY1Jlcy53b3JrZXJSZXNwLnNlcnZpY2VVc2VyRGF0YSxcbiAgICAgIH07XG4gICAgICBhd2FpdCBiYXRjaFB1dEludG9EeW5hbW9EYihBV1MsIFtjdXJyVXNlckRhdGFdLCAnVXNlcicpO1xuICAgIH1cbiAgfVxuXG4gIGlmIChpdGVtRXhpc3RzKHByb2NSZXMud29ya2VyUmVzcCwgJ3NoYXJlZE1pY3JvQXBwbGljYXRpb25Vc2VyRGF0YScpKSB7XG4gICAgaWYgKHR5cGVvZiBwcm9jUmVzLndvcmtlclJlc3Auc2hhcmVkTWljcm9BcHBsaWNhdGlvblVzZXJEYXRhICE9PSAnb2JqZWN0Jykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdTaGFyZWQgc2VydmljZSB1c2VyIGRhdGEgc2hvdWxkIGJlIGFuIG9iamVjdCcpO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICBpdGVtRXhpc3RzKG1zZ0JvZHksICdjb250ZXh0JykgJiZcbiAgICAgIGl0ZW1FeGlzdHMobXNnQm9keS5jb250ZXh0LCAndXNlcicpICYmXG4gICAgICBpdGVtRXhpc3RzKG1zZ0JvZHkuY29udGV4dC51c2VyLCAndXNlcklkJylcbiAgICApIHtcbiAgICAgIGNvbnN0IGN1cnJVc2VyRGF0YSA9IGF3YWl0IGdldEN1cnJlbnRVc2VyRGF0YShBV1MsIG1zZ0JvZHkuY29udGV4dC51c2VyLnVzZXJJZCk7XG4gICAgICBpZiAoIWl0ZW1FeGlzdHMoY3VyclVzZXJEYXRhLCAnc2hhcmVkTWljcm9BcHBsaWNhdGlvblVzZXJEYXRhJykpIHtcbiAgICAgICAgY3VyclVzZXJEYXRhLnNoYXJlZE1pY3JvQXBwbGljYXRpb25Vc2VyRGF0YSA9IHt9O1xuICAgICAgfVxuICAgICAgaWYgKCFpdGVtRXhpc3RzKGN1cnJVc2VyRGF0YS5zaGFyZWRNaWNyb0FwcGxpY2F0aW9uVXNlckRhdGEsIGAke3NlcnZpY2V9YCkpIHtcbiAgICAgICAgY3VyclVzZXJEYXRhLnNoYXJlZE1pY3JvQXBwbGljYXRpb25Vc2VyRGF0YVtgJHtzZXJ2aWNlfWBdID0ge307XG4gICAgICB9XG4gICAgICBjdXJyVXNlckRhdGEuc2hhcmVkTWljcm9BcHBsaWNhdGlvblVzZXJEYXRhW2Ake3NlcnZpY2V9YF0gPSB7XG4gICAgICAgIC4uLmN1cnJVc2VyRGF0YS5zaGFyZWRNaWNyb0FwcGxpY2F0aW9uVXNlckRhdGFbYCR7c2VydmljZX1gXSxcbiAgICAgICAgLi4ucHJvY1Jlcy53b3JrZXJSZXNwLnNoYXJlZE1pY3JvQXBwbGljYXRpb25Vc2VyRGF0YSxcbiAgICAgIH07XG4gICAgICBhd2FpdCBiYXRjaFB1dEludG9EeW5hbW9EYihBV1MsIFtjdXJyVXNlckRhdGFdLCAnVXNlcicpO1xuICAgIH1cbiAgfVxuXG4gIGlmIChpdGVtRXhpc3RzKHByb2NSZXMud29ya2VyUmVzcCwgJ2NybURhdGEnKSkge1xuICAgIGlmICh0eXBlb2YgcHJvY1Jlcy53b3JrZXJSZXNwLmNybURhdGEgIT09ICdvYmplY3QnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RhdGEgZ29pbmcgdG8gYSBDUk0gc2hvdWxkIGJlIGFuIG9iamVjdCcpO1xuICAgIH1cbiAgICBpZiAoT2JqZWN0LmtleXMocHJvY1Jlcy53b3JrZXJSZXNwLmNybURhdGEpLmxlbmd0aCA+IDApIHtcbiAgICAgIGF3YWl0IGVzLnB1Ymxpc2goXG4gICAgICAgIEFXUyxcbiAgICAgICAgYGFybjphd3M6c25zOiR7cmVnaW9ufToke2FjY291bnR9OmV2ZW50LWJ1c2AsXG4gICAgICAgIHtcbiAgICAgICAgICAuLi5tc2dCb2R5LFxuICAgICAgICAgIHBheWxvYWQ6IHByb2NSZXMud29ya2VyUmVzcC5jcm1EYXRhLFxuICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICBldmVudFR5cGU6ICdzZW5kRmllbGRzJyxcbiAgICAgICAgICAgIGRhdGVDcmVhdGVkOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgb3BlcmF0aW9uVHlwZTogJ3VwZGF0ZScsXG4gICAgICAgICAgICBpbnZvY2F0aW9uU291cmNlOiBzZXJ2aWNlLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAuLi5tc2dBdHRyaWJzLFxuICAgICAgICAgIHN0YXR1czogJ3RyaWdnZXInLFxuICAgICAgICAgIGV2ZW50VHlwZTogJ2NybScsXG4gICAgICAgICAgZXZlbnRJZDogdXVpZCgpLFxuICAgICAgICAgIGVtaXR0ZXI6IHNlcnZpY2UsXG4gICAgICAgIH0sXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIGxldCBwYXlsb2FkO1xuXG4gIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocHJvY1JlcywgJ3dvcmtlclJlc3AnKSkge1xuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocHJvY1Jlcy53b3JrZXJSZXNwLCAncmVzJykpIHtcbiAgICAgIHBheWxvYWQgPSBwcm9jUmVzLndvcmtlclJlc3AucmVzO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYXlsb2FkID0gcHJvY1Jlcy53b3JrZXJSZXNwO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBwYXlsb2FkID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgY29uc3QgZ2V0Q29tcGxldGVTdGF0dXMgPSAocHJvY1Jlc3VsdCkgPT4ge1xuICAgIGxldCByZXN1bHQgPSBwcm9jUmVzdWx0LnN0YXR1cztcbiAgICBpZiAoXG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocHJvY1Jlc3VsdCwgJ3dvcmtlclJlc3AnKSAmJlxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHByb2NSZXN1bHQud29ya2VyUmVzcCwgJ2V4dHJhU3RhdHVzJylcbiAgICApIHtcbiAgICAgIHJlc3VsdCA9IGAke3Jlc3VsdH0tJHtwcm9jUmVzdWx0LndvcmtlclJlc3AuZXh0cmFTdGF0dXN9YDtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBQdWJsaXNoIHRoZSByZXNwb25zZSBTTlMgZXZlbnRcbiAgYXdhaXQgZXMucHVibGlzaChcbiAgICBBV1MsXG4gICAgYGFybjphd3M6c25zOiR7cmVnaW9ufToke2FjY291bnR9OmV2ZW50LWJ1c2AsXG4gICAge1xuICAgICAgLi4ubXNnQm9keSxcbiAgICAgIGlucHV0UGF5bG9hZDogbXNnQm9keS5wYXlsb2FkLFxuICAgICAgcGF5bG9hZCxcbiAgICB9LFxuICAgIHtcbiAgICAgIC4uLm1zZ0F0dHJpYnMsXG4gICAgICBzdGF0dXM6IGdldENvbXBsZXRlU3RhdHVzKHByb2NSZXMpLFxuICAgICAgZXZlbnRJZDogdXVpZCgpLFxuICAgICAgZW1pdHRlcjogc2VydmljZSxcbiAgICB9LFxuICApO1xuXG4gIC8vIERlbGV0ZSB0aGUgbWVzc2FnZSBmcm9tIHRoZSBxdWV1ZSB1c2luZyB0aGUgcmNwdEhhbmRsZSwgaWYgYXZhaWxhYmxlLlxuICBpZiAodHlwZW9mIHJjcHRIYW5kbGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgYXdhaXQgZGVsZXRlTXNnRnJvbVF1ZXVlKFxuICAgICAgQVdTLFxuICAgICAgcmVnaW9uLFxuICAgICAgbXNnQXR0cmlicy5ldmVudFR5cGUgPT09ICd0cmFuc2l0aW9uJ1xuICAgICAgICA/IGBodHRwczovL3Nxcy4ke3JlZ2lvbn0uYW1hem9uYXdzLmNvbS8ke2FjY291bnR9LyR7c2VydmljZX0tYnVsa3RxYFxuICAgICAgICA6IGBodHRwczovL3Nxcy4ke3JlZ2lvbn0uYW1hem9uYXdzLmNvbS8ke2FjY291bnR9LyR7c2VydmljZX0tYnVsa2ZxYCxcbiAgICAgIHJjcHRIYW5kbGUsXG4gICAgKTtcbiAgfVxuXG4gIC8vIElmIHRoZSBzdGF0dXMgb2YgdGhlIHByb2Nlc3MgcmVzcG9uc2UgaXMgJ2ZhaWwnLCBzZW5kIHRoZSBtZXNzYWdlIHRvIExhbWJkYVxuICAvLyBETFFcbiAgaWYgKHByb2NSZXMuc3RhdHVzID09PSAnZmFpbCcpIHtcbiAgICBzZW5kU3FzTXNnKFxuICAgICAgQVdTLFxuICAgICAgcmVnaW9uLFxuICAgICAgYGh0dHBzOi8vc3FzLiR7cmVnaW9ufS5hbWF6b25hd3MuY29tLyR7YWNjb3VudH0vJHtzZXJ2aWNlfS1sZGxxYCxcbiAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgZmFpbGVkSW46IHNlcnZpY2UsXG4gICAgICAgIGJvZHk6IHtcbiAgICAgICAgICBNZXNzYWdlOiBtc2dCb2R5LFxuICAgICAgICAgIE1lc3NhZ2VBdHRyaWJ1dGVzOiBtc2dBdHRyaWJzLFxuICAgICAgICAgIEVycm9yOiBwcm9jUmVzLmVycm9yLFxuICAgICAgICB9LFxuICAgICAgfSksXG4gICAgKTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn07XG4iLCJpbXBvcnQgeyBmZXRjaFJlY29yZHNCeVF1ZXJ5LCBpbmNyZW1lbnRDb2x1bW4gfSBmcm9tICcuL2R5bmFtbyc7XG5pbXBvcnQgeyBzbGVlcCB9IGZyb20gJy4vdXRpbCc7XG5cbi8qKlxuICogRmV0Y2hlcyBhbmQgcmV0dXJucyB0aGUgbnVtYmVyIG9mIGNhbGxzIG1hZGUgdG8gdGhlIHNlcnZpY2UgZm9yIHRoZSBnaXZlblxuICogZGF5LCBob3VyLCBtaW51dGUgYW5kIHNlY29uZFxuICogQHBhcmFtIHtvYmplY3R9IEFXUyBpcyB0aGUgQVdTIHNkayBpbnN0YW5jZSB0aGF0IG5lZWRzIHRvIGJlIHBhc3NlZCBmcm9tIHRoZSBoYW5kbGVyXG4gKiBAcGFyYW0ge1N0cmluZ30gc2VydmljZU5hbWUgaXMgdGhlIHNlcnZpY2UgZm9yIHdoaWNoIHRoZSBtZXRyaWNzIGFyZSB0byBiZSBmZXRjaGVkXG4gKiBAcmV0dXJucyB7eyBzZWNvbmQ6IE51bWJlciwgbWludXRlOiBOdW1iZXIsIGhvdXI6IE51bWJlciwgZGF5OiBOdW1iZXIgfX1cbiAqL1xuZXhwb3J0IGNvbnN0IGdldENhbGxzTWFkZSA9IGFzeW5jIChBV1MsIHNlcnZpY2VOYW1lKSA9PiB7XG4gIGNvbnN0IGN1cnJNcyA9IERhdGUubm93KCk7XG4gIC8vIEdldCB0aGUgbmV4dCBzZWNvbmQgKHdpdGhvdXQgdGhlIG1pbGxpc2Vjb25kcylcbiAgY29uc3QgY3VyclNlYyA9IE1hdGguZmxvb3IoY3Vyck1zIC8gMTAwMCkgKyAxO1xuICAvLyBHZXQgdGhlIG5leHQgbWludXRlIGF0IGl0cyBzZWNvbmQgMFxuICBjb25zdCBjdXJyTWluID0gY3VyclNlYyAtIChjdXJyU2VjICUgNjApICsgNjA7XG4gIC8vIEdldCB0aGUgbmV4dCBob3VyIGF0IGl0cyAwdGggbWludXRlIGFuZCAwdGggc2Vjb25kXG4gIGNvbnN0IGN1cnJIciA9IGN1cnJNaW4gLSAoY3Vyck1pbiAlICg2MCAqIDYwKSkgKyA2MCAqIDYwO1xuICAvLyBHZXQgdGhlIG5leHQgZGF5IGF0IDAwOjAwOjAwXG4gIGNvbnN0IGN1cnJEYXkgPSBjdXJySHIgLSAoY3VyckhyICUgKDI0ICogNjAgKiA2MCkpICsgMjQgKiA2MCAqIDYwO1xuXG4gIC8vIENvbnN0cnVjdCB0aGUgY29tbW9uIHByb3BlcnRpZXMgZm9yIHRoZSBuZXh0IHF1ZXJpZXNcbiAgY29uc3QgcXVlcnlPYmogPSB7XG4gICAgVGFibGVOYW1lOiAnYXBpQ2FsbENvdW50JyxcbiAgICBFeHByZXNzaW9uQXR0cmlidXRlTmFtZXM6IHsgJyNwayc6ICdzZXJ2aWNlQW5kRHVyYXRpb24nLCAnI2V0JzogJ2V4cGlyeVRpbWUnIH0sXG4gICAgS2V5Q29uZGl0aW9uRXhwcmVzc2lvbjogJyNwayA9IDpzZCBBTkQgI2V0ID0gOmV0JyxcbiAgfTtcblxuICAvLyBHZW5lcmF0ZSBhIGxpc3Qgb2YgcHJvbWlzZXMgdG8gZ2V0IHRoZSByZWNvcmRzIGZvciBjdXJyZW50IHNlY29uZCwgbWludXRlLFxuICAvLyBob3VyIGFuZCBkYXlcbiAgY29uc3QgcHJvbXMgPSBbXG4gICAgZmV0Y2hSZWNvcmRzQnlRdWVyeShBV1MsIHtcbiAgICAgIC4uLnF1ZXJ5T2JqLFxuICAgICAgRXhwcmVzc2lvbkF0dHJpYnV0ZVZhbHVlczoge1xuICAgICAgICAnOnNkJzogeyBTOiBgJHtzZXJ2aWNlTmFtZX0tc2Vjb25kYCB9LFxuICAgICAgICAnOmV0JzogeyBOOiBjdXJyU2VjLnRvU3RyaW5nKCkgfSxcbiAgICAgIH0sXG4gICAgfSksXG4gICAgZmV0Y2hSZWNvcmRzQnlRdWVyeShBV1MsIHtcbiAgICAgIC4uLnF1ZXJ5T2JqLFxuICAgICAgRXhwcmVzc2lvbkF0dHJpYnV0ZVZhbHVlczoge1xuICAgICAgICAnOnNkJzogeyBTOiBgJHtzZXJ2aWNlTmFtZX0tbWludXRlYCB9LFxuICAgICAgICAnOmV0JzogeyBOOiBjdXJyTWluLnRvU3RyaW5nKCkgfSxcbiAgICAgIH0sXG4gICAgfSksXG4gICAgZmV0Y2hSZWNvcmRzQnlRdWVyeShBV1MsIHtcbiAgICAgIC4uLnF1ZXJ5T2JqLFxuICAgICAgRXhwcmVzc2lvbkF0dHJpYnV0ZVZhbHVlczoge1xuICAgICAgICAnOnNkJzogeyBTOiBgJHtzZXJ2aWNlTmFtZX0taG91cmAgfSxcbiAgICAgICAgJzpldCc6IHsgTjogY3VyckhyLnRvU3RyaW5nKCkgfSxcbiAgICAgIH0sXG4gICAgfSksXG4gICAgZmV0Y2hSZWNvcmRzQnlRdWVyeShBV1MsIHtcbiAgICAgIC4uLnF1ZXJ5T2JqLFxuICAgICAgRXhwcmVzc2lvbkF0dHJpYnV0ZVZhbHVlczoge1xuICAgICAgICAnOnNkJzogeyBTOiBgJHtzZXJ2aWNlTmFtZX0tZGF5YCB9LFxuICAgICAgICAnOmV0JzogeyBOOiBjdXJyRGF5LnRvU3RyaW5nKCkgfSxcbiAgICAgIH0sXG4gICAgfSksXG4gIF07XG5cbiAgLy8gV2FpdCBmb3IgdGhlIHByb21pc2VzIHRvIGNvbXBsZXRlXG4gIGNvbnN0IHByb21SZXMgPSBhd2FpdCBQcm9taXNlLmFsbChwcm9tcyk7XG5cbiAgLy8gUmV0dXJuIHRoZSBjYWxsIGNvdW50cyBmcm9tIHRoZSBwcm9taXNlIHJlc3VsdHNcbiAgcmV0dXJuIHtcbiAgICBzZWNvbmQ6IHByb21SZXNbMF0uY2FsbENvdW50ID8gcHJvbVJlc1swXS5jYWxsQ291bnQgOiAwLFxuICAgIG1pbnV0ZTogcHJvbVJlc1sxXS5jYWxsQ291bnQgPyBwcm9tUmVzWzFdLmNhbGxDb3VudCA6IDAsXG4gICAgaG91cjogcHJvbVJlc1syXS5jYWxsQ291bnQgPyBwcm9tUmVzWzJdLmNhbGxDb3VudCA6IDAsXG4gICAgZGF5OiBwcm9tUmVzWzNdLmNhbGxDb3VudCA/IHByb21SZXNbM10uY2FsbENvdW50IDogMCxcbiAgfTtcbn07XG5cbi8qKlxuICogR2V0cyB0aGUgY291bnQgb2YgY2FsbHMgdGhhdCBjYW4gYmUgbWFkZSB0aGlzIHNlY29uZCB3aXRob3V0IGhpdHRpbmcgdGhlXG4gKiB0aHJvdHRsZSBsaW1pdFxuICogQHBhcmFtIHtvYmplY3R9IEFXUyBpcyB0aGUgQVdTIHNkayBpbnN0YW5jZSB0aGF0IG5lZWRzIHRvIGJlIHBhc3NlZCBmcm9tIHRoZSBoYW5kbGVyXG4gKiBAcGFyYW0ge1N0cmluZ30gc2VydmljZU5hbWUgaXMgdGhlIG5hbWUgb2YgdGhlIHNlcnZpY2UgZm9yIHdoaWNoIHRoZSBjb3VudCBpcyByZXF1aXJlZFxuICogQHBhcmFtIHtCb29sZWFufSBidWxrIHRlbGxzIHdoZXRoZXIgdGhlIGNhbGwgaXMgZ29pbmcgdG8gYmUgYnVsayBvciBkaXJlY3RcbiAqIEByZXR1cm5zIHtOdW1iZXJ9XG4gKi9cbmV4cG9ydCBjb25zdCBnZXRBdmFpbGFibGVDYWxsc1RoaXNTZWMgPSBhc3luYyAoXG4gIEFXUyxcbiAgeyB0aHJvdHRsZUxtdHMsIHNhZmVUaHJvdHRsZUxpbWl0LCByZXNlcnZlQ2FwRm9yRGlyZWN0LCByZXRyeUNudEZvckNhcGFjaXR5IH0sXG4gIHNlcnZpY2VOYW1lLFxuICBidWxrID0gdHJ1ZSxcbiAgaXRlciA9IDAsXG4pID0+IHtcbiAgaWYgKGl0ZXIgPiByZXRyeUNudEZvckNhcGFjaXR5KSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICBpZiAoaXRlciA+IDApIHtcbiAgICBhd2FpdCBzbGVlcCgxMDAwKTtcbiAgfVxuICBjb25zdCB0aHJvdExtdHMgPSBKU09OLnBhcnNlKHRocm90dGxlTG10cyk7XG4gIGlmIChcbiAgICB0eXBlb2YgdGhyb3RMbXRzLmRheSA9PT0gJ3VuZGVmaW5lZCcgJiZcbiAgICB0eXBlb2YgdGhyb3RMbXRzLmhvdXIgPT09ICd1bmRlZmluZWQnICYmXG4gICAgdHlwZW9mIHRocm90TG10cy5taW51dGUgPT09ICd1bmRlZmluZWQnICYmXG4gICAgdHlwZW9mIHRocm90TG10cy5zZWNvbmQgPT09ICd1bmRlZmluZWQnXG4gICkge1xuICAgIHJldHVybiAxMDAwMDAwO1xuICB9XG5cbiAgY29uc3QgcmVzRmFjdCA9IGJ1bGsgPT09IHRydWUgPyAoMSAtIHJlc2VydmVDYXBGb3JEaXJlY3QpICogc2FmZVRocm90dGxlTGltaXQgOiAxICogc2FmZVRocm90dGxlTGltaXQ7XG4gIGNvbnN0IGNhbGxzTWFkZSA9IGF3YWl0IGdldENhbGxzTWFkZShBV1MsIHNlcnZpY2VOYW1lKTtcbiAgbGV0IGF2YWlsTG10ID0gJ3gnO1xuICBpZiAoXG4gICAgdHlwZW9mIHRocm90TG10cy5kYXkgIT09ICd1bmRlZmluZWQnICYmXG4gICAgKE1hdGguZmxvb3IodGhyb3RMbXRzLmRheSAqIHJlc0ZhY3QgLSBjYWxsc01hZGUuZGF5KSA8IGF2YWlsTG10IHx8IGF2YWlsTG10ID09PSAneCcpXG4gICkge1xuICAgIGF2YWlsTG10ID0gTWF0aC5mbG9vcigodGhyb3RMbXRzLmRheSAtIGNhbGxzTWFkZS5kYXkpICogcmVzRmFjdCk7XG4gIH1cblxuICBpZiAoXG4gICAgdHlwZW9mIHRocm90TG10cy5ob3VyICE9PSAndW5kZWZpbmVkJyAmJlxuICAgIChNYXRoLmZsb29yKHRocm90TG10cy5ob3VyICogcmVzRmFjdCAtIGNhbGxzTWFkZS5ob3VyKSA8IGF2YWlsTG10IHx8IGF2YWlsTG10ID09PSAneCcpXG4gICkge1xuICAgIGF2YWlsTG10ID0gTWF0aC5mbG9vcigodGhyb3RMbXRzLmhvdXIgLSBjYWxsc01hZGUuaG91cikgKiByZXNGYWN0KTtcbiAgfVxuXG4gIGlmIChcbiAgICB0eXBlb2YgdGhyb3RMbXRzLm1pbnV0ZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAoTWF0aC5mbG9vcih0aHJvdExtdHMubWludXRlICogcmVzRmFjdCAtIGNhbGxzTWFkZS5taW51dGUpIDwgYXZhaWxMbXQgfHwgYXZhaWxMbXQgPT09ICd4JylcbiAgKSB7XG4gICAgYXZhaWxMbXQgPSBNYXRoLmZsb29yKCh0aHJvdExtdHMubWludXRlIC0gY2FsbHNNYWRlLm1pbnV0ZSkgKiByZXNGYWN0KTtcbiAgfVxuXG4gIGlmIChcbiAgICB0eXBlb2YgdGhyb3RMbXRzLnNlY29uZCAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAoTWF0aC5mbG9vcih0aHJvdExtdHMuc2Vjb25kICogcmVzRmFjdCAtIGNhbGxzTWFkZS5zZWNvbmQpIDwgYXZhaWxMbXQgfHwgYXZhaWxMbXQgPT09ICd4JylcbiAgKSB7XG4gICAgYXZhaWxMbXQgPSBNYXRoLmZsb29yKCh0aHJvdExtdHMuc2Vjb25kIC0gY2FsbHNNYWRlLnNlY29uZCkgKiByZXNGYWN0KTtcbiAgfVxuXG4gIHJldHVybiBhdmFpbExtdCA+IDBcbiAgICA/IGF2YWlsTG10XG4gICAgOiBnZXRBdmFpbGFibGVDYWxsc1RoaXNTZWMoXG4gICAgICAgIEFXUyxcbiAgICAgICAge1xuICAgICAgICAgIHRocm90dGxlTG10cyxcbiAgICAgICAgICBzYWZlVGhyb3R0bGVMaW1pdCxcbiAgICAgICAgICByZXNlcnZlQ2FwRm9yRGlyZWN0LFxuICAgICAgICAgIHJldHJ5Q250Rm9yQ2FwYWNpdHksXG4gICAgICAgIH0sXG4gICAgICAgIHNlcnZpY2VOYW1lLFxuICAgICAgICBidWxrLFxuICAgICAgICBpdGVyICsgMSxcbiAgICAgICk7XG59O1xuXG4vKipcbiAqIEluY3JlbWVudHMgdGhlIHBlciBzZWNvbmQsIG1pbnV0ZSwgaG91ciBhbmQgZGF5IGNhbGxzIG1hZGUgY291bnQgdG8gdGhlXG4gKiBnaXZlbiBpbmNyZW1lbnQgY291bnQgd2hpY2ggaXMgMSBieSBkZWZhdWx0XG4gKiBAcGFyYW0ge29iamVjdH0gQVdTIGlzIHRoZSBBV1Mgc2RrIGluc3RhbmNlIHRoYXQgbmVlZHMgdG8gYmUgcGFzc2VkIGZyb20gdGhlIGhhbmRsZXJcbiAqIEBwYXJhbSB7U3RyaW5nfSBzZXJ2aWNlTmFtZSBpcyB0aGUgbmFtZSBvZiB0aGUgc2VydmljZVxuICogQHBhcmFtIHtOdW1iZXJ9IGluY1ZhbCBpcyB0aGUgaW5jcmVtZW50IHZhbHVlLiBEZWZhdWx0cyB0byAxXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAqL1xuZXhwb3J0IGNvbnN0IGluY3JlbWVudFVzZWRDb3VudCA9IGFzeW5jIChBV1MsIHNlcnZpY2VOYW1lLCBpbmNWYWwgPSAxKSA9PiB7XG4gIGNvbnN0IGN1cnJNcyA9IERhdGUubm93KCk7XG4gIGNvbnN0IGN1cnJTZWMgPSBNYXRoLmZsb29yKGN1cnJNcyAvIDEwMDApICsgMTtcbiAgY29uc3QgY3Vyck1pbiA9IGN1cnJTZWMgLSAoY3VyclNlYyAlIDYwKSArIDYwO1xuICBjb25zdCBjdXJySHIgPSBjdXJyTWluIC0gKGN1cnJNaW4gJSAoNjAgKiA2MCkpICsgNjAgKiA2MDtcbiAgY29uc3QgY3VyckRheSA9IGN1cnJIciAtIChjdXJySHIgJSAoMjQgKiA2MCAqIDYwKSkgKyAyNCAqIDYwICogNjA7XG5cbiAgY29uc3QgcHJvbXMgPSBbXG4gICAgaW5jcmVtZW50Q29sdW1uKFxuICAgICAgQVdTLFxuICAgICAgJ2FwaUNhbGxDb3VudCcsXG4gICAgICB7XG4gICAgICAgIHNlcnZpY2VBbmREdXJhdGlvbjogYCR7c2VydmljZU5hbWV9LXNlY29uZGAsXG4gICAgICAgIGV4cGlyeVRpbWU6IGN1cnJTZWMsXG4gICAgICB9LFxuICAgICAgJ2NhbGxDb3VudCcsXG4gICAgICBpbmNWYWwsXG4gICAgKSxcbiAgICBpbmNyZW1lbnRDb2x1bW4oXG4gICAgICBBV1MsXG4gICAgICAnYXBpQ2FsbENvdW50JyxcbiAgICAgIHtcbiAgICAgICAgc2VydmljZUFuZER1cmF0aW9uOiBgJHtzZXJ2aWNlTmFtZX0tbWludXRlYCxcbiAgICAgICAgZXhwaXJ5VGltZTogY3Vyck1pbixcbiAgICAgIH0sXG4gICAgICAnY2FsbENvdW50JyxcbiAgICAgIGluY1ZhbCxcbiAgICApLFxuICAgIGluY3JlbWVudENvbHVtbihcbiAgICAgIEFXUyxcbiAgICAgICdhcGlDYWxsQ291bnQnLFxuICAgICAge1xuICAgICAgICBzZXJ2aWNlQW5kRHVyYXRpb246IGAke3NlcnZpY2VOYW1lfS1ob3VyYCxcbiAgICAgICAgZXhwaXJ5VGltZTogY3VyckhyLFxuICAgICAgfSxcbiAgICAgICdjYWxsQ291bnQnLFxuICAgICAgaW5jVmFsLFxuICAgICksXG4gICAgaW5jcmVtZW50Q29sdW1uKFxuICAgICAgQVdTLFxuICAgICAgJ2FwaUNhbGxDb3VudCcsXG4gICAgICB7XG4gICAgICAgIHNlcnZpY2VBbmREdXJhdGlvbjogYCR7c2VydmljZU5hbWV9LWRheWAsXG4gICAgICAgIGV4cGlyeVRpbWU6IGN1cnJEYXksXG4gICAgICB9LFxuICAgICAgJ2NhbGxDb3VudCcsXG4gICAgICBpbmNWYWwsXG4gICAgKSxcbiAgXTtcbiAgYXdhaXQgUHJvbWlzZS5hbGwocHJvbXMpO1xuICByZXR1cm4gdHJ1ZTtcbn07XG4iLCJpbXBvcnQgeyBoYW5kbGVyIGFzIGZIIH0gZnJvbSAnLi9oYW5kbGVycy9mZXRjaCc7XG5pbXBvcnQgeyBoYW5kbGVyIGFzIGJGSCB9IGZyb20gJy4vaGFuZGxlcnMvYnVsa0ZldGNoJztcbmltcG9ydCB7IGhhbmRsZXIgYXMgZFRIIH0gZnJvbSAnLi9oYW5kbGVycy9kaXJlY3RUcmFuc2l0aW9uJztcbmltcG9ydCB7IGhhbmRsZXIgYXMgYlRIIH0gZnJvbSAnLi9oYW5kbGVycy9idWxrVHJhbnNpdGlvbic7XG5pbXBvcnQgeyBoYW5kbGVyIGFzIHNEYiB9IGZyb20gJy4vaGFuZGxlcnMvc2V0dXBEYXRhYmFzZSc7XG5pbXBvcnQgeyBoYW5kbGVyIGFzIGdwSCB9IGZyb20gJy4vaGFuZGxlcnMvZ2V0UG9zdEh0dHAnO1xuaW1wb3J0IHsgaGFuZGxlciBhcyB3SCB9IGZyb20gJy4vaGFuZGxlcnMvd2ViaG9vayc7XG5cbi8qKlxuICogVGhpcyBpcyB0aGUgZmV0Y2ggcmVxdWVzdCBoYW5kbGVyXG4gKiBAcGFyYW0ge29iamVjdH0gQVdTIGlzIHRoZSBBV1Mgc2RrIGluc3RhbmNlIHRoYXQgbmVlZHMgdG8gYmUgcGFzc2VkIGZyb20gdGhlIGhhbmRsZXJcbiAqIEBwYXJhbSB7IHRocm90dGxlTG10czogb2JqZWN0LCBzYWZlVGhyb3R0bGVMaW1pdDogaW50LCByZXNlcnZlQ2FwRm9yRGlyZWN0OiBpbnQsIHJldHJ5Q250Rm9yQ2FwYWNpdHk6IGludCB9IGFyZSB0aGUgdGhyb3R0bGUgbGltaXRzXG4gKiBAcGFyYW0ge3N0cmluZ30gciBpcyB0aGUgcmVnaW9uIG9mIEFXUyB0aGF0IHRoaXMgc2VydmljZSBpcyBydW5uaW5nIGluXG4gKiBAcGFyYW0ge3N0cmluZ30gcyBzZXJ2aWNlIGlzIHRoZSBuYW1lIG9mIHRoZSBzZXJ2aWNlXG4gKiBAcGFyYW0ge3N0cmluZ30gYSBhY2NvdW50IGlzIEFXUyB0aGUgYWNjb3VudCBudW1iZXJcbiAqIEBwYXJhbSB7b2JqZWN0fSBiIGlzIHRoZSBldmVudCBpbnB1dFxuICogQHBhcmFtIHtmdW5jdGlvbn0gYyBpcyB0aGUgd29ya2VyIGZ1bmN0aW9uIHRoYXQgaGFzIHRoZSBidXNpbmVzcyBsb2dpYyB0byBwcm9jZXNzIHRoZSByZXF1ZXN0XG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBoIGlzIHRoZSBwcmV3b3JrZXIgaG9va1xuICovXG5leHBvcnQgY29uc3QgZmV0Y2hIYW5kbGVyID0gYXN5bmMgKFxuICBBV1MsXG4gIHtcbiAgICB0aHJvdHRsZUxtdHMsXG4gICAgc2FmZVRocm90dGxlTGltaXQsXG4gICAgcmVzZXJ2ZUNhcEZvckRpcmVjdCxcbiAgICByZXRyeUNudEZvckNhcGFjaXR5LFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBhcnJvdy1ib2R5LXN0eWxlXG4gIH0sXG4gIHIsXG4gIHMsXG4gIGEsXG4gIGIsXG4gIGMsXG4gIGgsXG4pID0+IHtcbiAgcmV0dXJuIGZIKFxuICAgIEFXUyxcbiAgICB7XG4gICAgICB0aHJvdHRsZUxtdHMsXG4gICAgICBzYWZlVGhyb3R0bGVMaW1pdCxcbiAgICAgIHJlc2VydmVDYXBGb3JEaXJlY3QsXG4gICAgICByZXRyeUNudEZvckNhcGFjaXR5LFxuICAgIH0sXG4gICAgcixcbiAgICBzLFxuICAgIGEsXG4gICAgYixcbiAgICBjLFxuICAgIGgsXG4gICk7XG59O1xuXG4vKipcbiAqIFRoaXMgaXMgdGhlIGZldGNoIHJlcXVlc3QgaGFuZGxlclxuICogQHBhcmFtIHtvYmplY3R9IEFXUyBpcyB0aGUgQVdTIHNkayBpbnN0YW5jZSB0aGF0IG5lZWRzIHRvIGJlIHBhc3NlZCBmcm9tIHRoZSBoYW5kbGVyXG4gKiBAcGFyYW0geyB0aHJvdHRsZUxtdHM6IG9iamVjdCwgc2FmZVRocm90dGxlTGltaXQ6IGludCwgcmVzZXJ2ZUNhcEZvckRpcmVjdDogaW50LCByZXRyeUNudEZvckNhcGFjaXR5OiBpbnQgfSBhcmUgdGhlIHRocm90dGxlIGxpbWl0c1xuICogQHBhcmFtIHtzdHJpbmd9IHIgaXMgdGhlIHJlZ2lvbiBvZiBBV1MgdGhhdCB0aGlzIHNlcnZpY2UgaXMgcnVubmluZyBpblxuICogQHBhcmFtIHtzdHJpbmd9IHMgc2VydmljZSBpcyB0aGUgbmFtZSBvZiB0aGUgc2VydmljZVxuICogQHBhcmFtIHtzdHJpbmd9IGEgYWNjb3VudCBpcyBBV1MgdGhlIGFjY291bnQgbnVtYmVyXG4gKiBAcGFyYW0ge29iamVjdH0gYiBpcyB0aGUgZXZlbnQgaW5wdXRcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGMgaXMgdGhlIHdvcmtlciBmdW5jdGlvbiB0aGF0IGhhcyB0aGUgYnVzaW5lc3MgbG9naWMgdG8gcHJvY2VzcyB0aGUgcmVxdWVzdFxuICogQHBhcmFtIHtmdW5jdGlvbn0gaCBpcyB0aGUgcHJld29ya2VyIGhvb2tcbiAqL1xuZXhwb3J0IGNvbnN0IGJ1bGtGZXRjaEhhbmRsZXIgPSBhc3luYyAoXG4gIEFXUyxcbiAge1xuICAgIHRocm90dGxlTG10cyxcbiAgICBzYWZlVGhyb3R0bGVMaW1pdCxcbiAgICByZXNlcnZlQ2FwRm9yRGlyZWN0LFxuICAgIHJldHJ5Q250Rm9yQ2FwYWNpdHksXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGFycm93LWJvZHktc3R5bGVcbiAgfSxcbiAgcixcbiAgcyxcbiAgYSxcbiAgYixcbiAgYyxcbiAgaCxcbikgPT4ge1xuICByZXR1cm4gYkZIKFxuICAgIEFXUyxcbiAgICB7XG4gICAgICB0aHJvdHRsZUxtdHMsXG4gICAgICBzYWZlVGhyb3R0bGVMaW1pdCxcbiAgICAgIHJlc2VydmVDYXBGb3JEaXJlY3QsXG4gICAgICByZXRyeUNudEZvckNhcGFjaXR5LFxuICAgIH0sXG4gICAgcixcbiAgICBzLFxuICAgIGEsXG4gICAgYixcbiAgICBjLFxuICAgIGgsXG4gICk7XG59O1xuXG4vKipcbiAqIFRoaXMgaXMgdGhlIGRpcmVjdCB0cmFuc2l0aW9uIHJlcXVlc3QgaGFuZGxlclxuICogQHBhcmFtIHtvYmplY3R9IEFXUyBpcyB0aGUgQVdTIHNkayBpbnN0YW5jZSB0aGF0IG5lZWRzIHRvIGJlIHBhc3NlZCBmcm9tIHRoZSBoYW5kbGVyXG4gKiBAcGFyYW0geyB0aHJvdHRsZUxtdHM6IG9iamVjdCwgc2FmZVRocm90dGxlTGltaXQ6IGludCwgcmVzZXJ2ZUNhcEZvckRpcmVjdDogaW50LCByZXRyeUNudEZvckNhcGFjaXR5OiBpbnQgfSBhcmUgdGhlIHRocm90dGxlIGxpbWl0c1xuICogQHBhcmFtIHtzdHJpbmd9IHIgaXMgdGhlIHJlZ2lvbiBvZiBBV1MgdGhhdCB0aGlzIHNlcnZpY2UgaXMgcnVubmluZyBpblxuICogQHBhcmFtIHtzdHJpbmd9IHMgc2VydmljZSBpcyB0aGUgbmFtZSBvZiB0aGUgc2VydmljZVxuICogQHBhcmFtIHtzdHJpbmd9IGEgYWNjb3VudCBpcyBBV1MgdGhlIGFjY291bnQgbnVtYmVyXG4gKiBAcGFyYW0ge29iamVjdH0gYiBpcyB0aGUgZXZlbnQgaW5wdXRcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGMgaXMgdGhlIHdvcmtlciBmdW5jdGlvbiB0aGF0IGhhcyB0aGUgYnVzaW5lc3MgbG9naWMgdG8gcHJvY2VzcyB0aGUgcmVxdWVzdFxuICogQHBhcmFtIHtmdW5jdGlvbn0gaCBpcyB0aGUgcHJld29ya2VyIGhvb2tcbiAqL1xuZXhwb3J0IGNvbnN0IGRpcmVjdFRyYW5zaXRpb25IYW5kbGVyID0gYXN5bmMgKFxuICBBV1MsXG4gIHtcbiAgICB0aHJvdHRsZUxtdHMsXG4gICAgc2FmZVRocm90dGxlTGltaXQsXG4gICAgcmVzZXJ2ZUNhcEZvckRpcmVjdCxcbiAgICByZXRyeUNudEZvckNhcGFjaXR5LFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBhcnJvdy1ib2R5LXN0eWxlXG4gIH0sXG4gIHIsXG4gIHMsXG4gIGEsXG4gIGIsXG4gIGMsXG4gIGgsXG4pID0+IHtcbiAgcmV0dXJuIGRUSChcbiAgICBBV1MsXG4gICAge1xuICAgICAgdGhyb3R0bGVMbXRzLFxuICAgICAgc2FmZVRocm90dGxlTGltaXQsXG4gICAgICByZXNlcnZlQ2FwRm9yRGlyZWN0LFxuICAgICAgcmV0cnlDbnRGb3JDYXBhY2l0eSxcbiAgICB9LFxuICAgIHIsXG4gICAgcyxcbiAgICBhLFxuICAgIGIsXG4gICAgYyxcbiAgICBoLFxuICApO1xufTtcblxuLyoqXG4gKiBUaGlzIGlzIHRoZSBidWxrIHRyYW5zaXRpb24gcmVxdWVzdCBoYW5kbGVyXG4gKiBAcGFyYW0ge29iamVjdH0gQVdTIGlzIHRoZSBBV1Mgc2RrIGluc3RhbmNlIHRoYXQgbmVlZHMgdG8gYmUgcGFzc2VkIGZyb20gdGhlIGhhbmRsZXJcbiAqIEBwYXJhbSB7IHRocm90dGxlTG10czogb2JqZWN0LCBzYWZlVGhyb3R0bGVMaW1pdDogaW50LCByZXNlcnZlQ2FwRm9yRGlyZWN0OiBpbnQsIHJldHJ5Q250Rm9yQ2FwYWNpdHk6IGludCB9IGFyZSB0aGUgdGhyb3R0bGUgbGltaXRzXG4gKiBAcGFyYW0ge3N0cmluZ30gciBpcyB0aGUgcmVnaW9uIG9mIEFXUyB0aGF0IHRoaXMgc2VydmljZSBpcyBydW5uaW5nIGluXG4gKiBAcGFyYW0ge3N0cmluZ30gcyBzZXJ2aWNlIGlzIHRoZSBuYW1lIG9mIHRoZSBzZXJ2aWNlXG4gKiBAcGFyYW0ge3N0cmluZ30gYSBhY2NvdW50IGlzIEFXUyB0aGUgYWNjb3VudCBudW1iZXJcbiAqIEBwYXJhbSB7b2JqZWN0fSBiIGlzIHRoZSBldmVudCBpbnB1dFxuICogQHBhcmFtIHtmdW5jdGlvbn0gYyBpcyB0aGUgd29ya2VyIGZ1bmN0aW9uIHRoYXQgaGFzIHRoZSBidXNpbmVzcyBsb2dpYyB0byBwcm9jZXNzIHRoZSByZXF1ZXN0XG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBoIGlzIHRoZSBwcmV3b3JrZXIgaG9va1xuICovXG5leHBvcnQgY29uc3QgYnVsa1RyYW5zaXRpb25IYW5kbGVyID0gYXN5bmMgKFxuICBBV1MsXG4gIHtcbiAgICB0aHJvdHRsZUxtdHMsXG4gICAgc2FmZVRocm90dGxlTGltaXQsXG4gICAgcmVzZXJ2ZUNhcEZvckRpcmVjdCxcbiAgICByZXRyeUNudEZvckNhcGFjaXR5LFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBhcnJvdy1ib2R5LXN0eWxlXG4gIH0sXG4gIHIsXG4gIHMsXG4gIGEsXG4gIGIsXG4gIGMsXG4gIGgsXG4pID0+IHtcbiAgcmV0dXJuIGJUSChcbiAgICBBV1MsXG4gICAge1xuICAgICAgdGhyb3R0bGVMbXRzLFxuICAgICAgc2FmZVRocm90dGxlTGltaXQsXG4gICAgICByZXNlcnZlQ2FwRm9yRGlyZWN0LFxuICAgICAgcmV0cnlDbnRGb3JDYXBhY2l0eSxcbiAgICB9LFxuICAgIHIsXG4gICAgcyxcbiAgICBhLFxuICAgIGIsXG4gICAgYyxcbiAgICBoLFxuICApO1xufTtcblxuLyoqXG4gKiBUaGlzIGlzIHRoZSBidWxrIHRyYW5zaXRpb24gcmVxdWVzdCBoYW5kbGVyXG4gKiBAcGFyYW0ge29iamVjdH0gQVdTIGlzIHRoZSBBV1Mgc2RrIGluc3RhbmNlIHRoYXQgbmVlZHMgdG8gYmUgcGFzc2VkIGZyb20gdGhlIGhhbmRsZXJcbiAqIEBwYXJhbSB7c3RyaW5nfSByIGlzIHRoZSByZWdpb24gb2YgQVdTIHRoYXQgdGhpcyBzZXJ2aWNlIGlzIHJ1bm5pbmcgaW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzIHNlcnZpY2UgaXMgdGhlIG5hbWUgb2YgdGhlIHNlcnZpY2VcbiAqIEBwYXJhbSB7c3RyaW5nfSBhIGFjY291bnQgaXMgQVdTIHRoZSBhY2NvdW50IG51bWJlclxuICogQHBhcmFtIHtvYmplY3R9IGIgaXMgdGhlIGV2ZW50IGlucHV0XG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBjIGlzIHRoZSB3b3JrZXIgZnVuY3Rpb24gdGhhdCBoYXMgdGhlIGJ1c2luZXNzIGxvZ2ljIHRvIHByb2Nlc3MgdGhlIHJlcXVlc3RcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGggaXMgdGhlIHByZXdvcmtlciBob29rXG4gKi9cbmV4cG9ydCBjb25zdCB3ZWJob29rSGFuZGxlciA9IGFzeW5jIChBV1MsIHIsIHMsIGEsIGIsIGMsIGgpID0+IHdIKEFXUywgciwgcywgYSwgYiwgYywgaCk7XG5cbi8qKlxuICogVGhpcyBpcyB0aGUgZmV0Y2ggcmVxdWVzdCBoYW5kbGVyXG4gKiBAcGFyYW0ge29iamVjdH0gQVdTIGlzIHRoZSBBV1Mgc2RrIGluc3RhbmNlIHRoYXQgbmVlZHMgdG8gYmUgcGFzc2VkIGZyb20gdGhlIGhhbmRsZXJcbiAqIEBwYXJhbSB7T2JqZWN0fSBkIGlzIHRoZSBkYXRhIHRvIGJlIHNhdmVkXG4gKiBAcGFyYW0ge3N0cmluZ30gcyBzZXJ2aWNlIGlzIHRoZSBuYW1lIG9mIHRoZSBzZXJ2aWNlXG4gKi9cbmV4cG9ydCBjb25zdCBzZXR1cERhdGFiYXNlID0gYXN5bmMgKEFXUywgZCwgcykgPT4ge1xuICBsZXQgZGF0YSA9ICcnO1xuICBpZiAodHlwZW9mIGQgPT09ICdvYmplY3QnKSB7XG4gICAgZGF0YSA9IGQ7XG4gIH0gZWxzZSB7XG4gICAgdHJ5IHtcbiAgICAgIGRhdGEgPSBKU09OLnBhcnNlKGQpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdVbmFibGUgdG8gcGFyc2UgdGhlIGRhdGFiYXNlIGZpbGUuIFBsZWFzZSBjaGVjayBpZiBpdCBpcyBhIHZhbGlkIEpTT04gZG9jdW1lbnQuJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb25zaXN0ZW50LXJldHVyblxuICByZXR1cm4gc0RiKEFXUywgZGF0YSwgcyk7XG59O1xuXG4vKipcbiAqIFRoaXMgaXMgdGhlIGdldCBodHRwIHJlcXVlc3QgaGFuZGxlclxuICogQHBhcmFtIHtvYmplY3R9IEFXUyBpcyB0aGUgQVdTIHNkayBpbnN0YW5jZSB0aGF0IG5lZWRzIHRvIGJlIHBhc3NlZCBmcm9tIHRoZSBoYW5kbGVyXG4gKiBAcGFyYW0ge3N0cmluZ30gciBpcyB0aGUgcmVnaW9uIG9mIEFXUyB0aGF0IHRoaXMgc2VydmljZSBpcyBydW5uaW5nIGluXG4gKiBAcGFyYW0ge3N0cmluZ30gcyBzZXJ2aWNlIGlzIHRoZSBuYW1lIG9mIHRoZSBzZXJ2aWNlXG4gKiBAcGFyYW0ge3N0cmluZ30gYSBhY2NvdW50IGlzIEFXUyB0aGUgYWNjb3VudCBudW1iZXJcbiAqIEBwYXJhbSB7b2JqZWN0fSBiIGlzIHRoZSBldmVudCBpbnB1dFxuICovXG5leHBvcnQgY29uc3QgaHR0cFJlcUhhbmRsZXIgPSBhc3luYyAoQVdTLCByLCBzLCBhLCBiLCBjKSA9PiBncEgoQVdTLCByLCBzLCBhLCBiLCBjKTtcbiIsImltcG9ydCB7IHByb2Nlc3NNZXNzYWdlIH0gZnJvbSAnLi4vbGlicmFyeS9wcm9jZXNzJztcbmltcG9ydCB7IGdldEVycm9yU3RyaW5nIH0gZnJvbSAnLi4vbGlicmFyeS91dGlsJztcbmltcG9ydCB7IHBhcnNlTXNnIGFzIHNxc1BhcnNlciB9IGZyb20gJy4uL2xpYnJhcnkvcXVldWUnO1xuaW1wb3J0IHtcbiAgZ2V0QXZhaWxhYmxlQ2FsbHNUaGlzU2VjIGFzIGdldEF2YWlsYWJsZUNhcGFjaXR5LFxuICBpbmNyZW1lbnRVc2VkQ291bnQgYXMgaW5jQ2FsbENvdW50LFxufSBmcm9tICcuLi9saWJyYXJ5L3Rocm90dGxlJztcblxuLyoqXG4gKiBUaGlzIGlzIHRoZSBoYW5kbGVyIHRoYXQgaXMgaW52b2tlZCBieSBhIFNRUyB0cmlnZ2VyIHRvIHByb2Nlc3NcbiAqIG1lc3NhZ2VzIHRoYXQgYXJlIHdhaXRpbmcgaW4gdGhlIGJ1bGsgdHJhbnNpdGlvbiBxdWV1ZVxuICogQHBhcmFtIHtvYmplY3R9IEFXUyBpcyB0aGUgQVdTIHNkayBpbnN0YW5jZSB0aGF0IG5lZWRzIHRvIGJlIHBhc3NlZCBmcm9tIHRoZSBoYW5kbGVyXG4gKiBAcGFyYW0ge29iamVjdH0geyB0aHJvdHRsZUxtdHMsIHNhZmVUaHJvdHRsZUxpbWl0LCByZXNlcnZlQ2FwRm9yRGlyZWN0LCByZXRyeUNudEZvckNhcGFjaXR5IH0gYXJlIHRoZSB0aHJvdHRsZSBsaW1pdHMgZnJvbSBlbnZcbiAqIEBwYXJhbSB7c3RyaW5nfSByZWdpb24gaXMgdGhlIHJlZ2lvbiBvZiBBV1MgdGhhdCB0aGlzIHNlcnZpY2UgaXMgcnVubmluZyBpblxuICogQHBhcmFtIHtzdHJpbmd9IHNlcnZpY2UgaXMgdGhlIG5hbWUgb2YgdGhlIHNlcnZpY2VcbiAqIEBwYXJhbSB7c3RyaW5nfSBhY2NvdW50IGlzIEFXUyB0aGUgYWNjb3VudCBudW1iZXJcbiAqIEBwYXJhbSB7b2JqZWN0fSBldmVudCB0aGF0IGludm9rZXMgdGhlIHNlcnZlcmxlc3MgZnVuY3Rpb24uIEluIHRoaXMgY2FzZSwgaXQgaXMgYSBjbG91ZCB3YXRjaCB0cmlnZ2VyXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBtSG5kbHIgaXMgdGhlIGhhbmRsZXIvIHdvcmtlciB0aGF0IHdvcmtzIG9uIHRoZSBtZXNzYWdlIGFwcGx5aW5nIGJ1c2luZXNzIGxvZ2ljXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBwcmVXb3JrZXJIb29rIGN1c3RvbSBsb2dpYyB0byBoYW5kbGUgY29tcGxleCB0aHJvdHRsaW5nIG9yIHByaW9yaXRpemF0aW9uXG4gKiBAcmV0dXJucyB7c3RyaW5nfVxuICogQHRocm93cyB7RXJyb3J9XG4gKi9cbmV4cG9ydCBjb25zdCBoYW5kbGVyID0gYXN5bmMgKFxuICBBV1MsXG4gIHsgdGhyb3R0bGVMbXRzLCBzYWZlVGhyb3R0bGVMaW1pdCwgcmVzZXJ2ZUNhcEZvckRpcmVjdCwgcmV0cnlDbnRGb3JDYXBhY2l0eSB9LFxuICByZWdpb24sXG4gIHNlcnZpY2UsXG4gIGFjY291bnQsXG4gIGV2ZW50LFxuICBtSG5kbHIsXG4gIHByZVdvcmtlckhvb2ssXG4pID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZyhgZGlyZWN0RmV0Y2g6IElORk86IElucHV0IGlzOiAke3R5cGVvZiBldmVudCA9PT0gJ29iamVjdCcgPyBKU09OLnN0cmluZ2lmeShldmVudCwgbnVsbCwgNCkgOiBldmVudH1gKTtcblxuICAgIC8vIElmIHRoZXJlIGFyZSBubyByZWNvcmRzIHRvIHByb2Nlc3Mgb3IgbW9yZSB0aGFuIG9uZSByZWNvcmQgdG8gcHJvY2VzcyxcbiAgICAvLyB0aHJvdyBhbiBlcnJvciBhcyBpdCBpcyBhbiBpbnZhbGlkIGV2ZW50XG4gICAgaWYgKHR5cGVvZiBldmVudC5SZWNvcmRzID09PSAndW5kZWZpbmVkJyB8fCBldmVudC5SZWNvcmRzLmxlbmd0aCAhPT0gMSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgZGlyZWN0RmV0Y2g6IEVSUk9SOiBMYW1iZGEgd2FzIHdyb25nbHkgdHJpZ2dlcmVkIHdpdGggJHtcbiAgICAgICAgICB0eXBlb2YgZXZlbnQuUmVjb3JkcyA9PT0gJ3VuZGVmaW5lZCcgPyAwIDogZXZlbnQuUmVjb3Jkcy5sZW5ndGhcbiAgICAgICAgfSByZWNvcmRzYCxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gR2V0IHRoZSBhdmFpbGFibGUgY2FwYWNpdHkgZm9yIG1ha2luZyBjYWxscyBiZWZvcmUgZ29pbmcgYW55IGZ1cnRoZXJcbiAgICBjb25zdCBhdmFpbENhcCA9IGF3YWl0IGdldEF2YWlsYWJsZUNhcGFjaXR5KFxuICAgICAgQVdTLFxuICAgICAge1xuICAgICAgICB0aHJvdHRsZUxtdHMsXG4gICAgICAgIHNhZmVUaHJvdHRsZUxpbWl0LFxuICAgICAgICByZXNlcnZlQ2FwRm9yRGlyZWN0LFxuICAgICAgICByZXRyeUNudEZvckNhcGFjaXR5LFxuICAgICAgfSxcbiAgICAgIHNlcnZpY2UsXG4gICAgICBmYWxzZSxcbiAgICApO1xuICAgIGNvbnNvbGUubG9nKGBkaXJlY3RGZXRjaDogSU5GTzogUHJvY2Vzc2luZyBldmVudCAke0pTT04uc3RyaW5naWZ5KGV2ZW50LlJlY29yZHMubGVuZ3RoLCBudWxsLCA0KX1gKTtcblxuICAgIGxldCBhcHByb3ZlZE1lc3NhZ2VzID0gW3Nxc1BhcnNlcihldmVudC5SZWNvcmRzWzBdKV07XG4gICAgaWYgKHByZVdvcmtlckhvb2spIHtcbiAgICAgIGFwcHJvdmVkTWVzc2FnZXMgPSBhd2FpdCBwcmVXb3JrZXJIb29rKCdmZXRjaCcsIGZhbHNlLCBhcHByb3ZlZE1lc3NhZ2VzKTtcbiAgICB9XG5cbiAgICBpZiAoIWFwcHJvdmVkTWVzc2FnZXMubGVuZ3RoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2RpcmVjdEZldGNoOiBFUlJPUjogUHJvY2Vzc2luZyBjb21wbGV0ZS4gIFByZS13b3JrZXIgaG9vayByZWplY3RlZCBtZXNzYWdlLicpO1xuICAgIH1cblxuICAgIC8vIElmIHRoZXJlIGlzIG5vIGF2YWlsYWJsZSBjYXBhY2l0eSB0byBtYWtlIGNhbGxzLCB0aHJvdyBhbiBlcnJvciB3aGljaFxuICAgIC8vIHdpbGwgcHV0IGJhY2sgdGhlIG1lc3NhZ2UgaW4gdGhlIHF1ZXVlIHdoZXJlIGl0IGNhbWUgZnJvbVxuICAgIGlmIChhdmFpbENhcCA8IDEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignZGlyZWN0RmV0Y2g6IEVSUk9SOiBObyBjYXBhY2l0eSB0byBtYWtlIGEgY2FsbCcpO1xuICAgIH1cblxuICAgIC8vIEluY3JlbWVudCB0aGUgJ2NhbGxzIG1hZGUgY291bnQnIGluIHRoZSBkYXRhYmFzZS4gRGVmYXVsdCBpbmNyZW1lbnQgaXMgMVxuICAgIC8vIFRoZXJlZm9yZSwgbm8gbmVlZCB0byBzZW5kIHRoZSBpbmNyZW1lbnQgcGFyYW1ldGVyXG4gICAgYXdhaXQgaW5jQ2FsbENvdW50KEFXUywgc2VydmljZSk7XG5cbiAgICAvLyBQYXJzZSB0aGUgbWVzc2FnZSB1c2luZyB0aGUgc3FzUGFyc2VyIGZ1bmN0aW9uIGZyb20gcXVldWUgbGlicmFyeVxuICAgIGNvbnN0IHsgbXNnQm9keSwgbXNnQXR0cmlicyB9ID0gYXBwcm92ZWRNZXNzYWdlc1swXTtcblxuICAgIC8vIENhbGwgdGhlIG1lc3NhZ2UgcHJvY2Vzc2VyIHRvIHByb2Nlc3MgdGhlIG1lc3NhZ2Ugd2hpY2ggaW5jbHVkZXMgZXJyb3JcbiAgICAvLyBoYW5kbGluZyBhbmQgcHVibGlzaGluZyByZXNwb25zZSB0byBTTlNcbiAgICBhd2FpdCBwcm9jZXNzTWVzc2FnZShBV1MsIHJlZ2lvbiwgc2VydmljZSwgYWNjb3VudCwgeyBtc2dCb2R5LCBtc2dBdHRyaWJzIH0sIG1IbmRscik7XG5cbiAgICByZXR1cm4gJ2RpcmVjdEZldGNoOiBJTkZPOiBQcm9jZXNzaW5nIGNvbXBsZXRlJztcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGBkaXJlY3RGZXRjaDogRVJST1I6ICR7Z2V0RXJyb3JTdHJpbmcoZSl9YCk7XG4gICAgdGhyb3cgZTtcbiAgfVxufTtcbiIsImltcG9ydCB7IHByb2Nlc3NNZXNzYWdlIH0gZnJvbSAnLi4vbGlicmFyeS9wcm9jZXNzJztcbmltcG9ydCB7IGdldEVycm9yU3RyaW5nIH0gZnJvbSAnLi4vbGlicmFyeS91dGlsJztcbmltcG9ydCB7IGdldE1zZ3NGcm9tUXVldWUsIHBhcnNlTXNnIGFzIHNxc1BhcnNlciB9IGZyb20gJy4uL2xpYnJhcnkvcXVldWUnO1xuaW1wb3J0IHtcbiAgZ2V0QXZhaWxhYmxlQ2FsbHNUaGlzU2VjIGFzIGdldEF2YWlsYWJsZUNhcGFjaXR5LFxuICBpbmNyZW1lbnRVc2VkQ291bnQgYXMgaW5jQ2FsbENvdW50LFxufSBmcm9tICcuLi9saWJyYXJ5L3Rocm90dGxlJztcblxuLyoqXG4gKiBUaGlzIGlzIHRoZSBoYW5kbGVyIHRoYXQgaXMgaW52b2tlZCBieSBhIGNsb3VkIHdhdGNoIHRyaWdnZXIgdG8gcHJvY2Vzc1xuICogbWVzc2FnZXMgdGhhdCBhcmUgd2FpdGluZyBpbiB0aGUgYnVsayB0cmFuc2l0aW9uIHF1ZXVlXG4gKiBAcGFyYW0ge29iamVjdH0gQVdTIGlzIHRoZSBBV1Mgc2RrIGluc3RhbmNlIHRoYXQgbmVlZHMgdG8gYmUgcGFzc2VkIGZyb20gdGhlIGhhbmRsZXJcbiAqIEBwYXJhbSB7b2JqZWN0fSB7IHRocm90dGxlTG10cywgc2FmZVRocm90dGxlTGltaXQsIHJlc2VydmVDYXBGb3JEaXJlY3QsIHJldHJ5Q250Rm9yQ2FwYWNpdHkgfSBhcmUgdGhlIHRocm90dGxlIGxpbWl0cyBmcm9tIGVudlxuICogQHBhcmFtIHtzdHJpbmd9IHJlZ2lvbiBpcyB0aGUgcmVnaW9uIG9mIEFXUyB0aGF0IHRoaXMgc2VydmljZSBpcyBydW5uaW5nIGluXG4gKiBAcGFyYW0ge3N0cmluZ30gc2VydmljZSBpcyB0aGUgbmFtZSBvZiB0aGUgc2VydmljZVxuICogQHBhcmFtIHtzdHJpbmd9IGFjY291bnQgaXMgQVdTIHRoZSBhY2NvdW50IG51bWJlclxuICogQHBhcmFtIHtvYmplY3R9IGV2ZW50IHRoYXQgaW52b2tlcyB0aGUgc2VydmVybGVzcyBmdW5jdGlvbi4gSW4gdGhpcyBjYXNlLCBpdCBpcyBhIGNsb3VkIHdhdGNoIHRyaWdnZXJcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IG1IbmRsciBpcyB0aGUgaGFuZGxlci8gd29ya2VyIHRoYXQgd29ya3Mgb24gdGhlIG1lc3NhZ2UgYXBwbHlpbmcgYnVzaW5lc3MgbG9naWNcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IHByZVdvcmtlckhvb2sgY3VzdG9tIGxvZ2ljIHRvIGhhbmRsZSBjb21wbGV4IHRocm90dGxpbmcgb3IgcHJpb3JpdGl6YXRpb25cbiAqIEByZXR1cm5zIHtzdHJpbmd9XG4gKiBAdGhyb3dzIHtFcnJvcn1cbiAqL1xuZXhwb3J0IGNvbnN0IGhhbmRsZXIgPSBhc3luYyAoXG4gIEFXUyxcbiAgeyB0aHJvdHRsZUxtdHMsIHNhZmVUaHJvdHRsZUxpbWl0LCByZXNlcnZlQ2FwRm9yRGlyZWN0LCByZXRyeUNudEZvckNhcGFjaXR5IH0sXG4gIHJlZ2lvbixcbiAgc2VydmljZSxcbiAgYWNjb3VudCxcbiAgZXZlbnQsXG4gIG1IbmRscixcbiAgcHJlV29ya2VySG9vayxcbikgPT4ge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKFxuICAgICAgYGJ1bGtGZXRjaDogSU5GTzogU2NoZWR1bGVkIGNhbGwgc3RhcnRlZC4gRXZlbnQgaXMgJHtcbiAgICAgICAgdHlwZW9mIGV2ZW50ID09PSAnb2JqZWN0JyA/IEpTT04uc3RyaW5naWZ5KGV2ZW50LCBudWxsLCA0KSA6IGV2ZW50XG4gICAgICB9YCxcbiAgICApO1xuXG4gICAgLy8gR2V0IHRoZSBhdmFpbGFibGUgY2FwYWNpdHkgZm9yIG1ha2luZyBjYWxscyBiZWZvcmUgZ29pbmcgYW55IGZ1cnRoZXJcbiAgICBjb25zdCBhdmFpbENhcCA9IGF3YWl0IGdldEF2YWlsYWJsZUNhcGFjaXR5KFxuICAgICAgQVdTLFxuICAgICAge1xuICAgICAgICB0aHJvdHRsZUxtdHMsXG4gICAgICAgIHNhZmVUaHJvdHRsZUxpbWl0LFxuICAgICAgICByZXNlcnZlQ2FwRm9yRGlyZWN0LFxuICAgICAgICByZXRyeUNudEZvckNhcGFjaXR5LFxuICAgICAgfSxcbiAgICAgIHNlcnZpY2UsXG4gICAgICB0cnVlLFxuICAgICk7XG5cbiAgICAvLyBJZiB0aGVyZSBpcyBubyBjYXBhY2l0eSBhdmFpbGFibGUsIHRocm93IGJhY2sgYW4gZXJyb3IgYW5kIHdhaXQgZm9yIHRoZVxuICAgIC8vIGZ1bmN0aW9uIHRvIGJlIHJlLXRyaWdnZXJlZCBhZ2FpbiBieSBjbG91ZCB3YXRjaFxuICAgIGlmIChhdmFpbENhcCA8IDEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignYnVsa0ZldGNoOiBFUlJPUjogTm8gY2FwYWNpdHkgdG8gbWFrZSBhIGNhbGwnKTtcbiAgICB9XG4gICAgY29uc3QgbWVzc2FnZXNUb1Byb2Nlc3MgPSBhd2FpdCBnZXRNc2dzRnJvbVF1ZXVlKFxuICAgICAgQVdTLFxuICAgICAgcmVnaW9uLFxuICAgICAgYXZhaWxDYXAsXG4gICAgICBgaHR0cHM6Ly9zcXMuJHtyZWdpb259LmFtYXpvbmF3cy5jb20vJHthY2NvdW50fS8ke3NlcnZpY2V9LWJ1bGtmcWAsXG4gICAgKTtcbiAgICBjb25zb2xlLmxvZyhgYnVsa0ZldGNoOiBJTkZPOiBQcm9jZXNzaW5nIGV2ZW50ICR7SlNPTi5zdHJpbmdpZnkobWVzc2FnZXNUb1Byb2Nlc3MubGVuZ3RoLCBudWxsLCA0KX1gKTtcblxuICAgIGxldCBhcHByb3ZlZE1lc3NhZ2VzID0gbWVzc2FnZXNUb1Byb2Nlc3MubWFwKChtKSA9PiBzcXNQYXJzZXIobSkpO1xuICAgIGlmIChwcmVXb3JrZXJIb29rKSB7XG4gICAgICBhcHByb3ZlZE1lc3NhZ2VzID0gYXdhaXQgcHJlV29ya2VySG9vaygnZmV0Y2gnLCB0cnVlLCBhcHByb3ZlZE1lc3NhZ2VzKTtcbiAgICB9XG5cbiAgICBpZiAoYXBwcm92ZWRNZXNzYWdlcy5sZW5ndGggPCAxKSB7XG4gICAgICByZXR1cm4gJ2J1bGtGZXRjaDogSU5GTzogUHJvY2Vzc2luZyBjb21wbGV0ZSc7XG4gICAgfVxuXG4gICAgLy8gSW5jcmVtZW50IHRoZSAnY2FsbHMgbWFkZSBjb3VudCcgaW4gdGhlIGRhdGFiYXNlIHRvIHRoZSBudW1iZXIgb2ZcbiAgICAvLyBtZXNzYWdlcyB0aGF0IHdpbGwgYmUgcHJvY2Vzc2VkIHRoaXMgaXRlcmF0aW9uXG4gICAgYXdhaXQgaW5jQ2FsbENvdW50KEFXUywgc2VydmljZSwgbWVzc2FnZXNUb1Byb2Nlc3MubGVuZ3RoKTtcblxuICAgIGNvbnN0IHByb21zID0gW107XG5cbiAgICAvLyBQdXNoIGVhY2ggbWVzc2FnZSBjYWxsIHRvIGEgcHJvbWlzZSBhcnJheVxuICAgIGFwcHJvdmVkTWVzc2FnZXMuZm9yRWFjaCgobWVzc2FnZSkgPT4ge1xuICAgICAgcHJvbXMucHVzaChwcm9jZXNzTWVzc2FnZShBV1MsIHJlZ2lvbiwgc2VydmljZSwgYWNjb3VudCwgbWVzc2FnZSwgbUhuZGxyKSk7XG4gICAgfSk7XG5cbiAgICAvLyBBd2FpdCBjb21wbGV0aW9uIG9mIGFsbCBwcm9taXNlc1xuICAgIGF3YWl0IFByb21pc2UuYWxsKHByb21zKTtcblxuICAgIHJldHVybiAnYnVsa0ZldGNoOiBJTkZPOiBQcm9jZXNzaW5nIGNvbXBsZXRlJztcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGBidWxrRmV0Y2g6IEVSUk9SOiAke2dldEVycm9yU3RyaW5nKGUpfWApO1xuICAgIHRocm93IGU7XG4gIH1cbn07XG4iLCJpbXBvcnQgeyBwcm9jZXNzTWVzc2FnZSB9IGZyb20gJy4uL2xpYnJhcnkvcHJvY2Vzcyc7XG5pbXBvcnQgeyBnZXRFcnJvclN0cmluZyB9IGZyb20gJy4uL2xpYnJhcnkvdXRpbCc7XG5pbXBvcnQgeyBwYXJzZU1zZyBhcyBzcXNQYXJzZXIgfSBmcm9tICcuLi9saWJyYXJ5L3F1ZXVlJztcbmltcG9ydCB7XG4gIGdldEF2YWlsYWJsZUNhbGxzVGhpc1NlYyBhcyBnZXRBdmFpbGFibGVDYXBhY2l0eSxcbiAgaW5jcmVtZW50VXNlZENvdW50IGFzIGluY0NhbGxDb3VudCxcbn0gZnJvbSAnLi4vbGlicmFyeS90aHJvdHRsZSc7XG5cbi8qKlxuICogVGhpcyBpcyB0aGUgaGFuZGxlciB0aGF0IGlzIGludm9rZWQgYnkgYSBTUVMgdHJpZ2dlciB0byBwcm9jZXNzXG4gKiBtZXNzYWdlcyB0aGF0IGFyZSB3YWl0aW5nIGluIHRoZSBidWxrIHRyYW5zaXRpb24gcXVldWVcbiAqIEBwYXJhbSB7b2JqZWN0fSBBV1MgaXMgdGhlIEFXUyBzZGsgaW5zdGFuY2UgdGhhdCBuZWVkcyB0byBiZSBwYXNzZWQgZnJvbSB0aGUgaGFuZGxlclxuICogQHBhcmFtIHtvYmplY3R9IHsgdGhyb3R0bGVMbXRzLCBzYWZlVGhyb3R0bGVMaW1pdCwgcmVzZXJ2ZUNhcEZvckRpcmVjdCwgcmV0cnlDbnRGb3JDYXBhY2l0eSB9IGFyZSB0aGUgdGhyb3R0bGUgbGltaXRzIGZyb20gZW52XG4gKiBAcGFyYW0ge3N0cmluZ30gcmVnaW9uIGlzIHRoZSByZWdpb24gb2YgQVdTIHRoYXQgdGhpcyBzZXJ2aWNlIGlzIHJ1bm5pbmcgaW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzZXJ2aWNlIGlzIHRoZSBuYW1lIG9mIHRoZSBzZXJ2aWNlXG4gKiBAcGFyYW0ge3N0cmluZ30gYWNjb3VudCBpcyBBV1MgdGhlIGFjY291bnQgbnVtYmVyXG4gKiBAcGFyYW0ge29iamVjdH0gZXZlbnQgdGhhdCBpbnZva2VzIHRoZSBzZXJ2ZXJsZXNzIGZ1bmN0aW9uLiBJbiB0aGlzIGNhc2UsIGl0IGlzIGEgY2xvdWQgd2F0Y2ggdHJpZ2dlclxuICogQHBhcmFtIHtmdW5jdGlvbn0gbUhuZGxyIGlzIHRoZSBoYW5kbGVyLyB3b3JrZXIgdGhhdCB3b3JrcyBvbiB0aGUgbWVzc2FnZSBhcHBseWluZyBidXNpbmVzcyBsb2dpY1xuICogQHBhcmFtIHtmdW5jdGlvbn0gcHJlV29ya2VySG9vayBjdXN0b20gbG9naWMgdG8gaGFuZGxlIGNvbXBsZXggdGhyb3R0bGluZyBvciBwcmlvcml0aXphdGlvblxuICogQHJldHVybnMge3N0cmluZ31cbiAqIEB0aHJvd3Mge0Vycm9yfVxuICovXG5leHBvcnQgY29uc3QgaGFuZGxlciA9IGFzeW5jIChcbiAgQVdTLFxuICB7IHRocm90dGxlTG10cywgc2FmZVRocm90dGxlTGltaXQsIHJlc2VydmVDYXBGb3JEaXJlY3QsIHJldHJ5Q250Rm9yQ2FwYWNpdHkgfSxcbiAgcmVnaW9uLFxuICBzZXJ2aWNlLFxuICBhY2NvdW50LFxuICBldmVudCxcbiAgbUhuZGxyLFxuICBwcmVXb3JrZXJIb29rLFxuKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coXG4gICAgICBgZGlyZWN0VHJhbnNpdGlvbjogSU5GTzogSW5wdXQgaXM6ICR7dHlwZW9mIGV2ZW50ID09PSAnb2JqZWN0JyA/IEpTT04uc3RyaW5naWZ5KGV2ZW50LCBudWxsLCA0KSA6IGV2ZW50fWAsXG4gICAgKTtcblxuICAgIC8vIElmIHRoZXJlIGFyZSBubyByZWNvcmRzIHRvIHByb2Nlc3Mgb3IgbW9yZSB0aGFuIG9uZSByZWNvcmQgdG8gcHJvY2VzcyxcbiAgICAvLyB0aHJvdyBhbiBlcnJvciBhcyBpdCBpcyBhbiBpbnZhbGlkIGV2ZW50XG4gICAgaWYgKHR5cGVvZiBldmVudC5SZWNvcmRzID09PSAndW5kZWZpbmVkJyB8fCBldmVudC5SZWNvcmRzLmxlbmd0aCAhPT0gMSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgZGlyZWN0VHJhbnNpdGlvbjogRVJST1I6IExhbWJkYSB3YXMgd3JvbmdseSB0cmlnZ2VyZWQgd2l0aCAke1xuICAgICAgICAgIHR5cGVvZiBldmVudC5SZWNvcmRzID09PSAndW5kZWZpbmVkJyA/IDAgOiBldmVudC5SZWNvcmRzLmxlbmd0aFxuICAgICAgICB9IHJlY29yZHNgLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBHZXQgdGhlIGF2YWlsYWJsZSBjYXBhY2l0eSBmb3IgbWFraW5nIGNhbGxzIGJlZm9yZSBnb2luZyBhbnkgZnVydGhlclxuICAgIGNvbnN0IGF2YWlsQ2FwID0gYXdhaXQgZ2V0QXZhaWxhYmxlQ2FwYWNpdHkoXG4gICAgICBBV1MsXG4gICAgICB7XG4gICAgICAgIHRocm90dGxlTG10cyxcbiAgICAgICAgc2FmZVRocm90dGxlTGltaXQsXG4gICAgICAgIHJlc2VydmVDYXBGb3JEaXJlY3QsXG4gICAgICAgIHJldHJ5Q250Rm9yQ2FwYWNpdHksXG4gICAgICB9LFxuICAgICAgc2VydmljZSxcbiAgICAgIGZhbHNlLFxuICAgICk7XG4gICAgY29uc29sZS5sb2coYGRpcmVjdFRyYW5zaXRpb246IElORk86IFByb2Nlc3NpbmcgZXZlbnQgJHtKU09OLnN0cmluZ2lmeShldmVudC5SZWNvcmRzLmxlbmd0aCwgbnVsbCwgNCl9YCk7XG5cbiAgICBsZXQgYXBwcm92ZWRNZXNzYWdlcyA9IFtzcXNQYXJzZXIoZXZlbnQuUmVjb3Jkc1swXSldO1xuICAgIGlmIChwcmVXb3JrZXJIb29rKSB7XG4gICAgICBhcHByb3ZlZE1lc3NhZ2VzID0gYXdhaXQgcHJlV29ya2VySG9vaygnZmV0Y2gnLCBmYWxzZSwgYXBwcm92ZWRNZXNzYWdlcyk7XG4gICAgfVxuXG4gICAgaWYgKCFhcHByb3ZlZE1lc3NhZ2VzLmxlbmd0aCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdkaXJlY3RGZXRjaDogRVJST1I6IFByb2Nlc3NpbmcgY29tcGxldGUuICBQcmUtd29ya2VyIGhvb2sgcmVqZWN0ZWQgbWVzc2FnZS4nKTtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGVyZSBpcyBubyBhdmFpbGFibGUgY2FwYWNpdHkgdG8gbWFrZSBjYWxscywgdGhyb3cgYW4gZXJyb3Igd2hpY2hcbiAgICAvLyB3aWxsIHB1dCBiYWNrIHRoZSBtZXNzYWdlIGluIHRoZSBxdWV1ZSB3aGVyZSBpdCBjYW1lIGZyb21cbiAgICBpZiAoYXZhaWxDYXAgPCAxKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2RpcmVjdFRyYW5zaXRpb246IEVSUk9SOiBObyBjYXBhY2l0eSB0byBtYWtlIGEgY2FsbCcpO1xuICAgIH1cblxuICAgIC8vIEluY3JlbWVudCB0aGUgJ2NhbGxzIG1hZGUgY291bnQnIGluIHRoZSBkYXRhYmFzZS4gRGVmYXVsdCBpbmNyZW1lbnQgaXMgMVxuICAgIC8vIFRoZXJlZm9yZSwgbm8gbmVlZCB0byBzZW5kIHRoZSBpbmNyZW1lbnQgcGFyYW1ldGVyXG4gICAgYXdhaXQgaW5jQ2FsbENvdW50KEFXUywgc2VydmljZSk7XG5cbiAgICAvLyBQYXJzZSB0aGUgbWVzc2FnZSB1c2luZyB0aGUgc3FzUGFyc2VyIGZ1bmN0aW9uIGZyb20gcXVldWUgbGlicmFyeVxuICAgIGNvbnN0IHsgbXNnQm9keSwgbXNnQXR0cmlicyB9ID0gYXBwcm92ZWRNZXNzYWdlc1swXTtcblxuICAgIC8vIENhbGwgdGhlIG1lc3NhZ2UgcHJvY2Vzc2VyIHRvIHByb2Nlc3MgdGhlIG1lc3NhZ2Ugd2hpY2ggaW5jbHVkZXMgZXJyb3JcbiAgICAvLyBoYW5kbGluZyBhbmQgcHVibGlzaGluZyByZXNwb25zZSB0byBTTlNcbiAgICBhd2FpdCBwcm9jZXNzTWVzc2FnZShBV1MsIHJlZ2lvbiwgc2VydmljZSwgYWNjb3VudCwgeyBtc2dCb2R5LCBtc2dBdHRyaWJzIH0sIG1IbmRscik7XG5cbiAgICByZXR1cm4gJ2RpcmVjdFRyYW5zaXRpb246IElORk86IFByb2Nlc3NpbmcgY29tcGxldGUnO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coYGRpcmVjdFRyYW5zaXRpb246IEVSUk9SOiAke2dldEVycm9yU3RyaW5nKGUpfWApO1xuICAgIHRocm93IGU7XG4gIH1cbn07XG4iLCJpbXBvcnQgeyBwcm9jZXNzTWVzc2FnZSB9IGZyb20gJy4uL2xpYnJhcnkvcHJvY2Vzcyc7XG5pbXBvcnQgeyBnZXRFcnJvclN0cmluZyB9IGZyb20gJy4uL2xpYnJhcnkvdXRpbCc7XG5pbXBvcnQgeyBnZXRNc2dzRnJvbVF1ZXVlLCBwYXJzZU1zZyBhcyBzcXNQYXJzZXIgfSBmcm9tICcuLi9saWJyYXJ5L3F1ZXVlJztcbmltcG9ydCB7XG4gIGdldEF2YWlsYWJsZUNhbGxzVGhpc1NlYyBhcyBnZXRBdmFpbGFibGVDYXBhY2l0eSxcbiAgaW5jcmVtZW50VXNlZENvdW50IGFzIGluY0NhbGxDb3VudCxcbn0gZnJvbSAnLi4vbGlicmFyeS90aHJvdHRsZSc7XG5cbi8qKlxuICogVGhpcyBpcyB0aGUgaGFuZGxlciB0aGF0IGlzIGludm9rZWQgYnkgYSBjbG91ZCB3YXRjaCB0cmlnZ2VyIHRvIHByb2Nlc3NcbiAqIG1lc3NhZ2VzIHRoYXQgYXJlIHdhaXRpbmcgaW4gdGhlIGJ1bGsgdHJhbnNpdGlvbiBxdWV1ZVxuICogQHBhcmFtIHtvYmplY3R9IEFXUyBpcyB0aGUgQVdTIHNkayBpbnN0YW5jZSB0aGF0IG5lZWRzIHRvIGJlIHBhc3NlZCBmcm9tIHRoZSBoYW5kbGVyXG4gKiBAcGFyYW0ge29iamVjdH0geyB0aHJvdHRsZUxtdHMsIHNhZmVUaHJvdHRsZUxpbWl0LCByZXNlcnZlQ2FwRm9yRGlyZWN0LCByZXRyeUNudEZvckNhcGFjaXR5IH0gYXJlIHRoZSB0aHJvdHRsZSBsaW1pdHMgZnJvbSBlbnZcbiAqIEBwYXJhbSB7c3RyaW5nfSByZWdpb24gaXMgdGhlIHJlZ2lvbiBvZiBBV1MgdGhhdCB0aGlzIHNlcnZpY2UgaXMgcnVubmluZyBpblxuICogQHBhcmFtIHtzdHJpbmd9IHNlcnZpY2UgaXMgdGhlIG5hbWUgb2YgdGhlIHNlcnZpY2VcbiAqIEBwYXJhbSB7c3RyaW5nfSBhY2NvdW50IGlzIEFXUyB0aGUgYWNjb3VudCBudW1iZXJcbiAqIEBwYXJhbSB7b2JqZWN0fSBldmVudCB0aGF0IGludm9rZXMgdGhlIHNlcnZlcmxlc3MgZnVuY3Rpb24uIEluIHRoaXMgY2FzZSwgaXQgaXMgYSBjbG91ZCB3YXRjaCB0cmlnZ2VyXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBtSG5kbHIgaXMgdGhlIGhhbmRsZXIvIHdvcmtlciB0aGF0IHdvcmtzIG9uIHRoZSBtZXNzYWdlIGFwcGx5aW5nIGJ1c2luZXNzIGxvZ2ljXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBwcmVXb3JrZXJIb29rIGN1c3RvbSBsb2dpYyB0byBoYW5kbGUgY29tcGxleCB0aHJvdHRsaW5nIG9yIHByaW9yaXRpemF0aW9uXG4gKiBAcmV0dXJucyB7c3RyaW5nfVxuICogQHRocm93cyB7RXJyb3J9XG4gKi9cbmV4cG9ydCBjb25zdCBoYW5kbGVyID0gYXN5bmMgKFxuICBBV1MsXG4gIHsgdGhyb3R0bGVMbXRzLCBzYWZlVGhyb3R0bGVMaW1pdCwgcmVzZXJ2ZUNhcEZvckRpcmVjdCwgcmV0cnlDbnRGb3JDYXBhY2l0eSB9LFxuICByZWdpb24sXG4gIHNlcnZpY2UsXG4gIGFjY291bnQsXG4gIGV2ZW50LFxuICBtSG5kbHIsXG4gIHByZVdvcmtlckhvb2ssXG4pID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIGBidWxrVHJhbnNpdGlvbjogSU5GTzogU2NoZWR1bGVkIGNhbGwgc3RhcnRlZC4gRXZlbnQgaXMgJHtcbiAgICAgICAgdHlwZW9mIGV2ZW50ID09PSAnb2JqZWN0JyA/IEpTT04uc3RyaW5naWZ5KGV2ZW50LCBudWxsLCA0KSA6IGV2ZW50XG4gICAgICB9YCxcbiAgICApO1xuXG4gICAgLy8gR2V0IHRoZSBhdmFpbGFibGUgY2FwYWNpdHkgZm9yIG1ha2luZyBjYWxscyBiZWZvcmUgZ29pbmcgYW55IGZ1cnRoZXJcbiAgICBjb25zdCBhdmFpbENhcCA9IGF3YWl0IGdldEF2YWlsYWJsZUNhcGFjaXR5KFxuICAgICAgQVdTLFxuICAgICAge1xuICAgICAgICB0aHJvdHRsZUxtdHMsXG4gICAgICAgIHNhZmVUaHJvdHRsZUxpbWl0LFxuICAgICAgICByZXNlcnZlQ2FwRm9yRGlyZWN0LFxuICAgICAgICByZXRyeUNudEZvckNhcGFjaXR5LFxuICAgICAgfSxcbiAgICAgIHNlcnZpY2UsXG4gICAgICB0cnVlLFxuICAgICk7XG5cbiAgICAvLyBJZiB0aGVyZSBpcyBubyBjYXBhY2l0eSBhdmFpbGFibGUsIHRocm93IGJhY2sgYW4gZXJyb3IgYW5kIHdhaXQgZm9yIHRoZVxuICAgIC8vIGZ1bmN0aW9uIHRvIGJlIHJlLXRyaWdnZXJlZCBhZ2FpbiBieSBjbG91ZCB3YXRjaFxuICAgIGlmIChhdmFpbENhcCA8IDEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignYnVsa1RyYW5zaXRpb246IEVSUk9SOiBObyBjYXBhY2l0eSB0byBtYWtlIGEgY2FsbCcpO1xuICAgIH1cbiAgICBjb25zdCBtZXNzYWdlc1RvUHJvY2VzcyA9IGF3YWl0IGdldE1zZ3NGcm9tUXVldWUoXG4gICAgICBBV1MsXG4gICAgICByZWdpb24sXG4gICAgICBhdmFpbENhcCxcbiAgICAgIGBodHRwczovL3Nxcy4ke3JlZ2lvbn0uYW1hem9uYXdzLmNvbS8ke2FjY291bnR9LyR7c2VydmljZX0tYnVsa3RxYCxcbiAgICApO1xuICAgIGNvbnNvbGUubG9nKGBidWxrVHJhbnNpdGlvbjogSU5GTzogUHJvY2Vzc2luZyBldmVudCAke0pTT04uc3RyaW5naWZ5KG1lc3NhZ2VzVG9Qcm9jZXNzLmxlbmd0aCwgbnVsbCwgNCl9YCk7XG5cbiAgICBsZXQgYXBwcm92ZWRNZXNzYWdlcyA9IG1lc3NhZ2VzVG9Qcm9jZXNzLm1hcCgobSkgPT4gc3FzUGFyc2VyKG0pKTtcbiAgICBpZiAocHJlV29ya2VySG9vaykge1xuICAgICAgYXBwcm92ZWRNZXNzYWdlcyA9IGF3YWl0IHByZVdvcmtlckhvb2soJ3RyYW5zaXRpb24nLCB0cnVlLCBhcHByb3ZlZE1lc3NhZ2VzKTtcbiAgICB9XG5cbiAgICBpZiAoYXBwcm92ZWRNZXNzYWdlcy5sZW5ndGggPCAxKSB7XG4gICAgICByZXR1cm4gJ2J1bGtUcmFuc2l0aW9uOiBJTkZPOiBQcm9jZXNzaW5nIGNvbXBsZXRlJztcbiAgICB9XG5cbiAgICAvLyBJbmNyZW1lbnQgdGhlICdjYWxscyBtYWRlIGNvdW50JyBpbiB0aGUgZGF0YWJhc2UgdG8gdGhlIG51bWJlciBvZlxuICAgIC8vIG1lc3NhZ2VzIHRoYXQgd2lsbCBiZSBwcm9jZXNzZWQgdGhpcyBpdGVyYXRpb25cbiAgICBhd2FpdCBpbmNDYWxsQ291bnQoQVdTLCBzZXJ2aWNlLCBhcHByb3ZlZE1lc3NhZ2VzLmxlbmd0aCk7XG5cbiAgICBjb25zdCBwcm9tcyA9IFtdO1xuXG4gICAgLy8gUHVzaCBlYWNoIG1lc3NhZ2UgY2FsbCB0byBhIHByb21pc2UgYXJyYXlcbiAgICBhcHByb3ZlZE1lc3NhZ2VzLmZvckVhY2goKG1lc3NhZ2UpID0+IHtcbiAgICAgIHByb21zLnB1c2gocHJvY2Vzc01lc3NhZ2UoQVdTLCByZWdpb24sIHNlcnZpY2UsIGFjY291bnQsIG1lc3NhZ2UsIG1IbmRscikpO1xuICAgIH0pO1xuXG4gICAgLy8gQXdhaXQgY29tcGxldGlvbiBvZiBhbGwgcHJvbWlzZXNcbiAgICBhd2FpdCBQcm9taXNlLmFsbChwcm9tcyk7XG5cbiAgICByZXR1cm4gJ2J1bGtUcmFuc2l0aW9uOiBJTkZPOiBQcm9jZXNzaW5nIGNvbXBsZXRlJztcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGBidWxrVHJhbnNpdGlvbjogRVJST1I6ICR7Z2V0RXJyb3JTdHJpbmcoZSl9YCk7XG4gICAgdGhyb3cgZTtcbiAgfVxufTtcbiIsImltcG9ydCB7IHByb2Nlc3NNZXNzYWdlIH0gZnJvbSAnLi4vbGlicmFyeS9wcm9jZXNzJztcbmltcG9ydCB7IGdldEVycm9yU3RyaW5nIH0gZnJvbSAnLi4vbGlicmFyeS91dGlsJztcbmltcG9ydCB7IHBhcnNlTXNnIGFzIHNxc1BhcnNlciB9IGZyb20gJy4uL2xpYnJhcnkvcXVldWUnO1xuXG4vKipcbiAqIFRoaXMgaXMgdGhlIGhhbmRsZXIgdGhhdCBpcyBpbnZva2VkIGJ5IGEgU1FTIHRyaWdnZXIgdG8gcHJvY2Vzc1xuICogbWVzc2FnZXMgdGhhdCBhcmUgd2FpdGluZyBpbiB0aGUgYnVsayB0cmFuc2l0aW9uIHF1ZXVlXG4gKiBAcGFyYW0ge29iamVjdH0gQVdTIGlzIHRoZSBBV1Mgc2RrIGluc3RhbmNlIHRoYXQgbmVlZHMgdG8gYmUgcGFzc2VkIGZyb20gdGhlIGhhbmRsZXJcbiAqIEBwYXJhbSB7b2JqZWN0fSB7IHRocm90dGxlTG10cywgc2FmZVRocm90dGxlTGltaXQsIHJlc2VydmVDYXBGb3JEaXJlY3QsIHJldHJ5Q250Rm9yQ2FwYWNpdHkgfSBhcmUgdGhlIHRocm90dGxlIGxpbWl0cyBmcm9tIGVudlxuICogQHBhcmFtIHtzdHJpbmd9IHJlZ2lvbiBpcyB0aGUgcmVnaW9uIG9mIEFXUyB0aGF0IHRoaXMgc2VydmljZSBpcyBydW5uaW5nIGluXG4gKiBAcGFyYW0ge3N0cmluZ30gc2VydmljZSBpcyB0aGUgbmFtZSBvZiB0aGUgc2VydmljZVxuICogQHBhcmFtIHtzdHJpbmd9IGFjY291bnQgaXMgQVdTIHRoZSBhY2NvdW50IG51bWJlclxuICogQHBhcmFtIHtvYmplY3R9IGV2ZW50IHRoYXQgaW52b2tlcyB0aGUgc2VydmVybGVzcyBmdW5jdGlvbi4gSW4gdGhpcyBjYXNlLCBpdCBpcyBhIGNsb3VkIHdhdGNoIHRyaWdnZXJcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IG1IbmRsciBpcyB0aGUgaGFuZGxlci8gd29ya2VyIHRoYXQgd29ya3Mgb24gdGhlIG1lc3NhZ2UgYXBwbHlpbmcgYnVzaW5lc3MgbG9naWNcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IHByZVdvcmtlckhvb2sgY3VzdG9tIGxvZ2ljIHRvIGhhbmRsZSBjb21wbGV4IHRocm90dGxpbmcgb3IgcHJpb3JpdGl6YXRpb25cbiAqIEByZXR1cm5zIHtzdHJpbmd9XG4gKiBAdGhyb3dzIHtFcnJvcn1cbiAqL1xuZXhwb3J0IGNvbnN0IGhhbmRsZXIgPSBhc3luYyAoQVdTLCByZWdpb24sIHNlcnZpY2UsIGFjY291bnQsIGV2ZW50LCBtSG5kbHIsIHByZVdvcmtlckhvb2spID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIGBkaXJlY3RUcmFuc2l0aW9uOiBJTkZPOiBJbnB1dCBpczogJHt0eXBlb2YgZXZlbnQgPT09ICdvYmplY3QnID8gSlNPTi5zdHJpbmdpZnkoZXZlbnQsIG51bGwsIDQpIDogZXZlbnR9YCxcbiAgICApO1xuXG4gICAgLy8gSWYgdGhlcmUgYXJlIG5vIHJlY29yZHMgdG8gcHJvY2VzcyBvciBtb3JlIHRoYW4gb25lIHJlY29yZCB0byBwcm9jZXNzLFxuICAgIC8vIHRocm93IGFuIGVycm9yIGFzIGl0IGlzIGFuIGludmFsaWQgZXZlbnRcbiAgICBpZiAodHlwZW9mIGV2ZW50LlJlY29yZHMgPT09ICd1bmRlZmluZWQnIHx8IGV2ZW50LlJlY29yZHMubGVuZ3RoICE9PSAxKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBkaXJlY3RUcmFuc2l0aW9uOiBFUlJPUjogTGFtYmRhIHdhcyB3cm9uZ2x5IHRyaWdnZXJlZCB3aXRoICR7XG4gICAgICAgICAgdHlwZW9mIGV2ZW50LlJlY29yZHMgPT09ICd1bmRlZmluZWQnID8gMCA6IGV2ZW50LlJlY29yZHMubGVuZ3RoXG4gICAgICAgIH0gcmVjb3Jkc2AsXG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKGB3ZWJob29rOiBJTkZPOiBQcm9jZXNzaW5nIGV2ZW50ICR7SlNPTi5zdHJpbmdpZnkoZXZlbnQuUmVjb3Jkcy5sZW5ndGgsIG51bGwsIDQpfWApO1xuXG4gICAgbGV0IGFwcHJvdmVkTWVzc2FnZXMgPSBbc3FzUGFyc2VyKGV2ZW50LlJlY29yZHNbMF0pXTtcbiAgICBpZiAocHJlV29ya2VySG9vaykge1xuICAgICAgYXBwcm92ZWRNZXNzYWdlcyA9IGF3YWl0IHByZVdvcmtlckhvb2soJ3dlYmhvb2snLCBmYWxzZSwgYXBwcm92ZWRNZXNzYWdlcyk7XG4gICAgfVxuXG4gICAgaWYgKCFhcHByb3ZlZE1lc3NhZ2VzLmxlbmd0aCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdkaXJlY3RGZXRjaDogRVJST1I6IFByb2Nlc3NpbmcgY29tcGxldGUuICBQcmUtd29ya2VyIGhvb2sgcmVqZWN0ZWQgbWVzc2FnZS4nKTtcbiAgICB9XG5cbiAgICAvLyBQYXJzZSB0aGUgbWVzc2FnZSB1c2luZyB0aGUgc3FzUGFyc2VyIGZ1bmN0aW9uIGZyb20gcXVldWUgbGlicmFyeVxuICAgIGNvbnN0IHsgbXNnQm9keSwgbXNnQXR0cmlicyB9ID0gYXBwcm92ZWRNZXNzYWdlc1swXTtcblxuICAgIC8vIENhbGwgdGhlIG1lc3NhZ2UgcHJvY2Vzc29yIHRvIHByb2Nlc3MgdGhlIG1lc3NhZ2Ugd2hpY2ggaW5jbHVkZXMgZXJyb3JcbiAgICAvLyBoYW5kbGluZyBhbmQgcHVibGlzaGluZyByZXNwb25zZSB0byBTTlNcbiAgICBhd2FpdCBwcm9jZXNzTWVzc2FnZShBV1MsIHJlZ2lvbiwgc2VydmljZSwgYWNjb3VudCwgeyBtc2dCb2R5LCBtc2dBdHRyaWJzIH0sIG1IbmRscik7XG5cbiAgICByZXR1cm4gJ2RpcmVjdFRyYW5zaXRpb246IElORk86IFByb2Nlc3NpbmcgY29tcGxldGUnO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coYGRpcmVjdFRyYW5zaXRpb246IEVSUk9SOiAke2dldEVycm9yU3RyaW5nKGUpfWApO1xuICAgIHRocm93IGU7XG4gIH1cbn07XG4iLCJpbXBvcnQgeyBiYXRjaFB1dEludG9EeW5hbW9EYiB9IGZyb20gJy4uL2xpYnJhcnkvZHluYW1vJztcbmltcG9ydCB7IGdldEVycm9yU3RyaW5nIH0gZnJvbSAnLi4vbGlicmFyeS91dGlsJztcblxuLyoqXG4gKiBTZXRzIHVwIHRoZSBkYXRhYmFzZSB3aXRoIHRoZSBnaXZlbiBkYXRhXG4gKiBAcGFyYW0ge29iamVjdH0gQVdTIGlzIHRoZSBBV1Mgc2RrIGluc3RhbmNlIHRoYXQgbmVlZHMgdG8gYmUgcGFzc2VkIGZyb20gdGhlIGhhbmRsZXJcbiAqIEBwYXJhbSB7b2JqZWN0fSBkYXRhIGlzIHRoZSBkYXRhIHRoYXQgbmVlZHMgdG8gYmUgc2F2ZWQgYXMgdmVuZG9yQ29uZmlnIGRhdGFcbiAqIEBwYXJhbSB7c3RyaW5nfSBzZXJ2aWNlIGlzIHRoZSBuYW1lIG9mIHRoZSBzZXJ2aWNlXG4gKiBAcmV0dXJucyB7c3RyaW5nfVxuICogQHRocm93cyB7RXJyb3J9XG4gKi9cbmV4cG9ydCBjb25zdCBoYW5kbGVyID0gYXN5bmMgKEFXUywgZGF0YSwgc2VydmljZSkgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHJlY29yZCA9IHtcbiAgICAgIHNlcnZpY2UsXG4gICAgICBjb25maWdkYXRhOiBkYXRhLFxuICAgIH07XG4gICAgY29uc29sZS5sb2coYERhdGEgYmVpbmcgc2VudCAke0pTT04uc3RyaW5naWZ5KFtyZWNvcmRdLCBudWxsLCA0KX1gKTtcbiAgICBhd2FpdCBiYXRjaFB1dEludG9EeW5hbW9EYihBV1MsIFtyZWNvcmRdLCAndmVuZG9yQ29uZmlnJyk7XG4gICAgY29uc29sZS5sb2coJ0RhdGFiYXNlIGhhcyBiZWVuIHNldHVwIHN1Y2Nlc3NmdWxseScpO1xuICAgIHJldHVybiAnRGF0YWJhc2UgaGFzIGJlZW4gc2V0dXAgc3VjY2Vzc2Z1bGx5JztcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGBidWxrVHJhbnNpdGlvbjogRVJST1I6ICR7Z2V0RXJyb3JTdHJpbmcoZSl9YCk7XG4gICAgdGhyb3cgZTtcbiAgfVxufTtcbiIsImltcG9ydCB7IHY0IGFzIHV1aWQgfSBmcm9tICd1dWlkJztcbmltcG9ydCBlcyBmcm9tICcuLi9saWJyYXJ5L2V2ZW50U3RyZWFtJztcbmltcG9ydCB7IGdldEVycm9yU3RyaW5nIH0gZnJvbSAnLi4vbGlicmFyeS91dGlsJztcblxuLyoqXG4gKiBUaGlzIGlzIHRoZSBoYW5kbGVyIHRoYXQgaXMgaW52b2tlZCBieSBhIGh0dHAgZXZlbnQgdG8gcHJvY2Vzc1xuICogbWVzc2FnZXMgdGhhdCBhcmUgd2FpdGluZyBpbiB0aGUgYnVsayB0cmFuc2l0aW9uIHF1ZXVlXG4gKiBAcGFyYW0ge29iamVjdH0gQVdTIGlzIHRoZSBBV1Mgc2RrIGluc3RhbmNlIHRoYXQgbmVlZHMgdG8gYmUgcGFzc2VkIGZyb20gdGhlIGhhbmRsZXJcbiAqIEBwYXJhbSB7c3RyaW5nfSByZWdpb24gaXMgdGhlIHJlZ2lvbiBvZiBBV1MgdGhhdCB0aGlzIHNlcnZpY2UgaXMgcnVubmluZyBpblxuICogQHBhcmFtIHtzdHJpbmd9IHNlcnZpY2UgaXMgdGhlIG5hbWUgb2YgdGhlIHNlcnZpY2VcbiAqIEBwYXJhbSB7c3RyaW5nfSBhY2NvdW50IGlzIEFXUyB0aGUgYWNjb3VudCBudW1iZXJcbiAqIEBwYXJhbSB7b2JqZWN0fSBldmVudCB0aGF0IGludm9rZXMgdGhlIHNlcnZlcmxlc3MgZnVuY3Rpb24uIEluIHRoaXMgY2FzZSwgaXQgaXMgYSBjbG91ZCB3YXRjaCB0cmlnZ2VyXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBtSG5kbHIgaXMgdGhlIGhhbmRsZXIvIHdvcmtlciB0aGF0IHdvcmtzIG9uIHRoZSBtZXNzYWdlIGFwcGx5aW5nIGJ1c2luZXNzIGxvZ2ljXG4gKiBAcmV0dXJucyB7c3RyaW5nfVxuICogQHRocm93cyB7RXJyb3J9XG4gKi9cbmV4cG9ydCBjb25zdCBoYW5kbGVyID0gYXN5bmMgKEFXUywgcmVnaW9uLCBzZXJ2aWNlLCBhY2NvdW50LCBlbnRpdHlJZCwgZXZlbnQpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZyhgZ2V0cG9zdEh0dHA6IElORk86IElucHV0IGlzOiAke3R5cGVvZiBldmVudCA9PT0gJ29iamVjdCcgPyBKU09OLnN0cmluZ2lmeShldmVudCwgbnVsbCwgNCkgOiBldmVudH1gKTtcblxuICAgIGNvbnN0IGV2ZW50TXNnID0gdHlwZW9mIGV2ZW50ID09PSAnb2JqZWN0JyA/IGV2ZW50IDogSlNPTi5wYXJzZShldmVudCk7XG4gICAgY29uc3QgZXZlbnRCb2R5ID0gZXZlbnRNc2cuYm9keTtcbiAgICBjb25zdCBldmVudFBhdGhQYXJhbXMgPSBldmVudE1zZy5wYXRoUGFyYW1ldGVycztcbiAgICBjb25zdCBldmVudFF1ZXJ5U3RyaW5nUGFyYW1zID0gZXZlbnRNc2cucXVlcnlTdHJpbmdQYXJhbWV0ZXJzICE9PSAndW5kZWZpbmVkJyA/IGV2ZW50TXNnLnF1ZXJ5U3RyaW5nUGFyYW1ldGVycyA6IHt9O1xuXG4gICAgYXdhaXQgZXMucHVibGlzaChcbiAgICAgIEFXUyxcbiAgICAgIGBhcm46YXdzOnNuczoke3JlZ2lvbn06JHthY2NvdW50fTpldmVudC1idXNgLFxuICAgICAge1xuICAgICAgICBwYXlsb2FkOiB7XG4gICAgICAgICAgLi4uZXZlbnRQYXRoUGFyYW1zLFxuICAgICAgICAgIC4uLmV2ZW50Qm9keSxcbiAgICAgICAgICAuLi5ldmVudFF1ZXJ5U3RyaW5nUGFyYW1zLFxuICAgICAgICB9LFxuICAgICAgICBjb250ZXh0OiBudWxsLFxuICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgIGV2ZW50VHlwZTogZXZlbnRQYXRoUGFyYW1zLmV2ZW50VHlwZSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHN0YXR1czogJ3RyaWdnZXInLFxuICAgICAgICBvcGVyYXRpb246IGV2ZW50UGF0aFBhcmFtcy5vcGVyYXRpb24gPT09ICdmZXRjaCcgPyAnUicgOiAnQycsXG4gICAgICAgIGVudGl0eTogJ3Byb2R1Y3QnLFxuICAgICAgICBlbnRpdHlJZCxcbiAgICAgICAgZXZlbnRJZDogdXVpZCgpLFxuICAgICAgICBlbWl0dGVyOiBzZXJ2aWNlLFxuICAgICAgICBldmVudFR5cGU6IGV2ZW50UGF0aFBhcmFtcy5vcGVyYXRpb24sXG4gICAgICB9LFxuICAgICk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3RhdHVzQ29kZTogMjAwLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJzogJyonLFxuICAgICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctQ3JlZGVudGlhbHMnOiB0cnVlLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiAnZ2V0cG9zdEh0dHA6IElORk86IFJlcXVlc3QgYWNjZXB0ZWQgYW5kIHF1ZXVlZCcsXG4gICAgICAgIGlucHV0OiBldmVudCxcbiAgICAgIH0pLFxuICAgIH07XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhgZ2V0cG9zdEh0dHA6IEVSUk9SOiAke2dldEVycm9yU3RyaW5nKGUpfWApO1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXNDb2RlOiA1MDAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nOiAnKicsXG4gICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1DcmVkZW50aWFscyc6IHRydWUsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzdGF0dXM6IGBnZXRwb3N0SHR0cDogRVJST1I6IFdlIGVuY291bnRlcmVkIGFuIGVycm9yLiBQbGVhc2UgcXVvdGUgVFMke0RhdGUubm93KCl9IGFzIHJlZmVyZW5jZSBpZCBmb3IgZnVydGhlciBhc3Npc3RhbmNlYCxcbiAgICAgICAgaW5wdXQ6IGV2ZW50LFxuICAgICAgfSksXG4gICAgfTtcbiAgfVxufTtcbiJdLCJzb3VyY2VSb290IjoiIn0=